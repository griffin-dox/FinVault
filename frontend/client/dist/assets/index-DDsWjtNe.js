var uw=Object.defineProperty;var dw=(t,e,i)=>e in t?uw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var N=(t,e,i)=>dw(t,typeof e!="symbol"?e+"":e,i);import{r as _,R as hw,j as c,V as dg,a as hg,A as fg,C as mg,T as pg,D as gg,P as fw,c as fa,b as yg,d as vg,e as mw,f as pw,g as gw,h as yw,u as _n,i as vw,k as Kt,l as Lt,m as xw,S as _w,n as xg,I as bw,o as _g,p as bg,q as ww,s as wg,t as Tw,L as Tg,v as Sg,w as Sw,x as Pw,y as Pg,z as Nw,B as jw,E as Ng,F as jg,G as Cg,H as xt,O as kg,J as Cw,K as Ag,M as kw,N as Lg,Q as Eg,U as Aw,W as Lw,X as Ew,Y as Mw,Z as Mg}from"./ui-vendor-uaT_Rq-A.js";import{a as Dw,r as Rw}from"./react-vendor-BtP0CW_r.js";import{Q as Iw,u as di,a as Dg,b as ys,c as Ow}from"./query-vendor-Mg2Ed7qp.js";import{c as Rg,t as Vw,X as ma,C as Bw,A as bu,S as js,B as Ig,a as Fw,U as Io,b as zn,T as Oo,d as Og,e as zw,f as Vg,g as Bg,M as Fg,R as wu,K as Tu,h as co,H as uo,i as Sr,N as ho,D as Zw,j as zg,k as Lr,l as Uw,P as $w,E as Ww,m as Zg,n as Ug,o as $g,p as Hw,q as Wg,r as qw,s as Hg,u as qg,v as Kw,w as Gw,x as Xw,G as Yw,y as Qw,z as Su,L as Pu,F as Jw}from"./utils-vendor-BOJ0rcT8.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();var Pr={},Nu;function eT(){if(Nu)return Pr;Nu=1;var t=Dw();return Pr.createRoot=t.createRoot,Pr.hydrateRoot=t.hydrateRoot,Pr}var tT=eT();function nT(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var i,s,a,o,u=[],d="",f=t.split("/");for(f[0]||f.shift();a=f.shift();)i=a[0],i==="*"?(u.push(i),d+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):i===":"?(s=a.indexOf("?",1),o=a.indexOf(".",1),u.push(a.substring(1,~s?s:~o?o:a.length)),d+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(d+=(~s?"?":"")+"\\"+a.substring(o))):d+="/"+a;return{keys:u,pattern:new RegExp("^"+d+(e?"(?=$|/)":"/?$"),"i")}}var fo={exports:{}},mo={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju;function iT(){if(ju)return mo;ju=1;var t=Rw();function e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var i=typeof Object.is=="function"?Object.is:e,s=t.useState,a=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function d(y,x){var b=x(),P=s({inst:{value:b,getSnapshot:x}}),T=P[0].inst,A=P[1];return o(function(){T.value=b,T.getSnapshot=x,f(T)&&A({inst:T})},[y,b,x]),a(function(){return f(T)&&A({inst:T}),y(function(){f(T)&&A({inst:T})})},[y]),u(b),b}function f(y){var x=y.getSnapshot;y=y.value;try{var b=x();return!i(y,b)}catch{return!0}}function p(y,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return mo.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,mo}var Cu;function sT(){return Cu||(Cu=1,fo.exports=iT()),fo.exports}var rT=sT();const aT=hw.useInsertionEffect,oT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lT=oT?_.useLayoutEffect:_.useEffect,cT=aT||lT,Kg=t=>{const e=_.useRef([t,(...i)=>e[0](...i)]).current;return cT(()=>{e[0]=t}),e[1]},uT="popstate",gl="pushState",yl="replaceState",dT="hashchange",ku=[uT,gl,yl,dT],hT=t=>{for(const e of ku)addEventListener(e,t);return()=>{for(const e of ku)removeEventListener(e,t)}},Gg=(t,e)=>rT.useSyncExternalStore(hT,t,e),fT=()=>location.search,mT=({ssrSearch:t=""}={})=>Gg(fT,()=>t),Au=()=>location.pathname,pT=({ssrPath:t}={})=>Gg(Au,t?()=>t:Au),gT=(t,{replace:e=!1,state:i=null}={})=>history[e?yl:gl](i,"",t),yT=(t={})=>[pT(t),gT],Lu=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Lu]>"u"){for(const t of[gl,yl]){const e=history[t];history[t]=function(){const i=e.apply(this,arguments),s=new Event(t);return s.arguments=arguments,dispatchEvent(s),i}}Object.defineProperty(window,Lu,{value:!0})}const vT=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Xg=(t="")=>t==="/"?"":t,xT=(t,e)=>t[0]==="~"?t.slice(1):Xg(e)+t,_T=(t="",e)=>vT(Eu(Xg(t)),Eu(e)),Eu=t=>{try{return decodeURI(t)}catch{return t}},Yg={hook:yT,searchHook:mT,parser:nT,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},Qg=_.createContext(Yg),Ks=()=>_.useContext(Qg),Jg={},ey=_.createContext(Jg),bT=()=>_.useContext(ey),pa=t=>{const[e,i]=t.hook(t);return[_T(t.base,e),Kg((s,a)=>i(xT(s,t.base),a))]},Kn=()=>pa(Ks()),ty=(t,e,i,s)=>{const{pattern:a,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",s),u=a.exec(i)||[],[d,...f]=u;return d!==void 0?[!0,(()=>{const p=o!==!1?Object.fromEntries(o.map((y,x)=>[y,f[x]])):u.groups;let g={...f};return p&&Object.assign(g,p),g})(),...s?[d]:[]]:[!1,null]},wT=({children:t,...e})=>{var g,y;const i=Ks(),s=e.hook?Yg:i;let a=s;const[o,u]=((g=e.ssrPath)==null?void 0:g.split("?"))??[];u&&(e.ssrSearch=u,e.ssrPath=o),e.hrefs=e.hrefs??((y=e.hook)==null?void 0:y.hrefs);let d=_.useRef({}),f=d.current,p=f;for(let x in s){const b=x==="base"?s[x]+(e[x]||""):e[x]||s[x];f===p&&b!==p[x]&&(d.current=p={...p}),p[x]=b,(b!==s[x]||b!==a[x])&&(a=p)}return _.createElement(Qg.Provider,{value:a,children:t})},Mu=({children:t,component:e},i)=>e?_.createElement(e,{params:i}):typeof t=="function"?t(i):t,TT=t=>{let e=_.useRef(Jg);const i=e.current;return e.current=Object.keys(t).length!==Object.keys(i).length||Object.entries(t).some(([s,a])=>a!==i[s])?t:i},jn=({path:t,nest:e,match:i,...s})=>{const a=Ks(),[o]=pa(a),[u,d,f]=i??ty(a.parser,t,o,e),p=TT({...bT(),...d});if(!u)return null;const g=f?_.createElement(wT,{base:f},Mu(s,p)):Mu(s,p);return _.createElement(ey.Provider,{value:p,children:g})},bt=_.forwardRef((t,e)=>{const i=Ks(),[s,a]=pa(i),{to:o="",href:u=o,onClick:d,asChild:f,children:p,className:g,replace:y,state:x,...b}=t,P=Kg(A=>{A.ctrlKey||A.metaKey||A.altKey||A.shiftKey||A.button!==0||(d==null||d(A),A.defaultPrevented||(A.preventDefault(),a(u,t)))}),T=i.hrefs(u[0]==="~"?u.slice(1):i.base+u,i);return f&&_.isValidElement(p)?_.cloneElement(p,{onClick:P,href:T}):_.createElement("a",{...b,onClick:P,href:T,className:g!=null&&g.call?g(s===u):g,children:p,ref:e})}),ny=t=>Array.isArray(t)?t.flatMap(e=>ny(e&&e.type===_.Fragment?e.props.children:e)):[t],ST=({children:t,location:e})=>{const i=Ks(),[s]=pa(i);for(const a of ny(t)){let o=0;if(_.isValidElement(a)&&(o=ty(i.parser,a.props.path,e||s,a.props.nest))[0])return _.cloneElement(a,{match:o})}return null},iy="http://127.0.0.1:8000";console.log("[DEBUG] VITE_API_URL:",iy);function sy(t){return t.startsWith("/")||(t="/"+t),`${iy.replace(/\/$/,"")}${t}`}async function sn(t,e,i){const s=await fetch(sy(e),{method:t,headers:i?{"Content-Type":"application/json"}:{},body:i?JSON.stringify(i):void 0,credentials:"include"});if(!s.ok){let a;try{a=await s.json()}catch{a=await s.text()}throw a}return s}const PT=({on401:t})=>async({queryKey:e})=>{const i=sy(e.join("/")),s=await fetch(i,{credentials:"include"});if(!s.ok){let a;try{a=await s.json()}catch{a=await s.text()}throw a}return await s.json()},NT=new Iw({defaultOptions:{queries:{queryFn:PT({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),jT=1,CT=1e6;let po=0;function kT(){return po=(po+1)%Number.MAX_SAFE_INTEGER,po.toString()}const go=new Map,Du=t=>{if(go.has(t))return;const e=setTimeout(()=>{go.delete(t),vs({type:"REMOVE_TOAST",toastId:t})},CT);go.set(t,e)},AT=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,jT)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=e;return i?Du(i):t.toasts.forEach(s=>{Du(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===i||i===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)}}},Er=[];let Mr={toasts:[]};function vs(t){Mr=AT(Mr,t),Er.forEach(e=>{e(Mr)})}function LT({...t}){const e=kT(),i=a=>vs({type:"UPDATE_TOAST",toast:{...a,id:e}}),s=()=>vs({type:"DISMISS_TOAST",toastId:e});return vs({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:a=>{a||s()}}}),{id:e,dismiss:s,update:i}}function gi(){const[t,e]=_.useState(Mr);return _.useEffect(()=>(Er.push(e),()=>{const i=Er.indexOf(e);i>-1&&Er.splice(i,1)}),[t]),{...t,toast:LT,dismiss:i=>vs({type:"DISMISS_TOAST",toastId:i})}}const Ru=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Iu=Rg,ga=(t,e)=>i=>{var s;if((e==null?void 0:e.variants)==null)return Iu(t,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:a,defaultVariants:o}=e,u=Object.keys(a).map(p=>{const g=i==null?void 0:i[p],y=o==null?void 0:o[p];if(g===null)return null;const x=Ru(g)||Ru(y);return a[p][x]}),d=i&&Object.entries(i).reduce((p,g)=>{let[y,x]=g;return x===void 0||(p[y]=x),p},{}),f=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((p,g)=>{let{class:y,className:x,...b}=g;return Object.entries(b).every(P=>{let[T,A]=P;return Array.isArray(A)?A.includes({...o,...d}[T]):{...o,...d}[T]===A})?[...p,y,x]:p},[]);return Iu(t,u,f,i==null?void 0:i.class,i==null?void 0:i.className)};function _e(...t){return Vw(Rg(t))}const ET=fw,ry=_.forwardRef(({className:t,...e},i)=>c.jsx(dg,{ref:i,className:_e("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));ry.displayName=dg.displayName;const MT=ga("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ay=_.forwardRef(({className:t,variant:e,...i},s)=>c.jsx(hg,{ref:s,className:_e(MT({variant:e}),t),...i}));ay.displayName=hg.displayName;const DT=_.forwardRef(({className:t,...e},i)=>c.jsx(fg,{ref:i,className:_e("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));DT.displayName=fg.displayName;const oy=_.forwardRef(({className:t,...e},i)=>c.jsx(mg,{ref:i,className:_e("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(ma,{className:"h-4 w-4"})}));oy.displayName=mg.displayName;const ly=_.forwardRef(({className:t,...e},i)=>c.jsx(pg,{ref:i,className:_e("text-sm font-semibold",t),...e}));ly.displayName=pg.displayName;const cy=_.forwardRef(({className:t,...e},i)=>c.jsx(gg,{ref:i,className:_e("text-sm opacity-90",t),...e}));cy.displayName=gg.displayName;function RT(){const{toasts:t}=gi();return c.jsxs(ET,{children:[t.map(function({id:e,title:i,description:s,action:a,...o}){return c.jsxs(ay,{...o,children:[c.jsxs("div",{className:"grid gap-1",children:[i&&c.jsx(ly,{children:i}),s&&c.jsx(cy,{children:s})]}),a,c.jsx(oy,{})]},e)}),c.jsx(ry,{})]})}var[ya,P1]=fa("Tooltip",[vg]),vl=vg(),uy="TooltipProvider",IT=700,Ou="tooltip.open",[OT,dy]=ya(uy),hy=t=>{const{__scopeTooltip:e,delayDuration:i=IT,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=t,u=_.useRef(!0),d=_.useRef(!1),f=_.useRef(0);return _.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),c.jsx(OT,{scope:e,isOpenDelayedRef:u,delayDuration:i,onOpen:_.useCallback(()=>{window.clearTimeout(f.current),u.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u.current=!0,s)},[s]),isPointerInTransitRef:d,onPointerInTransitChange:_.useCallback(p=>{d.current=p},[]),disableHoverableContent:a,children:o})};hy.displayName=uy;var fy="Tooltip",[N1,va]=ya(fy),Vo="TooltipTrigger",VT=_.forwardRef((t,e)=>{const{__scopeTooltip:i,...s}=t,a=va(Vo,i),o=dy(Vo,i),u=vl(i),d=_.useRef(null),f=_n(e,d,a.onTriggerChange),p=_.useRef(!1),g=_.useRef(!1),y=_.useCallback(()=>p.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),c.jsx(vw,{asChild:!0,...u,children:c.jsx(Kt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:f,onPointerMove:Lt(t.onPointerMove,x=>{x.pointerType!=="touch"&&!g.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),g.current=!0)}),onPointerLeave:Lt(t.onPointerLeave,()=>{a.onTriggerLeave(),g.current=!1}),onPointerDown:Lt(t.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Lt(t.onFocus,()=>{p.current||a.onOpen()}),onBlur:Lt(t.onBlur,a.onClose),onClick:Lt(t.onClick,a.onClose)})})});VT.displayName=Vo;var BT="TooltipPortal",[j1,FT]=ya(BT,{forceMount:void 0}),Fi="TooltipContent",my=_.forwardRef((t,e)=>{const i=FT(Fi,t.__scopeTooltip),{forceMount:s=i.forceMount,side:a="top",...o}=t,u=va(Fi,t.__scopeTooltip);return c.jsx(yg,{present:s||u.open,children:u.disableHoverableContent?c.jsx(py,{side:a,...o,ref:e}):c.jsx(zT,{side:a,...o,ref:e})})}),zT=_.forwardRef((t,e)=>{const i=va(Fi,t.__scopeTooltip),s=dy(Fi,t.__scopeTooltip),a=_.useRef(null),o=_n(e,a),[u,d]=_.useState(null),{trigger:f,onClose:p}=i,g=a.current,{onPointerInTransitChange:y}=s,x=_.useCallback(()=>{d(null),y(!1)},[y]),b=_.useCallback((P,T)=>{const A=P.currentTarget,D={x:P.clientX,y:P.clientY},j=HT(D,A.getBoundingClientRect()),R=qT(D,j),$=KT(T.getBoundingClientRect()),O=XT([...R,...$]);d(O),y(!0)},[y]);return _.useEffect(()=>()=>x(),[x]),_.useEffect(()=>{if(f&&g){const P=A=>b(A,g),T=A=>b(A,f);return f.addEventListener("pointerleave",P),g.addEventListener("pointerleave",T),()=>{f.removeEventListener("pointerleave",P),g.removeEventListener("pointerleave",T)}}},[f,g,b,x]),_.useEffect(()=>{if(u){const P=T=>{const A=T.target,D={x:T.clientX,y:T.clientY},j=(f==null?void 0:f.contains(A))||(g==null?void 0:g.contains(A)),R=!GT(D,u);j?x():R&&(x(),p())};return document.addEventListener("pointermove",P),()=>document.removeEventListener("pointermove",P)}},[f,g,u,p,x]),c.jsx(py,{...t,ref:o})}),[ZT,UT]=ya(fy,{isInside:!1}),$T=gw("TooltipContent"),py=_.forwardRef((t,e)=>{const{__scopeTooltip:i,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:u,...d}=t,f=va(Fi,i),p=vl(i),{onClose:g}=f;return _.useEffect(()=>(document.addEventListener(Ou,g),()=>document.removeEventListener(Ou,g)),[g]),_.useEffect(()=>{if(f.trigger){const y=x=>{const b=x.target;b!=null&&b.contains(f.trigger)&&g()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[f.trigger,g]),c.jsx(mw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:y=>y.preventDefault(),onDismiss:g,children:c.jsxs(pw,{"data-state":f.stateAttribute,...p,...d,ref:e,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx($T,{children:s}),c.jsx(ZT,{scope:i,isInside:!0,children:c.jsx(yw,{id:f.contentId,role:"tooltip",children:a||s})})]})})});my.displayName=Fi;var gy="TooltipArrow",WT=_.forwardRef((t,e)=>{const{__scopeTooltip:i,...s}=t,a=vl(i);return UT(gy,i).isInside?null:c.jsx(xw,{...a,...s,ref:e})});WT.displayName=gy;function HT(t,e){const i=Math.abs(e.top-t.y),s=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(i,s,a,o)){case o:return"left";case a:return"right";case i:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function qT(t,e,i=5){const s=[];switch(e){case"top":s.push({x:t.x-i,y:t.y+i},{x:t.x+i,y:t.y+i});break;case"bottom":s.push({x:t.x-i,y:t.y-i},{x:t.x+i,y:t.y-i});break;case"left":s.push({x:t.x+i,y:t.y-i},{x:t.x+i,y:t.y+i});break;case"right":s.push({x:t.x-i,y:t.y-i},{x:t.x-i,y:t.y+i});break}return s}function KT(t){const{top:e,right:i,bottom:s,left:a}=t;return[{x:a,y:e},{x:i,y:e},{x:i,y:s},{x:a,y:s}]}function GT(t,e){const{x:i,y:s}=t;let a=!1;for(let o=0,u=e.length-1;o<e.length;u=o++){const d=e[o],f=e[u],p=d.x,g=d.y,y=f.x,x=f.y;g>s!=x>s&&i<(y-p)*(s-g)/(x-g)+p&&(a=!a)}return a}function XT(t){const e=t.slice();return e.sort((i,s)=>i.x<s.x?-1:i.x>s.x?1:i.y<s.y?-1:i.y>s.y?1:0),YT(e)}function YT(t){if(t.length<=1)return t.slice();const e=[];for(let s=0;s<t.length;s++){const a=t[s];for(;e.length>=2;){const o=e[e.length-1],u=e[e.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))e.pop();else break}e.push(a)}e.pop();const i=[];for(let s=t.length-1;s>=0;s--){const a=t[s];for(;i.length>=2;){const o=i[i.length-1],u=i[i.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))i.pop();else break}i.push(a)}return i.pop(),e.length===1&&i.length===1&&e[0].x===i[0].x&&e[0].y===i[0].y?e:e.concat(i)}var QT=hy,yy=my;const JT=QT,eS=_.forwardRef(({className:t,sideOffset:e=4,...i},s)=>c.jsx(yy,{ref:s,sideOffset:e,className:_e("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...i}));eS.displayName=yy.displayName;const De=_.forwardRef(({className:t,...e},i)=>c.jsx("div",{ref:i,className:_e("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));De.displayName="Card";const Je=_.forwardRef(({className:t,...e},i)=>c.jsx("div",{ref:i,className:_e("flex flex-col space-y-1.5 p-6",t),...e}));Je.displayName="CardHeader";const et=_.forwardRef(({className:t,...e},i)=>c.jsx("div",{ref:i,className:_e("text-2xl font-semibold leading-none tracking-tight",t),...e}));et.displayName="CardTitle";const tS=_.forwardRef(({className:t,...e},i)=>c.jsx("div",{ref:i,className:_e("text-sm text-muted-foreground",t),...e}));tS.displayName="CardDescription";const Ie=_.forwardRef(({className:t,...e},i)=>c.jsx("div",{ref:i,className:_e("p-6 pt-0",t),...e}));Ie.displayName="CardContent";const nS=_.forwardRef(({className:t,...e},i)=>c.jsx("div",{ref:i,className:_e("flex items-center p-6 pt-0",t),...e}));nS.displayName="CardFooter";function iS(){return c.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:c.jsx(De,{className:"w-full max-w-md mx-4",children:c.jsxs(Ie,{className:"pt-6",children:[c.jsxs("div",{className:"flex mb-4 gap-2",children:[c.jsx(Bw,{className:"h-8 w-8 text-red-500"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),c.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const sS=ga("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),he=_.forwardRef(({className:t,variant:e,size:i,asChild:s=!1,...a},o)=>{const u=s?_w:"button";return c.jsx(u,{className:_e(sS({variant:e,size:i,className:t})),ref:o,...a})});he.displayName="Button";const xl=_.createContext({});function _l(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const xa=_.createContext(null),bl=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class rS extends _.Component{getSnapshotBeforeUpdate(e){const i=this.props.childRef.current;if(i&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=i.offsetHeight||0,s.width=i.offsetWidth||0,s.top=i.offsetTop,s.left=i.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function aS({children:t,isPresent:e}){const i=_.useId(),s=_.useRef(null),a=_.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=_.useContext(bl);return _.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:p}=a.current;if(e||!s.current||!u||!d)return;s.current.dataset.motionPopId=i;const g=document.createElement("style");return o&&(g.nonce=o),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            top: ${f}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[e]),c.jsx(rS,{isPresent:e,childRef:s,sizeRef:a,children:_.cloneElement(t,{ref:s})})}const oS=({children:t,initial:e,isPresent:i,onExitComplete:s,custom:a,presenceAffectsLayout:o,mode:u})=>{const d=_l(lS),f=_.useId(),p=_.useCallback(y=>{d.set(y,!0);for(const x of d.values())if(!x)return;s&&s()},[d,s]),g=_.useMemo(()=>({id:f,initial:e,isPresent:i,custom:a,onExitComplete:p,register:y=>(d.set(y,!1),()=>d.delete(y))}),o?[Math.random(),p]:[i,p]);return _.useMemo(()=>{d.forEach((y,x)=>d.set(x,!1))},[i]),_.useEffect(()=>{!i&&!d.size&&s&&s()},[i]),u==="popLayout"&&(t=c.jsx(aS,{isPresent:i,children:t})),c.jsx(xa.Provider,{value:g,children:t})};function lS(){return new Map}function vy(t=!0){const e=_.useContext(xa);if(e===null)return[!0,null];const{isPresent:i,onExitComplete:s,register:a}=e,o=_.useId();_.useEffect(()=>{t&&a(o)},[t]);const u=_.useCallback(()=>t&&s&&s(o),[o,s,t]);return!i&&s?[!1,u]:[!0]}const Nr=t=>t.key||"";function Vu(t){const e=[];return _.Children.forEach(t,i=>{_.isValidElement(i)&&e.push(i)}),e}const wl=typeof window<"u",xy=wl?_.useLayoutEffect:_.useEffect,_y=({children:t,custom:e,initial:i=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:o="sync",propagate:u=!1})=>{const[d,f]=vy(u),p=_.useMemo(()=>Vu(t),[t]),g=u&&!d?[]:p.map(Nr),y=_.useRef(!0),x=_.useRef(p),b=_l(()=>new Map),[P,T]=_.useState(p),[A,D]=_.useState(p);xy(()=>{y.current=!1,x.current=p;for(let $=0;$<A.length;$++){const O=Nr(A[$]);g.includes(O)?b.delete(O):b.get(O)!==!0&&b.set(O,!1)}},[A,g.length,g.join("-")]);const j=[];if(p!==P){let $=[...p];for(let O=0;O<A.length;O++){const X=A[O],oe=Nr(X);g.includes(oe)||($.splice(O,0,X),j.push(X))}o==="wait"&&j.length&&($=j),D(Vu($)),T(p);return}const{forceRender:R}=_.useContext(xl);return c.jsx(c.Fragment,{children:A.map($=>{const O=Nr($),X=u&&!d?!1:p===A||g.includes(O),oe=()=>{if(b.has(O))b.set(O,!0);else return;let se=!0;b.forEach(pe=>{pe||(se=!1)}),se&&(R==null||R(),D(x.current),u&&(f==null||f()),s&&s())};return c.jsx(oS,{isPresent:X,initial:!y.current||i?void 0:!1,custom:X?void 0:e,presenceAffectsLayout:a,mode:o,onExitComplete:X?void 0:oe,children:$},O)})})},Rt=t=>t;let by=Rt;function Tl(t){let e;return()=>(e===void 0&&(e=t()),e)}const zi=(t,e,i)=>{const s=e-t;return s===0?1:(i-t)/s},Ln=t=>t*1e3,En=t=>t/1e3,cS={useManualTiming:!1};function uS(t){let e=new Set,i=new Set,s=!1,a=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(p){o.has(p)&&(f.schedule(p),t()),p(u)}const f={schedule:(p,g=!1,y=!1)=>{const b=y&&s?e:i;return g&&o.add(p),b.has(p)||b.add(p),p},cancel:p=>{i.delete(p),o.delete(p)},process:p=>{if(u=p,s){a=!0;return}s=!0,[e,i]=[i,e],e.forEach(d),e.clear(),s=!1,a&&(a=!1,f.process(p))}};return f}const jr=["read","resolveKeyframes","update","preRender","render","postRender"],dS=40;function wy(t,e){let i=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>i=!0,u=jr.reduce((D,j)=>(D[j]=uS(o),D),{}),{read:d,resolveKeyframes:f,update:p,preRender:g,render:y,postRender:x}=u,b=()=>{const D=performance.now();i=!1,a.delta=s?1e3/60:Math.max(Math.min(D-a.timestamp,dS),1),a.timestamp=D,a.isProcessing=!0,d.process(a),f.process(a),p.process(a),g.process(a),y.process(a),x.process(a),a.isProcessing=!1,i&&e&&(s=!1,t(b))},P=()=>{i=!0,s=!0,a.isProcessing||t(b)};return{schedule:jr.reduce((D,j)=>{const R=u[j];return D[j]=($,O=!1,X=!1)=>(i||P(),R.schedule($,O,X)),D},{}),cancel:D=>{for(let j=0;j<jr.length;j++)u[jr[j]].cancel(D)},state:a,steps:u}}const{schedule:$e,cancel:Zn,state:yt,steps:yo}=wy(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rt,!0),Ty=_.createContext({strict:!1}),Bu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zi={};for(const t in Bu)Zi[t]={isEnabled:e=>Bu[t].some(i=>!!e[i])};function hS(t){for(const e in t)Zi[e]={...Zi[e],...t[e]}}const fS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ur(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fS.has(t)}let Sy=t=>!Ur(t);function mS(t){t&&(Sy=e=>e.startsWith("on")?!Ur(e):t(e))}try{mS(require("@emotion/is-prop-valid").default)}catch{}function pS(t,e,i){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(Sy(a)||i===!0&&Ur(a)||!e&&!Ur(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}function gS(t){if(typeof Proxy>"u")return t;const e=new Map,i=(...s)=>t(...s);return new Proxy(i,{get:(s,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const _a=_.createContext({});function Cs(t){return typeof t=="string"||Array.isArray(t)}function ba(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Sl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pl=["initial",...Sl];function wa(t){return ba(t.animate)||Pl.some(e=>Cs(t[e]))}function Py(t){return!!(wa(t)||t.variants)}function yS(t,e){if(wa(t)){const{initial:i,animate:s}=t;return{initial:i===!1||Cs(i)?i:void 0,animate:Cs(s)?s:void 0}}return t.inherit!==!1?e:{}}function vS(t){const{initial:e,animate:i}=yS(t,_.useContext(_a));return _.useMemo(()=>({initial:e,animate:i}),[Fu(e),Fu(i)])}function Fu(t){return Array.isArray(t)?t.join(" "):t}const xS=Symbol.for("motionComponentSymbol");function Li(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _S(t,e,i){return _.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),i&&(typeof i=="function"?i(s):Li(i)&&(i.current=s))},[e])}const Nl=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bS="framerAppearId",Ny="data-"+Nl(bS),{schedule:jl}=wy(queueMicrotask,!1),jy=_.createContext({});function wS(t,e,i,s,a){var o,u;const{visualElement:d}=_.useContext(_a),f=_.useContext(Ty),p=_.useContext(xa),g=_.useContext(bl).reducedMotion,y=_.useRef(null);s=s||f.renderer,!y.current&&s&&(y.current=s(t,{visualState:e,parent:d,props:i,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g}));const x=y.current,b=_.useContext(jy);x&&!x.projection&&a&&(x.type==="html"||x.type==="svg")&&TS(y.current,i,a,b);const P=_.useRef(!1);_.useInsertionEffect(()=>{x&&P.current&&x.update(i,p)});const T=i[Ny],A=_.useRef(!!T&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,T))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,T)));return xy(()=>{x&&(P.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),jl.render(x.render),A.current&&x.animationState&&x.animationState.animateChanges())}),_.useEffect(()=>{x&&(!A.current&&x.animationState&&x.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)===null||D===void 0||D.call(window,T)}),A.current=!1))}),x}function TS(t,e,i,s){const{layoutId:a,layout:o,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:p}=e;t.projection=new i(t.latestValues,e["data-framer-portal-id"]?void 0:Cy(t.parent)),t.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!u||d&&Li(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:p})}function Cy(t){if(t)return t.options.allowProjection!==!1?t.projection:Cy(t.parent)}function SS({preloadedFeatures:t,createVisualElement:e,useRender:i,useVisualState:s,Component:a}){var o,u;t&&hS(t);function d(p,g){let y;const x={..._.useContext(bl),...p,layoutId:PS(p)},{isStatic:b}=x,P=vS(p),T=s(p,b);if(!b&&wl){NS();const A=jS(x);y=A.MeasureLayout,P.visualElement=wS(a,T,x,e,A.ProjectionNode)}return c.jsxs(_a.Provider,{value:P,children:[y&&P.visualElement?c.jsx(y,{visualElement:P.visualElement,...x}):null,i(a,p,_S(T,P.visualElement,g),T,b,P.visualElement)]})}d.displayName=`motion.${typeof a=="string"?a:`create(${(u=(o=a.displayName)!==null&&o!==void 0?o:a.name)!==null&&u!==void 0?u:""})`}`;const f=_.forwardRef(d);return f[xS]=a,f}function PS({layoutId:t}){const e=_.useContext(xl).id;return e&&t!==void 0?e+"-"+t:t}function NS(t,e){_.useContext(Ty).strict}function jS(t){const{drag:e,layout:i}=Zi;if(!e&&!i)return{};const s={...e,...i};return{MeasureLayout:e!=null&&e.isEnabled(t)||i!=null&&i.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const CS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cl(t){return typeof t!="string"||t.includes("-")?!1:!!(CS.indexOf(t)>-1||/[A-Z]/u.test(t))}function zu(t){const e=[{},{}];return t==null||t.values.forEach((i,s)=>{e[0][s]=i.get(),e[1][s]=i.getVelocity()}),e}function kl(t,e,i,s){if(typeof e=="function"){const[a,o]=zu(s);e=e(i!==void 0?i:t.custom,a,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,o]=zu(s);e=e(i!==void 0?i:t.custom,a,o)}return e}const Bo=t=>Array.isArray(t),kS=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),AS=t=>Bo(t)?t[t.length-1]||0:t,wt=t=>!!(t&&t.getVelocity);function Dr(t){const e=wt(t)?t.get():t;return kS(e)?e.toValue():e}function LS({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:i},s,a,o){const u={latestValues:ES(s,a,o,t),renderState:e()};return i&&(u.onMount=d=>i({props:s,current:d,...u}),u.onUpdate=d=>i(d)),u}const ky=t=>(e,i)=>{const s=_.useContext(_a),a=_.useContext(xa),o=()=>LS(t,e,s,a);return i?o():_l(o)};function ES(t,e,i,s){const a={},o=s(t,{});for(const x in o)a[x]=Dr(o[x]);let{initial:u,animate:d}=t;const f=wa(t),p=Py(t);e&&p&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let g=i?i.initial===!1:!1;g=g||u===!1;const y=g?d:u;if(y&&typeof y!="boolean"&&!ba(y)){const x=Array.isArray(y)?y:[y];for(let b=0;b<x.length;b++){const P=kl(t,x[b]);if(P){const{transitionEnd:T,transition:A,...D}=P;for(const j in D){let R=D[j];if(Array.isArray(R)){const $=g?R.length-1:0;R=R[$]}R!==null&&(a[j]=R)}for(const j in T)a[j]=T[j]}}}return a}const Ki=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yi=new Set(Ki),Ay=t=>e=>typeof e=="string"&&e.startsWith(t),Ly=Ay("--"),MS=Ay("var(--"),Al=t=>MS(t)?DS.test(t.split("/*")[0].trim()):!1,DS=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ey=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Dn=(t,e,i)=>i>e?e:i<t?t:i,Gi={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ks={...Gi,transform:t=>Dn(0,1,t)},Cr={...Gi,default:1},Gs=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vn=Gs("deg"),pn=Gs("%"),ce=Gs("px"),RS=Gs("vh"),IS=Gs("vw"),Zu={...pn,parse:t=>pn.parse(t)/100,transform:t=>pn.transform(t*100)},OS={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,backgroundPositionX:ce,backgroundPositionY:ce},VS={rotate:Vn,rotateX:Vn,rotateY:Vn,rotateZ:Vn,scale:Cr,scaleX:Cr,scaleY:Cr,scaleZ:Cr,skew:Vn,skewX:Vn,skewY:Vn,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:ks,originX:Zu,originY:Zu,originZ:ce},Uu={...Gi,transform:Math.round},Ll={...OS,...VS,zIndex:Uu,size:ce,fillOpacity:ks,strokeOpacity:ks,numOctaves:Uu},BS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FS=Ki.length;function zS(t,e,i){let s="",a=!0;for(let o=0;o<FS;o++){const u=Ki[o],d=t[u];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(u.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||i){const p=Ey(d,Ll[u]);if(!f){a=!1;const g=BS[u]||u;s+=`${g}(${p}) `}i&&(e[u]=p)}}return s=s.trim(),i?s=i(e,a?"":s):a&&(s="none"),s}function El(t,e,i){const{style:s,vars:a,transformOrigin:o}=t;let u=!1,d=!1;for(const f in e){const p=e[f];if(yi.has(f)){u=!0;continue}else if(Ly(f)){a[f]=p;continue}else{const g=Ey(p,Ll[f]);f.startsWith("origin")?(d=!0,o[f]=g):s[f]=g}}if(e.transform||(u||i?s.transform=zS(e,t.transform,i):s.transform&&(s.transform="none")),d){const{originX:f="50%",originY:p="50%",originZ:g=0}=o;s.transformOrigin=`${f} ${p} ${g}`}}const ZS={offset:"stroke-dashoffset",array:"stroke-dasharray"},US={offset:"strokeDashoffset",array:"strokeDasharray"};function $S(t,e,i=1,s=0,a=!0){t.pathLength=1;const o=a?ZS:US;t[o.offset]=ce.transform(-s);const u=ce.transform(e),d=ce.transform(i);t[o.array]=`${u} ${d}`}function $u(t,e,i){return typeof t=="string"?t:ce.transform(e+i*t)}function WS(t,e,i){const s=$u(e,t.x,t.width),a=$u(i,t.y,t.height);return`${s} ${a}`}function Ml(t,{attrX:e,attrY:i,attrScale:s,originX:a,originY:o,pathLength:u,pathSpacing:d=1,pathOffset:f=0,...p},g,y){if(El(t,p,y),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:b,dimensions:P}=t;x.transform&&(P&&(b.transform=x.transform),delete x.transform),P&&(a!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=WS(P,a!==void 0?a:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),i!==void 0&&(x.y=i),s!==void 0&&(x.scale=s),u!==void 0&&$S(x,u,d,f,!1)}const Dl=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),My=()=>({...Dl(),attrs:{}}),Rl=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Dy(t,{style:e,vars:i},s,a){Object.assign(t.style,e,a&&a.getProjectionStyles(s));for(const o in i)t.style.setProperty(o,i[o])}const Ry=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Iy(t,e,i,s){Dy(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(Ry.has(a)?a:Nl(a),e.attrs[a])}const $r={};function HS(t){Object.assign($r,t)}function Oy(t,{layout:e,layoutId:i}){return yi.has(t)||t.startsWith("origin")||(e||i!==void 0)&&(!!$r[t]||t==="opacity")}function Il(t,e,i){var s;const{style:a}=t,o={};for(const u in a)(wt(a[u])||e.style&&wt(e.style[u])||Oy(u,t)||((s=i==null?void 0:i.getValue(u))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[u]=a[u]);return o}function Vy(t,e,i){const s=Il(t,e,i);for(const a in t)if(wt(t[a])||wt(e[a])){const o=Ki.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[o]=t[a]}return s}function qS(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Wu=["x","y","width","height","cx","cy","r"],KS={useVisualState:ky({scrapeMotionValuesFromProps:Vy,createRenderState:My,onUpdate:({props:t,prevProps:e,current:i,renderState:s,latestValues:a})=>{if(!i)return;let o=!!t.drag;if(!o){for(const d in a)if(yi.has(d)){o=!0;break}}if(!o)return;let u=!e;if(e)for(let d=0;d<Wu.length;d++){const f=Wu[d];t[f]!==e[f]&&(u=!0)}u&&$e.read(()=>{qS(i,s),$e.render(()=>{Ml(s,a,Rl(i.tagName),t.transformTemplate),Iy(i,s)})})}})},GS={useVisualState:ky({scrapeMotionValuesFromProps:Il,createRenderState:Dl})};function By(t,e,i){for(const s in e)!wt(e[s])&&!Oy(s,i)&&(t[s]=e[s])}function XS({transformTemplate:t},e){return _.useMemo(()=>{const i=Dl();return El(i,e,t),Object.assign({},i.vars,i.style)},[e])}function YS(t,e){const i=t.style||{},s={};return By(s,i,t),Object.assign(s,XS(t,e)),s}function QS(t,e){const i={},s=YS(t,e);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=s,i}function JS(t,e,i,s){const a=_.useMemo(()=>{const o=My();return Ml(o,e,Rl(s),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};By(o,t.style,t),a.style={...o,...a.style}}return a}function eP(t=!1){return(i,s,a,{latestValues:o},u)=>{const f=(Cl(i)?JS:QS)(s,o,u,i),p=pS(s,typeof i=="string",t),g=i!==_.Fragment?{...p,...f,ref:a}:{},{children:y}=s,x=_.useMemo(()=>wt(y)?y.get():y,[y]);return _.createElement(i,{...g,children:x})}}function tP(t,e){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const u={...Cl(s)?KS:GS,preloadedFeatures:t,useRender:eP(a),createVisualElement:e,Component:s};return SS(u)}}function Fy(t,e){if(!Array.isArray(e))return!1;const i=e.length;if(i!==t.length)return!1;for(let s=0;s<i;s++)if(e[s]!==t[s])return!1;return!0}function Ta(t,e,i){const s=t.getProps();return kl(s,e,i!==void 0?i:s.custom,t)}const nP=Tl(()=>window.ScrollTimeline!==void 0);class iP{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,i){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=i}attachTimeline(e,i){const s=this.animations.map(a=>{if(nP()&&a.attachTimeline)return a.attachTimeline(e);if(typeof i=="function")return i(a)});return()=>{s.forEach((a,o)=>{a&&a(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let i=0;i<this.animations.length;i++)e=Math.max(e,this.animations[i].duration);return e}runAll(e){this.animations.forEach(i=>i[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class sP extends iP{then(e,i){return Promise.all(this.animations).then(e).catch(i)}}function Ol(t,e){return t?t[e]||t.default||t:void 0}const Fo=2e4;function zy(t){let e=0;const i=50;let s=t.next(e);for(;!s.done&&e<Fo;)e+=i,s=t.next(e);return e>=Fo?1/0:e}function Vl(t){return typeof t=="function"}function Hu(t,e){t.timeline=e,t.onfinish=null}const Bl=t=>Array.isArray(t)&&typeof t[0]=="number",rP={linearEasing:void 0};function aP(t,e){const i=Tl(t);return()=>{var s;return(s=rP[e])!==null&&s!==void 0?s:i()}}const Wr=aP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zy=(t,e,i=10)=>{let s="";const a=Math.max(Math.round(e/i),2);for(let o=0;o<a;o++)s+=t(zi(0,a-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function Uy(t){return!!(typeof t=="function"&&Wr()||!t||typeof t=="string"&&(t in zo||Wr())||Bl(t)||Array.isArray(t)&&t.every(Uy))}const fs=([t,e,i,s])=>`cubic-bezier(${t}, ${e}, ${i}, ${s})`,zo={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fs([0,.65,.55,1]),circOut:fs([.55,0,1,.45]),backIn:fs([.31,.01,.66,-.59]),backOut:fs([.33,1.53,.69,.99])};function $y(t,e){if(t)return typeof t=="function"&&Wr()?Zy(t,e):Bl(t)?fs(t):Array.isArray(t)?t.map(i=>$y(i,e)||zo.easeOut):zo[t]}const Jt={x:!1,y:!1};function Wy(){return Jt.x||Jt.y}function oP(t,e,i){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const o=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function Hy(t,e){const i=oP(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[i,a,()=>s.abort()]}function qu(t){return e=>{e.pointerType==="touch"||Wy()||t(e)}}function lP(t,e,i={}){const[s,a,o]=Hy(t,i),u=qu(d=>{const{target:f}=d,p=e(d);if(typeof p!="function"||!f)return;const g=qu(y=>{p(y),f.removeEventListener("pointerleave",g)});f.addEventListener("pointerleave",g,a)});return s.forEach(d=>{d.addEventListener("pointerenter",u,a)}),o}const qy=(t,e)=>e?t===e?!0:qy(t,e.parentElement):!1,Fl=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,cP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function uP(t){return cP.has(t.tagName)||t.tabIndex!==-1}const ms=new WeakSet;function Ku(t){return e=>{e.key==="Enter"&&t(e)}}function vo(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const dP=(t,e)=>{const i=t.currentTarget;if(!i)return;const s=Ku(()=>{if(ms.has(i))return;vo(i,"down");const a=Ku(()=>{vo(i,"up")}),o=()=>vo(i,"cancel");i.addEventListener("keyup",a,e),i.addEventListener("blur",o,e)});i.addEventListener("keydown",s,e),i.addEventListener("blur",()=>i.removeEventListener("keydown",s),e)};function Gu(t){return Fl(t)&&!Wy()}function hP(t,e,i={}){const[s,a,o]=Hy(t,i),u=d=>{const f=d.currentTarget;if(!Gu(d)||ms.has(f))return;ms.add(f);const p=e(d),g=(b,P)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),!(!Gu(b)||!ms.has(f))&&(ms.delete(f),typeof p=="function"&&p(b,{success:P}))},y=b=>{g(b,i.useGlobalTarget||qy(f,b.target))},x=b=>{g(b,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",x,a)};return s.forEach(d=>{!uP(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(i.useGlobalTarget?window:d).addEventListener("pointerdown",u,a),d.addEventListener("focus",p=>dP(p,a),a)}),o}function fP(t){return t==="x"||t==="y"?Jt[t]?null:(Jt[t]=!0,()=>{Jt[t]=!1}):Jt.x||Jt.y?null:(Jt.x=Jt.y=!0,()=>{Jt.x=Jt.y=!1})}const Ky=new Set(["width","height","top","left","right","bottom",...Ki]);let Rr;function mP(){Rr=void 0}const gn={now:()=>(Rr===void 0&&gn.set(yt.isProcessing||cS.useManualTiming?yt.timestamp:performance.now()),Rr),set:t=>{Rr=t,queueMicrotask(mP)}};function zl(t,e){t.indexOf(e)===-1&&t.push(e)}function Zl(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}class Ul{constructor(){this.subscriptions=[]}add(e){return zl(this.subscriptions,e),()=>Zl(this.subscriptions,e)}notify(e,i,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,i,s);else for(let o=0;o<a;o++){const u=this.subscriptions[o];u&&u(e,i,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Gy(t,e){return e?t*(1e3/e):0}const Xu=30,pP=t=>!isNaN(parseFloat(t));class gP{constructor(e,i={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const o=gn.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=i.owner}setCurrent(e){this.current=e,this.updatedAt=gn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=pP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,i){this.events[e]||(this.events[e]=new Ul);const s=this.events[e].add(i);return e==="change"?()=>{s(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,i){this.passiveEffect=e,this.stopPassiveEffect=i}set(e,i=!0){!i||!this.passiveEffect?this.updateAndNotify(e,i):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,i,s){this.set(i),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,i=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=gn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xu)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,Xu);return Gy(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(e){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=e(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function As(t,e){return new gP(t,e)}function yP(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,As(i))}function vP(t,e){const i=Ta(t,e);let{transitionEnd:s={},transition:a={},...o}=i||{};o={...o,...s};for(const u in o){const d=AS(o[u]);yP(t,u,d)}}function xP(t){return!!(wt(t)&&t.add)}function Zo(t,e){const i=t.getValue("willChange");if(xP(i))return i.add(e)}function Xy(t){return t.props[Ny]}const Yy=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t,_P=1e-7,bP=12;function wP(t,e,i,s,a){let o,u,d=0;do u=e+(i-e)/2,o=Yy(u,s,a)-t,o>0?i=u:e=u;while(Math.abs(o)>_P&&++d<bP);return u}function Xs(t,e,i,s){if(t===e&&i===s)return Rt;const a=o=>wP(o,0,1,t,i);return o=>o===0||o===1?o:Yy(a(o),e,s)}const Qy=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Jy=t=>e=>1-t(1-e),ev=Xs(.33,1.53,.69,.99),$l=Jy(ev),tv=Qy($l),nv=t=>(t*=2)<1?.5*$l(t):.5*(2-Math.pow(2,-10*(t-1))),Wl=t=>1-Math.sin(Math.acos(t)),iv=Jy(Wl),sv=Qy(Wl),rv=t=>/^0[^.\s]+$/u.test(t);function TP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||rv(t):!0}const xs=t=>Math.round(t*1e5)/1e5,Hl=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function SP(t){return t==null}const PP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ql=(t,e)=>i=>!!(typeof i=="string"&&PP.test(i)&&i.startsWith(t)||e&&!SP(i)&&Object.prototype.hasOwnProperty.call(i,e)),av=(t,e,i)=>s=>{if(typeof s!="string")return s;const[a,o,u,d]=s.match(Hl);return{[t]:parseFloat(a),[e]:parseFloat(o),[i]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},NP=t=>Dn(0,255,t),xo={...Gi,transform:t=>Math.round(NP(t))},ai={test:ql("rgb","red"),parse:av("red","green","blue"),transform:({red:t,green:e,blue:i,alpha:s=1})=>"rgba("+xo.transform(t)+", "+xo.transform(e)+", "+xo.transform(i)+", "+xs(ks.transform(s))+")"};function jP(t){let e="",i="",s="",a="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,i+=i,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const Uo={test:ql("#"),parse:jP,transform:ai.transform},Ei={test:ql("hsl","hue"),parse:av("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:i,alpha:s=1})=>"hsla("+Math.round(t)+", "+pn.transform(xs(e))+", "+pn.transform(xs(i))+", "+xs(ks.transform(s))+")"},_t={test:t=>ai.test(t)||Uo.test(t)||Ei.test(t),parse:t=>ai.test(t)?ai.parse(t):Ei.test(t)?Ei.parse(t):Uo.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ai.transform(t):Ei.transform(t)},CP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kP(t){var e,i;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Hl))===null||e===void 0?void 0:e.length)||0)+(((i=t.match(CP))===null||i===void 0?void 0:i.length)||0)>0}const ov="number",lv="color",AP="var",LP="var(",Yu="${}",EP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ls(t){const e=t.toString(),i=[],s={color:[],number:[],var:[]},a=[];let o=0;const d=e.replace(EP,f=>(_t.test(f)?(s.color.push(o),a.push(lv),i.push(_t.parse(f))):f.startsWith(LP)?(s.var.push(o),a.push(AP),i.push(f)):(s.number.push(o),a.push(ov),i.push(parseFloat(f))),++o,Yu)).split(Yu);return{values:i,split:d,indexes:s,types:a}}function cv(t){return Ls(t).values}function uv(t){const{split:e,types:i}=Ls(t),s=e.length;return a=>{let o="";for(let u=0;u<s;u++)if(o+=e[u],a[u]!==void 0){const d=i[u];d===ov?o+=xs(a[u]):d===lv?o+=_t.transform(a[u]):o+=a[u]}return o}}const MP=t=>typeof t=="number"?0:t;function DP(t){const e=cv(t);return uv(t)(e.map(MP))}const Un={test:kP,parse:cv,createTransformer:uv,getAnimatableNone:DP},RP=new Set(["brightness","contrast","saturate","opacity"]);function IP(t){const[e,i]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=i.match(Hl)||[];if(!s)return t;const a=i.replace(s,"");let o=RP.has(e)?1:0;return s!==i&&(o*=100),e+"("+o+a+")"}const OP=/\b([a-z-]*)\(.*?\)/gu,$o={...Un,getAnimatableNone:t=>{const e=t.match(OP);return e?e.map(IP).join(" "):t}},VP={...Ll,color:_t,backgroundColor:_t,outlineColor:_t,fill:_t,stroke:_t,borderColor:_t,borderTopColor:_t,borderRightColor:_t,borderBottomColor:_t,borderLeftColor:_t,filter:$o,WebkitFilter:$o},Kl=t=>VP[t];function dv(t,e){let i=Kl(t);return i!==$o&&(i=Un),i.getAnimatableNone?i.getAnimatableNone(e):void 0}const BP=new Set(["auto","none","0"]);function FP(t,e,i){let s=0,a;for(;s<t.length&&!a;){const o=t[s];typeof o=="string"&&!BP.has(o)&&Ls(o).values.length&&(a=t[s]),s++}if(a&&i)for(const o of e)t[o]=dv(i,a)}const Qu=t=>t===Gi||t===ce,Ju=(t,e)=>parseFloat(t.split(", ")[e]),ed=(t,e)=>(i,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return Ju(a[1],e);{const o=s.match(/^matrix\((.+)\)$/u);return o?Ju(o[1],t):0}},zP=new Set(["x","y","z"]),ZP=Ki.filter(t=>!zP.has(t));function UP(t){const e=[];return ZP.forEach(i=>{const s=t.getValue(i);s!==void 0&&(e.push([i,s.get()]),s.set(i.startsWith("scale")?1:0))}),e}const Ui={width:({x:t},{paddingLeft:e="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),height:({y:t},{paddingTop:e="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ed(4,13),y:ed(5,14)};Ui.translateX=Ui.x;Ui.translateY=Ui.y;const li=new Set;let Wo=!1,Ho=!1;function hv(){if(Ho){const t=Array.from(li).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),i=new Map;e.forEach(s=>{const a=UP(s);a.length&&(i.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=i.get(s);a&&a.forEach(([o,u])=>{var d;(d=s.getValue(o))===null||d===void 0||d.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Ho=!1,Wo=!1,li.forEach(t=>t.complete()),li.clear()}function fv(){li.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ho=!0)})}function $P(){fv(),hv()}class Gl{constructor(e,i,s,a,o,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=i,this.name=s,this.motionValue=a,this.element=o,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(li.add(this),Wo||(Wo=!0,$e.read(fv),$e.resolveKeyframes(hv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:i,element:s,motionValue:a}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const u=a==null?void 0:a.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(s&&i){const f=s.readValue(i,d);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=d),a&&u===void 0&&a.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),li.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,li.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const mv=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),WP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function HP(t){const e=WP.exec(t);if(!e)return[,];const[,i,s,a]=e;return[`--${i??s}`,a]}function pv(t,e,i=1){const[s,a]=HP(t);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const u=o.trim();return mv(u)?parseFloat(u):u}return Al(a)?pv(a,e,i+1):a}const gv=t=>e=>e.test(t),qP={test:t=>t==="auto",parse:t=>t},yv=[Gi,ce,pn,Vn,IS,RS,qP],td=t=>yv.find(gv(t));class vv extends Gl{constructor(e,i,s,a,o){super(e,i,s,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:i,name:s}=this;if(!i||!i.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),Al(p))){const g=pv(p,i.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Ky.has(s)||e.length!==2)return;const[a,o]=e,u=td(a),d=td(o);if(u!==d)if(Qu(u)&&Qu(d))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:i}=this,s=[];for(let a=0;a<e.length;a++)TP(e[a])&&s.push(a);s.length&&FP(e,s,i)}measureInitialState(){const{element:e,unresolvedKeyframes:i,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ui[s](e.measureViewportBox(),window.getComputedStyle(e.current)),i[0]=this.measuredOrigin;const a=i[i.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){var e;const{element:i,name:s,unresolvedKeyframes:a}=this;if(!i||!i.current)return;const o=i.getValue(s);o&&o.jump(this.measuredOrigin,!1);const u=a.length-1,d=a[u];a[u]=Ui[s](i.measureViewportBox(),window.getComputedStyle(i.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,p])=>{i.getValue(f).set(p)}),this.resolveNoneKeyframes()}}const nd=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Un.test(t)||t==="0")&&!t.startsWith("url("));function KP(t){const e=t[0];if(t.length===1)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}function GP(t,e,i,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=nd(a,e),d=nd(o,e);return!u||!d?!1:KP(t)||(i==="spring"||Vl(i))&&s}const XP=t=>t!==null;function Sa(t,{repeat:e,repeatType:i="loop"},s){const a=t.filter(XP),o=e&&i!=="loop"&&e%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const YP=40;class xv{constructor({autoplay:e=!0,delay:i=0,type:s="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:u="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=gn.now(),this.options={autoplay:e,delay:i,type:s,repeat:a,repeatDelay:o,repeatType:u,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>YP?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&$P(),this._resolved}onKeyframesResolved(e,i){this.resolvedAt=gn.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:o,delay:u,onComplete:d,onUpdate:f,isGenerator:p}=this.options;if(!p&&!GP(e,s,a,o))if(u)this.options.duration=0;else{f&&f(Sa(e,this.options,i)),d&&d(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,i);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:i,...g},this.onPostResolved())}onPostResolved(){}then(e,i){return this.currentFinishedPromise.then(e,i)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ye=(t,e,i)=>t+(e-t)*i;function _o(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function QP({hue:t,saturation:e,lightness:i,alpha:s}){t/=360,e/=100,i/=100;let a=0,o=0,u=0;if(!e)a=o=u=i;else{const d=i<.5?i*(1+e):i+e-i*e,f=2*i-d;a=_o(f,d,t+1/3),o=_o(f,d,t),u=_o(f,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:s}}function Hr(t,e){return i=>i>0?e:t}const bo=(t,e,i)=>{const s=t*t,a=i*(e*e-s)+s;return a<0?0:Math.sqrt(a)},JP=[Uo,ai,Ei],eN=t=>JP.find(e=>e.test(t));function id(t){const e=eN(t);if(!e)return!1;let i=e.parse(t);return e===Ei&&(i=QP(i)),i}const sd=(t,e)=>{const i=id(t),s=id(e);if(!i||!s)return Hr(t,e);const a={...i};return o=>(a.red=bo(i.red,s.red,o),a.green=bo(i.green,s.green,o),a.blue=bo(i.blue,s.blue,o),a.alpha=Ye(i.alpha,s.alpha,o),ai.transform(a))},tN=(t,e)=>i=>e(t(i)),Ys=(...t)=>t.reduce(tN),qo=new Set(["none","hidden"]);function nN(t,e){return qo.has(t)?i=>i<=0?t:e:i=>i>=1?e:t}function iN(t,e){return i=>Ye(t,e,i)}function Xl(t){return typeof t=="number"?iN:typeof t=="string"?Al(t)?Hr:_t.test(t)?sd:aN:Array.isArray(t)?_v:typeof t=="object"?_t.test(t)?sd:sN:Hr}function _v(t,e){const i=[...t],s=i.length,a=t.map((o,u)=>Xl(o)(o,e[u]));return o=>{for(let u=0;u<s;u++)i[u]=a[u](o);return i}}function sN(t,e){const i={...t,...e},s={};for(const a in i)t[a]!==void 0&&e[a]!==void 0&&(s[a]=Xl(t[a])(t[a],e[a]));return a=>{for(const o in s)i[o]=s[o](a);return i}}function rN(t,e){var i;const s=[],a={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const u=e.types[o],d=t.indexes[u][a[u]],f=(i=t.values[d])!==null&&i!==void 0?i:0;s[o]=f,a[u]++}return s}const aN=(t,e)=>{const i=Un.createTransformer(e),s=Ls(t),a=Ls(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?qo.has(t)&&!a.values.length||qo.has(e)&&!s.values.length?nN(t,e):Ys(_v(rN(s,a),a.values),i):Hr(t,e)};function bv(t,e,i){return typeof t=="number"&&typeof e=="number"&&typeof i=="number"?Ye(t,e,i):Xl(t)(t,e)}const oN=5;function wv(t,e,i){const s=Math.max(e-oN,0);return Gy(i-t(s),e-s)}const Qe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wo=.001;function lN({duration:t=Qe.duration,bounce:e=Qe.bounce,velocity:i=Qe.velocity,mass:s=Qe.mass}){let a,o,u=1-e;u=Dn(Qe.minDamping,Qe.maxDamping,u),t=Dn(Qe.minDuration,Qe.maxDuration,En(t)),u<1?(a=p=>{const g=p*u,y=g*t,x=g-i,b=Ko(p,u),P=Math.exp(-y);return wo-x/b*P},o=p=>{const y=p*u*t,x=y*i+i,b=Math.pow(u,2)*Math.pow(p,2)*t,P=Math.exp(-y),T=Ko(Math.pow(p,2),u);return(-a(p)+wo>0?-1:1)*((x-b)*P)/T}):(a=p=>{const g=Math.exp(-p*t),y=(p-i)*t+1;return-wo+g*y},o=p=>{const g=Math.exp(-p*t),y=(i-p)*(t*t);return g*y});const d=5/t,f=uN(a,o,d);if(t=Ln(t),isNaN(f))return{stiffness:Qe.stiffness,damping:Qe.damping,duration:t};{const p=Math.pow(f,2)*s;return{stiffness:p,damping:u*2*Math.sqrt(s*p),duration:t}}}const cN=12;function uN(t,e,i){let s=i;for(let a=1;a<cN;a++)s=s-t(s)/e(s);return s}function Ko(t,e){return t*Math.sqrt(1-e*e)}const dN=["duration","bounce"],hN=["stiffness","damping","mass"];function rd(t,e){return e.some(i=>t[i]!==void 0)}function fN(t){let e={velocity:Qe.velocity,stiffness:Qe.stiffness,damping:Qe.damping,mass:Qe.mass,isResolvedFromDuration:!1,...t};if(!rd(t,hN)&&rd(t,dN))if(t.visualDuration){const i=t.visualDuration,s=2*Math.PI/(i*1.2),a=s*s,o=2*Dn(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Qe.mass,stiffness:a,damping:o}}else{const i=lN(t);e={...e,...i,mass:Qe.mass},e.isResolvedFromDuration=!0}return e}function Tv(t=Qe.visualDuration,e=Qe.bounce){const i=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=i;const o=i.keyframes[0],u=i.keyframes[i.keyframes.length-1],d={done:!1,value:o},{stiffness:f,damping:p,mass:g,duration:y,velocity:x,isResolvedFromDuration:b}=fN({...i,velocity:-En(i.velocity||0)}),P=x||0,T=p/(2*Math.sqrt(f*g)),A=u-o,D=En(Math.sqrt(f/g)),j=Math.abs(A)<5;s||(s=j?Qe.restSpeed.granular:Qe.restSpeed.default),a||(a=j?Qe.restDelta.granular:Qe.restDelta.default);let R;if(T<1){const O=Ko(D,T);R=X=>{const oe=Math.exp(-T*D*X);return u-oe*((P+T*D*A)/O*Math.sin(O*X)+A*Math.cos(O*X))}}else if(T===1)R=O=>u-Math.exp(-D*O)*(A+(P+D*A)*O);else{const O=D*Math.sqrt(T*T-1);R=X=>{const oe=Math.exp(-T*D*X),se=Math.min(O*X,300);return u-oe*((P+T*D*A)*Math.sinh(se)+O*A*Math.cosh(se))/O}}const $={calculatedDuration:b&&y||null,next:O=>{const X=R(O);if(b)d.done=O>=y;else{let oe=0;T<1&&(oe=O===0?Ln(P):wv(R,O,X));const se=Math.abs(oe)<=s,pe=Math.abs(u-X)<=a;d.done=se&&pe}return d.value=d.done?u:X,d},toString:()=>{const O=Math.min(zy($),Fo),X=Zy(oe=>$.next(O*oe).value,O,30);return O+"ms "+X}};return $}function ad({keyframes:t,velocity:e=0,power:i=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:u,min:d,max:f,restDelta:p=.5,restSpeed:g}){const y=t[0],x={done:!1,value:y},b=se=>d!==void 0&&se<d||f!==void 0&&se>f,P=se=>d===void 0?f:f===void 0||Math.abs(d-se)<Math.abs(f-se)?d:f;let T=i*e;const A=y+T,D=u===void 0?A:u(A);D!==A&&(T=D-y);const j=se=>-T*Math.exp(-se/s),R=se=>D+j(se),$=se=>{const pe=j(se),ge=R(se);x.done=Math.abs(pe)<=p,x.value=x.done?D:ge};let O,X;const oe=se=>{b(x.value)&&(O=se,X=Tv({keyframes:[x.value,P(x.value)],velocity:wv(R,se,x.value),damping:a,stiffness:o,restDelta:p,restSpeed:g}))};return oe(0),{calculatedDuration:null,next:se=>{let pe=!1;return!X&&O===void 0&&(pe=!0,$(se),oe(se)),O!==void 0&&se>=O?X.next(se-O):(!pe&&$(se),x)}}}const mN=Xs(.42,0,1,1),pN=Xs(0,0,.58,1),Sv=Xs(.42,0,.58,1),gN=t=>Array.isArray(t)&&typeof t[0]!="number",yN={linear:Rt,easeIn:mN,easeInOut:Sv,easeOut:pN,circIn:Wl,circInOut:sv,circOut:iv,backIn:$l,backInOut:tv,backOut:ev,anticipate:nv},od=t=>{if(Bl(t)){by(t.length===4);const[e,i,s,a]=t;return Xs(e,i,s,a)}else if(typeof t=="string")return yN[t];return t};function vN(t,e,i){const s=[],a=i||bv,o=t.length-1;for(let u=0;u<o;u++){let d=a(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||Rt:e;d=Ys(f,d)}s.push(d)}return s}function xN(t,e,{clamp:i=!0,ease:s,mixer:a}={}){const o=t.length;if(by(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=vN(e,s,a),f=d.length,p=g=>{if(u&&g<t[0])return e[0];let y=0;if(f>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const x=zi(t[y],t[y+1],g);return d[y](x)};return i?g=>p(Dn(t[0],t[o-1],g)):p}function _N(t,e){const i=t[t.length-1];for(let s=1;s<=e;s++){const a=zi(0,e,s);t.push(Ye(i,1,a))}}function bN(t){const e=[0];return _N(e,t.length-1),e}function wN(t,e){return t.map(i=>i*e)}function TN(t,e){return t.map(()=>e||Sv).splice(0,t.length-1)}function qr({duration:t=300,keyframes:e,times:i,ease:s="easeInOut"}){const a=gN(s)?s.map(od):od(s),o={done:!1,value:e[0]},u=wN(i&&i.length===e.length?i:bN(e),t),d=xN(u,e,{ease:Array.isArray(a)?a:TN(e,a)});return{calculatedDuration:t,next:f=>(o.value=d(f),o.done=f>=t,o)}}const SN=t=>{const e=({timestamp:i})=>t(i);return{start:()=>$e.update(e,!0),stop:()=>Zn(e),now:()=>yt.isProcessing?yt.timestamp:gn.now()}},PN={decay:ad,inertia:ad,tween:qr,keyframes:qr,spring:Tv},NN=t=>t/100;class Yl extends xv{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:i,motionValue:s,element:a,keyframes:o}=this.options,u=(a==null?void 0:a.KeyframeResolver)||Gl,d=(f,p)=>this.onKeyframesResolved(f,p);this.resolver=new u(o,d,i,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o,velocity:u=0}=this.options,d=Vl(i)?i:PN[i]||qr;let f,p;d!==qr&&typeof e[0]!="number"&&(f=Ys(NN,bv(e[0],e[1])),e=[0,100]);const g=d({...this.options,keyframes:e});o==="mirror"&&(p=d({...this.options,keyframes:[...e].reverse(),velocity:-u})),g.calculatedDuration===null&&(g.calculatedDuration=zy(g));const{calculatedDuration:y}=g,x=y+a,b=x*(s+1)-a;return{generator:g,mirroredGenerator:p,mapPercentToKeyframes:f,calculatedDuration:y,resolvedDuration:x,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,i=!1){const{resolved:s}=this;if(!s){const{keyframes:se}=this.options;return{done:!0,value:se[se.length-1]}}const{finalKeyframe:a,generator:o,mirroredGenerator:u,mapPercentToKeyframes:d,keyframes:f,calculatedDuration:p,totalDuration:g,resolvedDuration:y}=s;if(this.startTime===null)return o.next(0);const{delay:x,repeat:b,repeatType:P,repeatDelay:T,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),i?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const D=this.currentTime-x*(this.speed>=0?1:-1),j=this.speed>=0?D<0:D>g;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let R=this.currentTime,$=o;if(b){const se=Math.min(this.currentTime,g)/y;let pe=Math.floor(se),ge=se%1;!ge&&se>=1&&(ge=1),ge===1&&pe--,pe=Math.min(pe,b+1),!!(pe%2)&&(P==="reverse"?(ge=1-ge,T&&(ge-=T/y)):P==="mirror"&&($=u)),R=Dn(0,1,ge)*y}const O=j?{done:!1,value:f[0]}:$.next(R);d&&(O.value=d(O.value));let{done:X}=O;!j&&p!==null&&(X=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const oe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return oe&&a!==void 0&&(O.value=Sa(f,this.options,a)),A&&A(O.value),oe&&this.finish(),O}get duration(){const{resolved:e}=this;return e?En(e.calculatedDuration):0}get time(){return En(this.currentTime)}set time(e){e=Ln(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const i=this.playbackSpeed!==e;this.playbackSpeed=e,i&&(this.time=En(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=SN,onPlay:i,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),i&&i();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const jN=new Set(["opacity","clipPath","filter","transform"]);function CN(t,e,i,{delay:s=0,duration:a=300,repeat:o=0,repeatType:u="loop",ease:d="easeInOut",times:f}={}){const p={[e]:i};f&&(p.offset=f);const g=$y(d,a);return Array.isArray(g)&&(p.easing=g),t.animate(p,{delay:s,duration:a,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}const kN=Tl(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Kr=10,AN=2e4;function LN(t){return Vl(t.type)||t.type==="spring"||!Uy(t.ease)}function EN(t,e){const i=new Yl({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const a=[];let o=0;for(;!s.done&&o<AN;)s=i.sample(o),a.push(s.value),o+=Kr;return{times:void 0,keyframes:a,duration:o-Kr,ease:"linear"}}const Pv={anticipate:nv,backInOut:tv,circInOut:sv};function MN(t){return t in Pv}class ld extends xv{constructor(e){super(e);const{name:i,motionValue:s,element:a,keyframes:o}=this.options;this.resolver=new vv(o,(u,d)=>this.onKeyframesResolved(u,d),i,s,a),this.resolver.scheduleResolve()}initPlayback(e,i){let{duration:s=300,times:a,ease:o,type:u,motionValue:d,name:f,startTime:p}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof o=="string"&&Wr()&&MN(o)&&(o=Pv[o]),LN(this.options)){const{onComplete:y,onUpdate:x,motionValue:b,element:P,...T}=this.options,A=EN(e,T);e=A.keyframes,e.length===1&&(e[1]=e[0]),s=A.duration,a=A.times,o=A.ease,u="keyframes"}const g=CN(d.owner.current,f,e,{...this.options,duration:s,times:a,ease:o});return g.startTime=p??this.calcStartTime(),this.pendingTimeline?(Hu(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:y}=this.options;d.set(Sa(e,this.options,i)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:s,times:a,type:u,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:i}=e;return En(i)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:i}=e;return En(i.currentTime||0)}set time(e){const{resolved:i}=this;if(!i)return;const{animation:s}=i;s.currentTime=Ln(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:i}=e;return i.playbackRate}set speed(e){const{resolved:i}=this;if(!i)return;const{animation:s}=i;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:i}=e;return i.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:i}=e;return i.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:i}=this;if(!i)return Rt;const{animation:s}=i;Hu(s,e)}return Rt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:i,keyframes:s,duration:a,type:o,ease:u,times:d}=e;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:g,onComplete:y,element:x,...b}=this.options,P=new Yl({...b,keyframes:s,duration:a,type:o,ease:u,times:d,isGenerator:!0}),T=Ln(this.time);p.setWithVelocity(P.sample(T-Kr).value,P.sample(T).value,Kr)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:i,name:s,repeatDelay:a,repeatType:o,damping:u,type:d}=e;if(!i||!i.owner||!(i.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=i.owner.getProps();return kN()&&s&&jN.has(s)&&!f&&!p&&!a&&o!=="mirror"&&u!==0&&d!=="inertia"}}const DN={type:"spring",stiffness:500,damping:25,restSpeed:10},RN=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IN={type:"keyframes",duration:.8},ON={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},VN=(t,{keyframes:e})=>e.length>2?IN:yi.has(t)?t.startsWith("scale")?RN(e[1]):DN:ON;function BN({when:t,delay:e,delayChildren:i,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:u,repeatDelay:d,from:f,elapsed:p,...g}){return!!Object.keys(g).length}const Ql=(t,e,i,s={},a,o)=>u=>{const d=Ol(s,t)||{},f=d.delay||s.delay||0;let{elapsed:p=0}=s;p=p-Ln(f);let g={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-p,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:a};BN(d)||(g={...g,...VN(t,g)}),g.duration&&(g.duration=Ln(g.duration)),g.repeatDelay&&(g.repeatDelay=Ln(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),y&&!o&&e.get()!==void 0){const x=Sa(g.keyframes,d);if(x!==void 0)return $e.update(()=>{g.onUpdate(x),g.onComplete()}),new sP([])}return!o&&ld.supports(g)?new ld(g):new Yl(g)};function FN({protectedKeys:t,needsAnimating:e},i){const s=t.hasOwnProperty(i)&&e[i]!==!0;return e[i]=!1,s}function Nv(t,e,{delay:i=0,transitionOverride:s,type:a}={}){var o;let{transition:u=t.getDefaultTransition(),transitionEnd:d,...f}=e;s&&(u=s);const p=[],g=a&&t.animationState&&t.animationState.getState()[a];for(const y in f){const x=t.getValue(y,(o=t.latestValues[y])!==null&&o!==void 0?o:null),b=f[y];if(b===void 0||g&&FN(g,y))continue;const P={delay:i,...Ol(u||{},y)};let T=!1;if(window.MotionHandoffAnimation){const D=Xy(t);if(D){const j=window.MotionHandoffAnimation(D,y,$e);j!==null&&(P.startTime=j,T=!0)}}Zo(t,y),x.start(Ql(y,x,b,t.shouldReduceMotion&&Ky.has(y)?{type:!1}:P,t,T));const A=x.animation;A&&p.push(A)}return d&&Promise.all(p).then(()=>{$e.update(()=>{d&&vP(t,d)})}),p}function Go(t,e,i={}){var s;const a=Ta(t,e,i.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=a||{};i.transitionOverride&&(o=i.transitionOverride);const u=a?()=>Promise.all(Nv(t,a,i)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=o;return zN(t,e,g+p,y,x,i)}:()=>Promise.resolve(),{when:f}=o;if(f){const[p,g]=f==="beforeChildren"?[u,d]:[d,u];return p().then(()=>g())}else return Promise.all([u(),d(i.delay)])}function zN(t,e,i=0,s=0,a=1,o){const u=[],d=(t.variantChildren.size-1)*s,f=a===1?(p=0)=>p*s:(p=0)=>d-p*s;return Array.from(t.variantChildren).sort(ZN).forEach((p,g)=>{p.notify("AnimationStart",e),u.push(Go(p,e,{...o,delay:i+f(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(u)}function ZN(t,e){return t.sortNodePosition(e)}function UN(t,e,i={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(o=>Go(t,o,i));s=Promise.all(a)}else if(typeof e=="string")s=Go(t,e,i);else{const a=typeof e=="function"?Ta(t,e,i.custom):e;s=Promise.all(Nv(t,a,i))}return s.then(()=>{t.notify("AnimationComplete",e)})}const $N=Pl.length;function jv(t){if(!t)return;if(!t.isControllingVariants){const i=t.parent?jv(t.parent)||{}:{};return t.props.initial!==void 0&&(i.initial=t.props.initial),i}const e={};for(let i=0;i<$N;i++){const s=Pl[i],a=t.props[s];(Cs(a)||a===!1)&&(e[s]=a)}return e}const WN=[...Sl].reverse(),HN=Sl.length;function qN(t){return e=>Promise.all(e.map(({animation:i,options:s})=>UN(t,i,s)))}function KN(t){let e=qN(t),i=cd(),s=!0;const a=f=>(p,g)=>{var y;const x=Ta(t,g,f==="exit"?(y=t.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(x){const{transition:b,transitionEnd:P,...T}=x;p={...p,...T,...P}}return p};function o(f){e=f(t)}function u(f){const{props:p}=t,g=jv(t.parent)||{},y=[],x=new Set;let b={},P=1/0;for(let A=0;A<HN;A++){const D=WN[A],j=i[D],R=p[D]!==void 0?p[D]:g[D],$=Cs(R),O=D===f?j.isActive:null;O===!1&&(P=A);let X=R===g[D]&&R!==p[D]&&$;if(X&&s&&t.manuallyAnimateOnMount&&(X=!1),j.protectedKeys={...b},!j.isActive&&O===null||!R&&!j.prevProp||ba(R)||typeof R=="boolean")continue;const oe=GN(j.prevProp,R);let se=oe||D===f&&j.isActive&&!X&&$||A>P&&$,pe=!1;const ge=Array.isArray(R)?R:[R];let z=ge.reduce(a(D),{});O===!1&&(z={});const{prevResolvedValues:H={}}=j,re={...H,...z},Z=ye=>{se=!0,x.has(ye)&&(pe=!0,x.delete(ye)),j.needsAnimating[ye]=!0;const Y=t.getValue(ye);Y&&(Y.liveStyle=!1)};for(const ye in re){const Y=z[ye],at=H[ye];if(b.hasOwnProperty(ye))continue;let ne=!1;Bo(Y)&&Bo(at)?ne=!Fy(Y,at):ne=Y!==at,ne?Y!=null?Z(ye):x.add(ye):Y!==void 0&&x.has(ye)?Z(ye):j.protectedKeys[ye]=!0}j.prevProp=R,j.prevResolvedValues=z,j.isActive&&(b={...b,...z}),s&&t.blockInitialAnimation&&(se=!1),se&&(!(X&&oe)||pe)&&y.push(...ge.map(ye=>({animation:ye,options:{type:D}})))}if(x.size){const A={};x.forEach(D=>{const j=t.getBaseTarget(D),R=t.getValue(D);R&&(R.liveStyle=!0),A[D]=j??null}),y.push({animation:A})}let T=!!y.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(T=!1),s=!1,T?e(y):Promise.resolve()}function d(f,p){var g;if(i[f].isActive===p)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(x=>{var b;return(b=x.animationState)===null||b===void 0?void 0:b.setActive(f,p)}),i[f].isActive=p;const y=u(f);for(const x in i)i[x].protectedKeys={};return y}return{animateChanges:u,setActive:d,setAnimateFunction:o,getState:()=>i,reset:()=>{i=cd(),s=!0}}}function GN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Fy(e,t):!1}function ni(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cd(){return{animate:ni(!0),whileInView:ni(),whileHover:ni(),whileTap:ni(),whileDrag:ni(),whileFocus:ni(),exit:ni()}}class Gn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class XN extends Gn{constructor(e){super(e),e.animationState||(e.animationState=KN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ba(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:i}=this.node.prevProps||{};e!==i&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let YN=0;class QN extends Gn{constructor(){super(...arguments),this.id=YN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);i&&!e&&a.then(()=>i(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const JN={animation:{Feature:XN},exit:{Feature:QN}};function Es(t,e,i,s={passive:!0}){return t.addEventListener(e,i,s),()=>t.removeEventListener(e,i)}function Qs(t){return{point:{x:t.pageX,y:t.pageY}}}const ej=t=>e=>Fl(e)&&t(e,Qs(e));function _s(t,e,i,s){return Es(t,e,ej(i),s)}const ud=(t,e)=>Math.abs(t-e);function tj(t,e){const i=ud(t.x,e.x),s=ud(t.y,e.y);return Math.sqrt(i**2+s**2)}class Cv{constructor(e,i,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=So(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=tj(y.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:P}=y,{timestamp:T}=yt;this.history.push({...P,timestamp:T});const{onStart:A,onMove:D}=this.handlers;x||(A&&A(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=To(x,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:b,onSessionEnd:P,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=So(y.type==="pointercancel"?this.lastMoveEventInfo:To(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(y,A),P&&P(y,A)},!Fl(e))return;this.dragSnapToOrigin=o,this.handlers=i,this.transformPagePoint=s,this.contextWindow=a||window;const u=Qs(e),d=To(u,this.transformPagePoint),{point:f}=d,{timestamp:p}=yt;this.history=[{...f,timestamp:p}];const{onSessionStart:g}=i;g&&g(e,So(d,this.history)),this.removeListeners=Ys(_s(this.contextWindow,"pointermove",this.handlePointerMove),_s(this.contextWindow,"pointerup",this.handlePointerUp),_s(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Zn(this.updatePoint)}}function To(t,e){return e?{point:e(t.point)}:t}function dd(t,e){return{x:t.x-e.x,y:t.y-e.y}}function So({point:t},e){return{point:t,delta:dd(t,kv(e)),offset:dd(t,nj(e)),velocity:ij(e,.1)}}function nj(t){return t[0]}function kv(t){return t[t.length-1]}function ij(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,s=null;const a=kv(t);for(;i>=0&&(s=t[i],!(a.timestamp-s.timestamp>Ln(e)));)i--;if(!s)return{x:0,y:0};const o=En(a.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const u={x:(a.x-s.x)/o,y:(a.y-s.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const Av=1e-4,sj=1-Av,rj=1+Av,Lv=.01,aj=0-Lv,oj=0+Lv;function Ot(t){return t.max-t.min}function lj(t,e,i){return Math.abs(t-e)<=i}function hd(t,e,i,s=.5){t.origin=s,t.originPoint=Ye(e.min,e.max,t.origin),t.scale=Ot(i)/Ot(e),t.translate=Ye(i.min,i.max,t.origin)-t.originPoint,(t.scale>=sj&&t.scale<=rj||isNaN(t.scale))&&(t.scale=1),(t.translate>=aj&&t.translate<=oj||isNaN(t.translate))&&(t.translate=0)}function bs(t,e,i,s){hd(t.x,e.x,i.x,s?s.originX:void 0),hd(t.y,e.y,i.y,s?s.originY:void 0)}function fd(t,e,i){t.min=i.min+e.min,t.max=t.min+Ot(e)}function cj(t,e,i){fd(t.x,e.x,i.x),fd(t.y,e.y,i.y)}function md(t,e,i){t.min=e.min-i.min,t.max=t.min+Ot(e)}function ws(t,e,i){md(t.x,e.x,i.x),md(t.y,e.y,i.y)}function uj(t,{min:e,max:i},s){return e!==void 0&&t<e?t=s?Ye(e,t,s.min):Math.max(t,e):i!==void 0&&t>i&&(t=s?Ye(i,t,s.max):Math.min(t,i)),t}function pd(t,e,i){return{min:e!==void 0?t.min+e:void 0,max:i!==void 0?t.max+i-(t.max-t.min):void 0}}function dj(t,{top:e,left:i,bottom:s,right:a}){return{x:pd(t.x,i,a),y:pd(t.y,e,s)}}function gd(t,e){let i=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,s]=[s,i]),{min:i,max:s}}function hj(t,e){return{x:gd(t.x,e.x),y:gd(t.y,e.y)}}function fj(t,e){let i=.5;const s=Ot(t),a=Ot(e);return a>s?i=zi(e.min,e.max-s,t.min):s>a&&(i=zi(t.min,t.max-a,e.min)),Dn(0,1,i)}function mj(t,e){const i={};return e.min!==void 0&&(i.min=e.min-t.min),e.max!==void 0&&(i.max=e.max-t.min),i}const Xo=.35;function pj(t=Xo){return t===!1?t=0:t===!0&&(t=Xo),{x:yd(t,"left","right"),y:yd(t,"top","bottom")}}function yd(t,e,i){return{min:vd(t,e),max:vd(t,i)}}function vd(t,e){return typeof t=="number"?t:t[e]||0}const xd=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mi=()=>({x:xd(),y:xd()}),_d=()=>({min:0,max:0}),it=()=>({x:_d(),y:_d()});function Ht(t){return[t("x"),t("y")]}function Ev({top:t,left:e,right:i,bottom:s}){return{x:{min:e,max:i},y:{min:t,max:s}}}function gj({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function yj(t,e){if(!e)return t;const i=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:s.y,right:s.x}}function Po(t){return t===void 0||t===1}function Yo({scale:t,scaleX:e,scaleY:i}){return!Po(t)||!Po(e)||!Po(i)}function ii(t){return Yo(t)||Mv(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Mv(t){return bd(t.x)||bd(t.y)}function bd(t){return t&&t!=="0%"}function Gr(t,e,i){const s=t-i,a=e*s;return i+a}function wd(t,e,i,s,a){return a!==void 0&&(t=Gr(t,a,s)),Gr(t,i,s)+e}function Qo(t,e=0,i=1,s,a){t.min=wd(t.min,e,i,s,a),t.max=wd(t.max,e,i,s,a)}function Dv(t,{x:e,y:i}){Qo(t.x,e.translate,e.scale,e.originPoint),Qo(t.y,i.translate,i.scale,i.originPoint)}const Td=.999999999999,Sd=1.0000000000001;function vj(t,e,i,s=!1){const a=i.length;if(!a)return;e.x=e.y=1;let o,u;for(let d=0;d<a;d++){o=i[d],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ri(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,Dv(t,u)),s&&ii(o.latestValues)&&Ri(t,o.latestValues))}e.x<Sd&&e.x>Td&&(e.x=1),e.y<Sd&&e.y>Td&&(e.y=1)}function Di(t,e){t.min=t.min+e,t.max=t.max+e}function Pd(t,e,i,s,a=.5){const o=Ye(t.min,t.max,a);Qo(t,e,i,o,s)}function Ri(t,e){Pd(t.x,e.x,e.scaleX,e.scale,e.originX),Pd(t.y,e.y,e.scaleY,e.scale,e.originY)}function Rv(t,e){return Ev(yj(t.getBoundingClientRect(),e))}function xj(t,e,i){const s=Rv(t,i),{scroll:a}=e;return a&&(Di(s.x,a.offset.x),Di(s.y,a.offset.y)),s}const Iv=({current:t})=>t?t.ownerDocument.defaultView:null,_j=new WeakMap;class bj{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=it(),this.visualElement=e}start(e,{snapToCursor:i=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Qs(g).point)},o=(g,y)=>{const{drag:x,dragPropagation:b,onDragStart:P}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fP(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ht(A=>{let D=this.getAxisMotionValue(A).get()||0;if(pn.test(D)){const{projection:j}=this.visualElement;if(j&&j.layout){const R=j.layout.layoutBox[A];R&&(D=Ot(R)*(parseFloat(D)/100))}}this.originPoint[A]=D}),P&&$e.postRender(()=>P(g,y)),Zo(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},u=(g,y)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:P,onDrag:T}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:A}=y;if(b&&this.currentDirection===null){this.currentDirection=wj(A),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",y.point,A),this.updateAxis("y",y.point,A),this.visualElement.render(),T&&T(g,y)},d=(g,y)=>this.stop(g,y),f=()=>Ht(g=>{var y;return this.getAnimationState(g)==="paused"&&((y=this.getAxisMotionValue(g).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Cv(e,{onSessionStart:a,onStart:o,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:Iv(this.visualElement)})}stop(e,i){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&$e.postRender(()=>o(e,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:i}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(e,i,s){const{drag:a}=this.getProps();if(!s||!kr(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=uj(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){var e;const{dragConstraints:i,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;i&&Li(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&a?this.constraints=dj(a.layoutBox,i):this.constraints=!1,this.elastic=pj(s),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Ht(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=mj(a.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:i}=this.getProps();if(!e||!Li(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=xj(s,a.root,this.visualElement.getTransformPagePoint());let u=hj(a.layout.layoutBox,o);if(i){const d=i(gj(u));this.hasMutatedConstraints=!!d,d&&(u=Ev(d))}return u}startAnimation(e){const{drag:i,dragMomentum:s,dragElastic:a,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},p=Ht(g=>{if(!kr(g,i,this.currentDirection))return;let y=f&&f[g]||{};u&&(y={min:0,max:0});const x=a?200:1e6,b=a?40:1e7,P={type:"inertia",velocity:s?e[g]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(g,P)});return Promise.all(p).then(d)}startAxisValueAnimation(e,i){const s=this.getAxisMotionValue(e);return Zo(this.visualElement,e),s.start(Ql(e,s,0,i,this.visualElement,!1))}stopAnimation(){Ht(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ht(e=>{var i;return(i=this.getAxisMotionValue(e).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(e){var i;return(i=this.getAxisMotionValue(e).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(e){const i=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[i];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Ht(i=>{const{drag:s}=this.getProps();if(!kr(i,s,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(i);if(a&&a.layout){const{min:u,max:d}=a.layout.layoutBox[i];o.set(e[i]-Ye(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:i}=this.getProps(),{projection:s}=this.visualElement;if(!Li(i)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ht(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const f=d.get();a[u]=fj({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ht(u=>{if(!kr(u,e,null))return;const d=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];d.set(Ye(f,p,a[u]))})}addListeners(){if(!this.visualElement.current)return;_j.set(this.visualElement,this);const e=this.visualElement.current,i=_s(e,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();Li(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),$e.read(s);const u=Es(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ht(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())});return()=>{u(),i(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:u=Xo,dragMomentum:d=!0}=e;return{...e,drag:i,dragDirectionLock:s,dragPropagation:a,dragConstraints:o,dragElastic:u,dragMomentum:d}}}function kr(t,e,i){return(e===!0||e===t)&&(i===null||i===t)}function wj(t,e=10){let i=null;return Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x"),i}class Tj extends Gn{constructor(e){super(e),this.removeGroupControls=Rt,this.removeListeners=Rt,this.controls=new bj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Nd=t=>(e,i)=>{t&&$e.postRender(()=>t(e,i))};class Sj extends Gn{constructor(){super(...arguments),this.removePointerDownListener=Rt}onPointerDown(e){this.session=new Cv(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Iv(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:i,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:Nd(e),onStart:Nd(i),onMove:s,onEnd:(o,u)=>{delete this.session,a&&$e.postRender(()=>a(o,u))}}}mount(){this.removePointerDownListener=_s(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ir={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jd(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const us={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ce.test(t))t=parseFloat(t);else return t;const i=jd(t,e.target.x),s=jd(t,e.target.y);return`${i}% ${s}%`}},Pj={correct:(t,{treeScale:e,projectionDelta:i})=>{const s=t,a=Un.parse(t);if(a.length>5)return s;const o=Un.createTransformer(t),u=typeof a[0]!="number"?1:0,d=i.x.scale*e.x,f=i.y.scale*e.y;a[0+u]/=d,a[1+u]/=f;const p=Ye(d,f,.5);return typeof a[2+u]=="number"&&(a[2+u]/=p),typeof a[3+u]=="number"&&(a[3+u]/=p),o(a)}};class Nj extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:s,layoutId:a}=this.props,{projection:o}=e;HS(jj),o&&(i.group&&i.group.add(o),s&&s.register&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ir.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:i,visualElement:s,drag:a,isPresent:o}=this.props,u=s.projection;return u&&(u.isPresent=o,a||e.layoutDependency!==i||i===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||$e.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jl.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ov(t){const[e,i]=vy(),s=_.useContext(xl);return c.jsx(Nj,{...t,layoutGroup:s,switchLayoutGroup:_.useContext(jy),isPresent:e,safeToRemove:i})}const jj={borderRadius:{...us,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:us,borderTopRightRadius:us,borderBottomLeftRadius:us,borderBottomRightRadius:us,boxShadow:Pj};function Cj(t,e,i){const s=wt(t)?t:As(t);return s.start(Ql("",s,e,i)),s.animation}function kj(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Aj=(t,e)=>t.depth-e.depth;class Lj{constructor(){this.children=[],this.isDirty=!1}add(e){zl(this.children,e),this.isDirty=!0}remove(e){Zl(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Aj),this.isDirty=!1,this.children.forEach(e)}}function Ej(t,e){const i=gn.now(),s=({timestamp:a})=>{const o=a-i;o>=e&&(Zn(s),t(o-e))};return $e.read(s,!0),()=>Zn(s)}const Vv=["TopLeft","TopRight","BottomLeft","BottomRight"],Mj=Vv.length,Cd=t=>typeof t=="string"?parseFloat(t):t,kd=t=>typeof t=="number"||ce.test(t);function Dj(t,e,i,s,a,o){a?(t.opacity=Ye(0,i.opacity!==void 0?i.opacity:1,Rj(s)),t.opacityExit=Ye(e.opacity!==void 0?e.opacity:1,0,Ij(s))):o&&(t.opacity=Ye(e.opacity!==void 0?e.opacity:1,i.opacity!==void 0?i.opacity:1,s));for(let u=0;u<Mj;u++){const d=`border${Vv[u]}Radius`;let f=Ad(e,d),p=Ad(i,d);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||kd(f)===kd(p)?(t[d]=Math.max(Ye(Cd(f),Cd(p),s),0),(pn.test(p)||pn.test(f))&&(t[d]+="%")):t[d]=p}(e.rotate||i.rotate)&&(t.rotate=Ye(e.rotate||0,i.rotate||0,s))}function Ad(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Rj=Bv(0,.5,iv),Ij=Bv(.5,.95,Rt);function Bv(t,e,i){return s=>s<t?0:s>e?1:i(zi(t,e,s))}function Ld(t,e){t.min=e.min,t.max=e.max}function Wt(t,e){Ld(t.x,e.x),Ld(t.y,e.y)}function Ed(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Md(t,e,i,s,a){return t-=e,t=Gr(t,1/i,s),a!==void 0&&(t=Gr(t,1/a,s)),t}function Oj(t,e=0,i=1,s=.5,a,o=t,u=t){if(pn.test(e)&&(e=parseFloat(e),e=Ye(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=Ye(o.min,o.max,s);t===o&&(d-=e),t.min=Md(t.min,e,i,d,a),t.max=Md(t.max,e,i,d,a)}function Dd(t,e,[i,s,a],o,u){Oj(t,e[i],e[s],e[a],e.scale,o,u)}const Vj=["x","scaleX","originX"],Bj=["y","scaleY","originY"];function Rd(t,e,i,s){Dd(t.x,e,Vj,i?i.x:void 0,s?s.x:void 0),Dd(t.y,e,Bj,i?i.y:void 0,s?s.y:void 0)}function Id(t){return t.translate===0&&t.scale===1}function Fv(t){return Id(t.x)&&Id(t.y)}function Od(t,e){return t.min===e.min&&t.max===e.max}function Fj(t,e){return Od(t.x,e.x)&&Od(t.y,e.y)}function Vd(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zv(t,e){return Vd(t.x,e.x)&&Vd(t.y,e.y)}function Bd(t){return Ot(t.x)/Ot(t.y)}function Fd(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class zj{constructor(){this.members=[]}add(e){zl(this.members,e),e.scheduleRender()}remove(e){if(Zl(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(e){const i=this.members.findIndex(a=>e===a);if(i===0)return!1;let s;for(let a=i;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,i){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,i&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:i,resumingFrom:s}=e;i.onExitComplete&&i.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zj(t,e,i){let s="";const a=t.x.translate/e.x,o=t.y.translate/e.y,u=(i==null?void 0:i.z)||0;if((a||o||u)&&(s=`translate3d(${a}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),i){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:x,skewX:b,skewY:P}=i;p&&(s=`perspective(${p}px) ${s}`),g&&(s+=`rotate(${g}deg) `),y&&(s+=`rotateX(${y}deg) `),x&&(s+=`rotateY(${x}deg) `),b&&(s+=`skewX(${b}deg) `),P&&(s+=`skewY(${P}deg) `)}const d=t.x.scale*e.x,f=t.y.scale*e.y;return(d!==1||f!==1)&&(s+=`scale(${d}, ${f})`),s||"none"}const si={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ps=typeof window<"u"&&window.MotionDebug!==void 0,No=["","X","Y","Z"],Uj={visibility:"hidden"},zd=1e3;let $j=0;function jo(t,e,i,s){const{latestValues:a}=e;a[t]&&(i[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function Zv(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const i=Xy(e);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:a,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",$e,!(a||o))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Zv(s)}function Uv({attachResizeListener:t,defaultParent:e,measureScroll:i,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(u={},d=e==null?void 0:e()){this.id=$j++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ps&&(si.totalNodes=si.resolvedTargetDeltas=si.recalculatedProjection=0),this.nodes.forEach(qj),this.nodes.forEach(Qj),this.nodes.forEach(Jj),this.nodes.forEach(Kj),ps&&window.MotionDebug.record(si)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new Lj)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Ul),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const f=this.eventHandlers.get(u);f&&f.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=kj(u),this.instance=u;const{layoutId:f,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(p||f)&&(this.isLayoutDirty=!0),t){let y;const x=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=Ej(x,250),Ir.hasAnimatedSinceResize&&(Ir.hasAnimatedSinceResize=!1,this.nodes.forEach(Ud))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||p)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:x,hasRelativeTargetChanged:b,layout:P})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||g.getDefaultTransition()||sC,{onLayoutAnimationStart:A,onLayoutAnimationComplete:D}=g.getProps(),j=!this.targetLayout||!zv(this.targetLayout,P)||b,R=!x&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||R||x&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,R);const $={...Ol(T,"layout"),onPlay:A,onComplete:D};(g.shouldReduceMotion||this.options.layoutRoot)&&($.delay=0,$.type=!1),this.startAnimation($)}else x||Ud(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=P})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eC),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Zv(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zd);return}this.isUpdating||this.nodes.forEach(Xj),this.isUpdating=!1,this.nodes.forEach(Yj),this.nodes.forEach(Wj),this.nodes.forEach(Hj),this.clearAllSnapshots();const d=gn.now();yt.delta=Dn(0,1e3/60,d-yt.timestamp),yt.timestamp=d,yt.isProcessing=!0,yo.update.process(yt),yo.preRender.process(yt),yo.render.process(yt),yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jl.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Gj),this.sharedNodes.forEach(tC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=it(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!Fv(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;u&&(d||ii(this.latestValues)||g)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return u&&(f=this.removeTransform(f)),rC(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:d}=this.options;if(!d)return it();const f=d.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(aC))){const{scroll:g}=this.root;g&&(Di(f.x,g.offset.x),Di(f.y,g.offset.y))}return f}removeElementScroll(u){var d;const f=it();if(Wt(f,u),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return f;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Wt(f,u),Di(f.x,y.offset.x),Di(f.y,y.offset.y))}return f}applyTransform(u,d=!1){const f=it();Wt(f,u);for(let p=0;p<this.path.length;p++){const g=this.path[p];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ri(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),ii(g.latestValues)&&Ri(f,g.latestValues)}return ii(this.latestValues)&&Ri(f,this.latestValues),f}removeTransform(u){const d=it();Wt(d,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!ii(p.latestValues))continue;Yo(p.latestValues)&&p.updateSnapshot();const g=it(),y=p.measurePageBox();Wt(g,y),Rd(d,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return ii(this.latestValues)&&Rd(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:x}=this.options;if(!(!this.layout||!(y||x))){if(this.resolvedRelativeTargetAt=yt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=it(),this.relativeTargetOrigin=it(),ws(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Wt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=it(),this.targetWithTransforms=it()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wt(this.target,this.layout.layoutBox),Dv(this.target,this.targetDelta)):Wt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=it(),this.relativeTargetOrigin=it(),ws(this.relativeTargetOrigin,this.target,b.target),Wt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ps&&si.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Yo(this.parent.latestValues)||Mv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),f=!!this.resumingFrom||this!==d;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===yt.timestamp&&(p=!1),p)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;Wt(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,b=this.treeScale.y;vj(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=it());const{target:P}=d;if(!P){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ed(this.prevProjectionDelta.x,this.projectionDelta.x),Ed(this.prevProjectionDelta.y,this.projectionDelta.y)),bs(this.projectionDelta,this.layoutCorrected,P,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==b||!Fd(this.projectionDelta.x,this.prevProjectionDelta.x)||!Fd(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",P)),ps&&si.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mi(),this.projectionDelta=Mi(),this.projectionDeltaWithTransform=Mi()}setAnimationOrigin(u,d=!1){const f=this.snapshot,p=f?f.latestValues:{},g={...this.latestValues},y=Mi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=it(),b=f?f.source:void 0,P=this.layout?this.layout.source:void 0,T=b!==P,A=this.getStack(),D=!A||A.members.length<=1,j=!!(T&&!D&&this.options.crossfade===!0&&!this.path.some(iC));this.animationProgress=0;let R;this.mixTargetDelta=$=>{const O=$/1e3;$d(y.x,u.x,O),$d(y.y,u.y,O),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ws(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nC(this.relativeTarget,this.relativeTargetOrigin,x,O),R&&Fj(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=it()),Wt(R,this.relativeTarget)),T&&(this.animationValues=g,Dj(g,p,this.latestValues,O,j,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{Ir.hasAnimatedSinceResize=!0,this.currentAnimation=Cj(0,zd,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zd),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:f,layout:p,latestValues:g}=u;if(!(!d||!f||!p)){if(this!==u&&this.layout&&p&&$v(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||it();const y=Ot(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const x=Ot(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+x}Wt(d,f),Ri(d,g),bs(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new zj),this.sharedNodes.get(u).add(d);const p=d.options.initialPromotionConfig;d.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const p={};f.z&&jo("z",u,p,this.animationValues);for(let g=0;g<No.length;g++)jo(`rotate${No[g]}`,u,p,this.animationValues),jo(`skew${No[g]}`,u,p,this.animationValues);u.render();for(const g in p)u.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);u.scheduleRender()}getProjectionStyles(u){var d,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Uj;const p={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Dr(u==null?void 0:u.pointerEvents)||"",p.transform=g?g(this.latestValues,""):"none",p;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Dr(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!ii(this.latestValues)&&(T.transform=g?g({},""):"none",this.hasProjected=!1),T}const x=y.animationValues||y.latestValues;this.applyTransformsToTarget(),p.transform=Zj(this.projectionDeltaWithTransform,this.treeScale,x),g&&(p.transform=g(x,p.transform));const{x:b,y:P}=this.projectionDelta;p.transformOrigin=`${b.origin*100}% ${P.origin*100}% 0`,y.animationValues?p.opacity=y===this?(f=(d=x.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:p.opacity=y===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const T in $r){if(x[T]===void 0)continue;const{correct:A,applyTo:D}=$r[T],j=p.transform==="none"?x[T]:A(x[T],y);if(D){const R=D.length;for(let $=0;$<R;$++)p[D[$]]=j}else p[T]=j}return this.options.layoutId&&(p.pointerEvents=y===this?Dr(u==null?void 0:u.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(Zd),this.root.sharedNodes.clear()}}}function Wj(t){t.updateLayout()}function Hj(t){var e;const i=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:o}=t.options,u=i.source!==t.layout.source;o==="size"?Ht(y=>{const x=u?i.measuredBox[y]:i.layoutBox[y],b=Ot(x);x.min=s[y].min,x.max=x.min+b}):$v(o,i.layoutBox,s)&&Ht(y=>{const x=u?i.measuredBox[y]:i.layoutBox[y],b=Ot(s[y]);x.max=x.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+b)});const d=Mi();bs(d,s,i.layoutBox);const f=Mi();u?bs(f,t.applyTransform(a,!0),i.measuredBox):bs(f,s,i.layoutBox);const p=!Fv(d);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:b}=y;if(x&&b){const P=it();ws(P,i.layoutBox,x.layoutBox);const T=it();ws(T,s,b.layoutBox),zv(P,T)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=P,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:i,delta:f,layoutDelta:d,hasLayoutChanged:p,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function qj(t){ps&&si.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Kj(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Gj(t){t.clearSnapshot()}function Zd(t){t.clearMeasurements()}function Xj(t){t.isLayoutDirty=!1}function Yj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ud(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Qj(t){t.resolveTargetDelta()}function Jj(t){t.calcProjection()}function eC(t){t.resetSkewAndRotation()}function tC(t){t.removeLeadSnapshot()}function $d(t,e,i){t.translate=Ye(e.translate,0,i),t.scale=Ye(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function Wd(t,e,i,s){t.min=Ye(e.min,i.min,s),t.max=Ye(e.max,i.max,s)}function nC(t,e,i,s){Wd(t.x,e.x,i.x,s),Wd(t.y,e.y,i.y,s)}function iC(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const sC={duration:.45,ease:[.4,0,.1,1]},Hd=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),qd=Hd("applewebkit/")&&!Hd("chrome/")?Math.round:Rt;function Kd(t){t.min=qd(t.min),t.max=qd(t.max)}function rC(t){Kd(t.x),Kd(t.y)}function $v(t,e,i){return t==="position"||t==="preserve-aspect"&&!lj(Bd(e),Bd(i),.2)}function aC(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const oC=Uv({attachResizeListener:(t,e)=>Es(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Co={current:void 0},Wv=Uv({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Co.current){const t=new oC({});t.mount(window),t.setOptions({layoutScroll:!0}),Co.current=t}return Co.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lC={pan:{Feature:Sj},drag:{Feature:Tj,ProjectionNode:Wv,MeasureLayout:Ov}};function Gd(t,e,i){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",i==="Start");const a="onHover"+i,o=s[a];o&&$e.postRender(()=>o(e,Qs(e)))}class cC extends Gn{mount(){const{current:e}=this.node;e&&(this.unmount=lP(e,i=>(Gd(this.node,i,"Start"),s=>Gd(this.node,s,"End"))))}unmount(){}}class uC extends Gn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ys(Es(this.node.current,"focus",()=>this.onFocus()),Es(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Xd(t,e,i){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",i==="Start");const a="onTap"+(i==="End"?"":i),o=s[a];o&&$e.postRender(()=>o(e,Qs(e)))}class dC extends Gn{mount(){const{current:e}=this.node;e&&(this.unmount=hP(e,i=>(Xd(this.node,i,"Start"),(s,{success:a})=>Xd(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jo=new WeakMap,ko=new WeakMap,hC=t=>{const e=Jo.get(t.target);e&&e(t)},fC=t=>{t.forEach(hC)};function mC({root:t,...e}){const i=t||document;ko.has(i)||ko.set(i,{});const s=ko.get(i),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(fC,{root:t,...e})),s[a]}function pC(t,e,i){const s=mC(e);return Jo.set(t,i),s.observe(t),()=>{Jo.delete(t),s.unobserve(t)}}const gC={some:0,all:1};class yC extends Gn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:i,margin:s,amount:a="some",once:o}=e,u={root:i?i.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:gC[a]},d=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=p?g:y;x&&x(f)};return pC(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:i}=this.node;["amount","margin","root"].some(vC(e,i))&&this.startObserver()}unmount(){}}function vC({viewport:t={}},{viewport:e={}}={}){return i=>t[i]!==e[i]}const xC={inView:{Feature:yC},tap:{Feature:dC},focus:{Feature:uC},hover:{Feature:cC}},_C={layout:{ProjectionNode:Wv,MeasureLayout:Ov}},el={current:null},Hv={current:!1};function bC(){if(Hv.current=!0,!!wl)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>el.current=t.matches;t.addListener(e),e()}else el.current=!1}const wC=[...yv,_t,Un],TC=t=>wC.find(gv(t)),Yd=new WeakMap;function SC(t,e,i){for(const s in e){const a=e[s],o=i[s];if(wt(a))t.addValue(s,a);else if(wt(o))t.addValue(s,As(a,{owner:t}));else if(o!==a)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=t.getStaticValue(s);t.addValue(s,As(u!==void 0?u:a,{owner:t}))}}for(const s in i)e[s]===void 0&&t.removeValue(s);return e}const Qd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PC{scrapeMotionValuesFromProps(e,i,s){return{}}constructor({parent:e,props:i,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:o,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Gl,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=gn.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,$e.render(this.render,!1,!0))};const{latestValues:f,renderState:p,onUpdate:g}=u;this.onUpdate=g,this.latestValues=f,this.baseTarget={...f},this.initialValues=i.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=i,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=wa(i),this.isVariantNode=Py(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...x}=this.scrapeMotionValuesFromProps(i,{},this);for(const b in x){const P=x[b];f[b]!==void 0&&wt(P)&&P.set(f[b],!1)}}mount(e){this.current=e,Yd.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),Hv.current||bC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:el.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Yd.delete(this.current),this.projection&&this.projection.unmount(),Zn(this.notifyUpdate),Zn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(e,i){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=yi.has(e),a=i.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&$e.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=i.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,i)),this.valueSubscriptions.set(e,()=>{a(),o(),u&&u(),i.owner&&i.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zi){const i=Zi[e];if(!i)continue;const{isEnabled:s,Feature:a}=i;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):it()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,i){this.latestValues[e]=i}update(e,i){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let s=0;s<Qd.length;s++){const a=Qd[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,u=e[o];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=SC(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(e),()=>i.variantChildren.delete(e)}addValue(e,i){const s=this.values.get(e);i!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,i),this.values.set(e,i),this.latestValues[e]=i.get())}removeValue(e){this.values.delete(e);const i=this.valueSubscriptions.get(e);i&&(i(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,i){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&i!==void 0&&(s=As(i===null?void 0:i,{owner:this}),this.addValue(e,s)),s}readValue(e,i){var s;let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(mv(a)||rv(a))?a=parseFloat(a):!TC(a)&&Un.test(i)&&(a=dv(e,i)),this.setBaseTarget(e,wt(a)?a.get():a)),wt(a)?a.get():a}setBaseTarget(e,i){this.baseTarget[e]=i}getBaseTarget(e){var i;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const u=kl(this.props,s,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);u&&(a=u[e])}if(s&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!wt(o)?o:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,i){return this.events[e]||(this.events[e]=new Ul),this.events[e].add(i)}notify(e,...i){this.events[e]&&this.events[e].notify(...i)}}class qv extends PC{constructor(){super(...arguments),this.KeyframeResolver=vv}sortInstanceNodePosition(e,i){return e.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(e,i){return e.style?e.style[i]:void 0}removeValueFromRenderState(e,{vars:i,style:s}){delete i[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wt(e)&&(this.childSubscription=e.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function NC(t){return window.getComputedStyle(t)}class jC extends qv{constructor(){super(...arguments),this.type="html",this.renderInstance=Dy}readValueFromInstance(e,i){if(yi.has(i)){const s=Kl(i);return s&&s.default||0}else{const s=NC(e),a=(Ly(i)?s.getPropertyValue(i):s[i])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:i}){return Rv(e,i)}build(e,i,s){El(e,i,s.transformTemplate)}scrapeMotionValuesFromProps(e,i,s){return Il(e,i,s)}}class CC extends qv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=it}getBaseTargetFromProps(e,i){return e[i]}readValueFromInstance(e,i){if(yi.has(i)){const s=Kl(i);return s&&s.default||0}return i=Ry.has(i)?i:Nl(i),e.getAttribute(i)}scrapeMotionValuesFromProps(e,i,s){return Vy(e,i,s)}build(e,i,s){Ml(e,i,this.isSVGTag,s.transformTemplate)}renderInstance(e,i,s,a){Iy(e,i,s,a)}mount(e){this.isSVGTag=Rl(e.tagName),super.mount(e)}}const kC=(t,e)=>Cl(t)?new CC(e):new jC(e,{allowProjection:t!==_.Fragment}),AC=tP({...JN,...xC,...lC,..._C},kC),Ce=gS(AC);function LC(){return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white",children:[c.jsx("section",{className:"py-20",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[c.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[c.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold text-gray-900 mb-6",children:["Banking",c.jsx("span",{className:"text-primary",children:" Without"}),c.jsx("br",{}),"Passwords"]}),c.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Experience the future of secure banking with AI-powered fraud detection, behavioral profiling, and passwordless authentication."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx(bt,{href:"/register",children:c.jsxs(he,{size:"lg",className:"banking-button-primary",children:["Get Started Free",c.jsx(bu,{className:"ml-2 h-5 w-5"})]})}),c.jsx(bt,{href:"/login",children:c.jsx(he,{variant:"outline",size:"lg",className:"banking-button-secondary",children:"Sign In"})})]})]}),c.jsx(Ce.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"relative",children:c.jsxs(De,{className:"banking-card p-6 transform rotate-3 hover:rotate-0 transition-transform duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),c.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),c.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"})]}),c.jsx("div",{className:"text-xs text-gray-500",children:"SecureBank Dashboard"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),c.jsx("div",{className:"h-8 bg-primary/20 rounded"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("div",{className:"h-6 bg-green-100 rounded flex-1"}),c.jsx("div",{className:"h-6 bg-yellow-100 rounded flex-1"})]}),c.jsx("div",{className:"h-16 bg-gray-100 rounded"})]})]})})]})})}),c.jsx("section",{className:"py-20 bg-white",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs(Ce.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Advanced Security Features"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Our AI-powered platform provides unmatched security through behavioral analysis and real-time risk assessment."})]}),c.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:js,title:"Behavioral Profiling",description:"Advanced typing patterns and mouse movement analysis for seamless authentication.",color:"bg-blue-100 text-blue-600"},{icon:Ig,title:"AI Fraud Detection",description:"Real-time transaction scoring and anomaly detection powered by machine learning.",color:"bg-purple-100 text-purple-600"},{icon:Fw,title:"Magic Link Login",description:"Secure, passwordless authentication through email verification and device trust.",color:"bg-green-100 text-green-600"}].map((t,e)=>c.jsxs(Ce.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:e*.2},className:"text-center p-6",children:[c.jsx("div",{className:`w-16 h-16 ${t.color} rounded-full flex items-center justify-center mx-auto mb-4`,children:c.jsx(t.icon,{className:"h-8 w-8"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:t.title}),c.jsx("p",{className:"text-gray-600",children:t.description})]},t.title))})]})}),c.jsx("section",{className:"py-20 bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"grid md:grid-cols-3 gap-8 text-center",children:[{icon:Io,number:"10K+",label:"Trusted Users"},{icon:zn,number:"99.9%",label:"Security Rate"},{icon:Oo,number:"50%",label:"Fraud Reduction"}].map((t,e)=>c.jsx(Ce.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{duration:.8,delay:e*.2},children:c.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[c.jsx(t.icon,{className:"h-8 w-8 text-primary mx-auto mb-4"}),c.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.number}),c.jsx("div",{className:"text-gray-600",children:t.label})]})},t.label))})})}),c.jsx("section",{className:"py-20 bg-primary",children:c.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:c.jsxs(Ce.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8},children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Experience Secure Banking?"}),c.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Join thousands of users who trust SecureBank for their financial security."}),c.jsx(bt,{href:"/register",children:c.jsxs(he,{size:"lg",variant:"secondary",className:"bg-white text-primary hover:bg-gray-100",children:["Start Your Journey",c.jsx(bu,{className:"ml-2 h-5 w-5"})]})})]})})})]})}const Mn=_.forwardRef(({className:t,type:e,...i},s)=>c.jsx("input",{type:e,className:_e("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i}));Mn.displayName="Input";var EC="Label",Kv=_.forwardRef((t,e)=>c.jsx(Kt.label,{...t,ref:e,onMouseDown:i=>{var a;i.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));Kv.displayName=EC;var Gv=Kv;const MC=ga("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),hn=_.forwardRef(({className:t,...e},i)=>c.jsx(Gv,{ref:i,className:_e(MC(),t),...e}));hn.displayName=Gv.displayName;const Or=Nw,Vr=jw,Ts=_.forwardRef(({className:t,children:e,...i},s)=>c.jsxs(xg,{ref:s,className:_e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[e,c.jsx(bw,{asChild:!0,children:c.jsx(Og,{className:"h-4 w-4 opacity-50"})})]}));Ts.displayName=xg.displayName;const Xv=_.forwardRef(({className:t,...e},i)=>c.jsx(_g,{ref:i,className:_e("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(zw,{className:"h-4 w-4"})}));Xv.displayName=_g.displayName;const Yv=_.forwardRef(({className:t,...e},i)=>c.jsx(bg,{ref:i,className:_e("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(Og,{className:"h-4 w-4"})}));Yv.displayName=bg.displayName;const Ss=_.forwardRef(({className:t,children:e,position:i="popper",...s},a)=>c.jsx(ww,{children:c.jsxs(wg,{ref:a,className:_e("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...s,children:[c.jsx(Xv,{}),c.jsx(Tw,{className:_e("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(Yv,{})]})}));Ss.displayName=wg.displayName;const DC=_.forwardRef(({className:t,...e},i)=>c.jsx(Tg,{ref:i,className:_e("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));DC.displayName=Tg.displayName;const kt=_.forwardRef(({className:t,children:e,...i},s)=>c.jsxs(Sg,{ref:s,className:_e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(Sw,{children:c.jsx(Vg,{className:"h-4 w-4"})})}),c.jsx(Pw,{children:e})]}));kt.displayName=Sg.displayName;const RC=_.forwardRef(({className:t,...e},i)=>c.jsx(Pg,{ref:i,className:_e("-mx-1 my-1 h-px bg-muted",t),...e}));RC.displayName=Pg.displayName;var Pa="Checkbox",[IC,k1]=fa(Pa),[OC,Jl]=IC(Pa);function VC(t){const{__scopeCheckbox:e,checked:i,children:s,defaultChecked:a,disabled:o,form:u,name:d,onCheckedChange:f,required:p,value:g="on",internal_do_not_use_render:y}=t,[x,b]=Ng({prop:i,defaultProp:a??!1,onChange:f,caller:Pa}),[P,T]=_.useState(null),[A,D]=_.useState(null),j=_.useRef(!1),R=P?!!u||!!P.closest("form"):!0,$={checked:x,disabled:o,setChecked:b,control:P,setControl:T,name:d,form:u,value:g,hasConsumerStoppedPropagationRef:j,required:p,defaultChecked:Fn(a)?!1:a,isFormControl:R,bubbleInput:A,setBubbleInput:D};return c.jsx(OC,{scope:e,...$,children:BC(y)?y($):s})}var Qv="CheckboxTrigger",Jv=_.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:i,...s},a)=>{const{control:o,value:u,disabled:d,checked:f,required:p,setControl:g,setChecked:y,hasConsumerStoppedPropagationRef:x,isFormControl:b,bubbleInput:P}=Jl(Qv,t),T=_n(a,g),A=_.useRef(f);return _.useEffect(()=>{const D=o==null?void 0:o.form;if(D){const j=()=>y(A.current);return D.addEventListener("reset",j),()=>D.removeEventListener("reset",j)}},[o,y]),c.jsx(Kt.button,{type:"button",role:"checkbox","aria-checked":Fn(f)?"mixed":f,"aria-required":p,"data-state":sx(f),"data-disabled":d?"":void 0,disabled:d,value:u,...s,ref:T,onKeyDown:Lt(e,D=>{D.key==="Enter"&&D.preventDefault()}),onClick:Lt(i,D=>{y(j=>Fn(j)?!0:!j),P&&b&&(x.current=D.isPropagationStopped(),x.current||D.stopPropagation())})})});Jv.displayName=Qv;var ec=_.forwardRef((t,e)=>{const{__scopeCheckbox:i,name:s,checked:a,defaultChecked:o,required:u,disabled:d,value:f,onCheckedChange:p,form:g,...y}=t;return c.jsx(VC,{__scopeCheckbox:i,checked:a,defaultChecked:o,disabled:d,required:u,onCheckedChange:p,name:s,form:g,value:f,internal_do_not_use_render:({isFormControl:x})=>c.jsxs(c.Fragment,{children:[c.jsx(Jv,{...y,ref:e,__scopeCheckbox:i}),x&&c.jsx(ix,{__scopeCheckbox:i})]})})});ec.displayName=Pa;var ex="CheckboxIndicator",tx=_.forwardRef((t,e)=>{const{__scopeCheckbox:i,forceMount:s,...a}=t,o=Jl(ex,i);return c.jsx(yg,{present:s||Fn(o.checked)||o.checked===!0,children:c.jsx(Kt.span,{"data-state":sx(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});tx.displayName=ex;var nx="CheckboxBubbleInput",ix=_.forwardRef(({__scopeCheckbox:t,...e},i)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:u,required:d,disabled:f,name:p,value:g,form:y,bubbleInput:x,setBubbleInput:b}=Jl(nx,t),P=_n(i,b),T=jg(o),A=Cg(s);_.useEffect(()=>{const j=x;if(!j)return;const R=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(R,"checked").set,X=!a.current;if(T!==o&&O){const oe=new Event("click",{bubbles:X});j.indeterminate=Fn(o),O.call(j,Fn(o)?!1:o),j.dispatchEvent(oe)}},[x,T,o,a]);const D=_.useRef(Fn(o)?!1:o);return c.jsx(Kt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??D.current,required:d,disabled:f,name:p,value:g,form:y,...e,tabIndex:-1,ref:P,style:{...e.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ix.displayName=nx;function BC(t){return typeof t=="function"}function Fn(t){return t==="indeterminate"}function sx(t){return Fn(t)?"indeterminate":t?"checked":"unchecked"}const rx=_.forwardRef(({className:t,...e},i)=>c.jsx(ec,{ref:i,className:_e("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:c.jsx(tx,{className:_e("flex items-center justify-center text-current"),children:c.jsx(Vg,{className:"h-4 w-4"})})}));rx.displayName=ec.displayName;var Js=t=>t.type==="checkbox",oi=t=>t instanceof Date,Pt=t=>t==null;const ax=t=>typeof t=="object";var rt=t=>!Pt(t)&&!Array.isArray(t)&&ax(t)&&!oi(t),FC=t=>rt(t)&&t.target?Js(t.target)?t.target.checked:t.target.value:t,zC=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ZC=(t,e)=>t.has(zC(e)),UC=t=>{const e=t.constructor&&t.constructor.prototype;return rt(e)&&e.hasOwnProperty("isPrototypeOf")},tc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ft(t){let e;const i=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(tc&&(t instanceof Blob||s))&&(i||rt(t)))if(e=i?[]:{},!i&&!UC(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=ft(t[a]));else return t;return e}var Na=t=>/^\w*$/.test(t),ut=t=>t===void 0,nc=t=>Array.isArray(t)?t.filter(Boolean):[],ic=t=>nc(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ee=(t,e,i)=>{if(!e||!rt(t))return i;const s=(Na(e)?[e]:ic(e)).reduce((a,o)=>Pt(a)?a:a[o],t);return ut(s)||s===t?ut(t[e])?i:t[e]:s},dn=t=>typeof t=="boolean",Ze=(t,e,i)=>{let s=-1;const a=Na(e)?[e]:ic(e),o=a.length,u=o-1;for(;++s<o;){const d=a[s];let f=i;if(s!==u){const p=t[d];f=rt(p)||Array.isArray(p)?p:isNaN(+a[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;t[d]=f,t=t[d]}};const Jd={BLUR:"blur",FOCUS_OUT:"focusout"},en={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Cn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},$C=xt.createContext(null);$C.displayName="HookFormContext";var WC=(t,e,i,s=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const u=o;return e._proxyFormState[u]!==en.all&&(e._proxyFormState[u]=!s||en.all),t[u]}});return a};const HC=typeof window<"u"?xt.useLayoutEffect:xt.useEffect;var fn=t=>typeof t=="string",qC=(t,e,i,s,a)=>fn(t)?(s&&e.watch.add(t),ee(i,t,a)):Array.isArray(t)?t.map(o=>(s&&e.watch.add(o),ee(i,o))):(s&&(e.watchAll=!0),i),tl=t=>Pt(t)||!ax(t);function Bn(t,e,i=new WeakSet){if(tl(t)||tl(e))return t===e;if(oi(t)&&oi(e))return t.getTime()===e.getTime();const s=Object.keys(t),a=Object.keys(e);if(s.length!==a.length)return!1;if(i.has(t)||i.has(e))return!0;i.add(t),i.add(e);for(const o of s){const u=t[o];if(!a.includes(o))return!1;if(o!=="ref"){const d=e[o];if(oi(u)&&oi(d)||rt(u)&&rt(d)||Array.isArray(u)&&Array.isArray(d)?!Bn(u,d,i):u!==d)return!1}}return!0}var ox=(t,e,i,s,a)=>e?{...i[t],types:{...i[t]&&i[t].types?i[t].types:{},[s]:a||!0}}:{},Ps=t=>Array.isArray(t)?t:[t],eh=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},At=t=>rt(t)&&!Object.keys(t).length,sc=t=>t.type==="file",tn=t=>typeof t=="function",Xr=t=>{if(!tc)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},lx=t=>t.type==="select-multiple",rc=t=>t.type==="radio",KC=t=>rc(t)||Js(t),Ao=t=>Xr(t)&&t.isConnected;function GC(t,e){const i=e.slice(0,-1).length;let s=0;for(;s<i;)t=ut(t)?s++:t[e[s++]];return t}function XC(t){for(const e in t)if(t.hasOwnProperty(e)&&!ut(t[e]))return!1;return!0}function ct(t,e){const i=Array.isArray(e)?e:Na(e)?[e]:ic(e),s=i.length===1?t:GC(t,i),a=i.length-1,o=i[a];return s&&delete s[o],a!==0&&(rt(s)&&At(s)||Array.isArray(s)&&XC(s))&&ct(t,i.slice(0,-1)),t}var cx=t=>{for(const e in t)if(tn(t[e]))return!0;return!1};function Yr(t,e={}){const i=Array.isArray(t);if(rt(t)||i)for(const s in t)Array.isArray(t[s])||rt(t[s])&&!cx(t[s])?(e[s]=Array.isArray(t[s])?[]:{},Yr(t[s],e[s])):Pt(t[s])||(e[s]=!0);return e}function ux(t,e,i){const s=Array.isArray(t);if(rt(t)||s)for(const a in t)Array.isArray(t[a])||rt(t[a])&&!cx(t[a])?ut(e)||tl(i[a])?i[a]=Array.isArray(t[a])?Yr(t[a],[]):{...Yr(t[a])}:ux(t[a],Pt(e)?{}:e[a],i[a]):i[a]=!Bn(t[a],e[a]);return i}var ds=(t,e)=>ux(t,e,Yr(e));const th={value:!1,isValid:!1},nh={value:!0,isValid:!0};var dx=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(i=>i&&i.checked&&!i.disabled).map(i=>i.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ut(t[0].attributes.value)?ut(t[0].value)||t[0].value===""?nh:{value:t[0].value,isValid:!0}:nh:th}return th},hx=(t,{valueAsNumber:e,valueAsDate:i,setValueAs:s})=>ut(t)?t:e?t===""?NaN:t&&+t:i&&fn(t)?new Date(t):s?s(t):t;const ih={isValid:!1,value:null};var fx=t=>Array.isArray(t)?t.reduce((e,i)=>i&&i.checked&&!i.disabled?{isValid:!0,value:i.value}:e,ih):ih;function sh(t){const e=t.ref;return sc(e)?e.files:rc(e)?fx(t.refs).value:lx(e)?[...e.selectedOptions].map(({value:i})=>i):Js(e)?dx(t.refs).value:hx(ut(e.value)?t.ref.value:e.value,t)}var YC=(t,e,i,s)=>{const a={};for(const o of t){const u=ee(e,o);u&&Ze(a,o,u._f)}return{criteriaMode:i,names:[...t],fields:a,shouldUseNativeValidation:s}},Qr=t=>t instanceof RegExp,hs=t=>ut(t)?t:Qr(t)?t.source:rt(t)?Qr(t.value)?t.value.source:t.value:t,rh=t=>({isOnSubmit:!t||t===en.onSubmit,isOnBlur:t===en.onBlur,isOnChange:t===en.onChange,isOnAll:t===en.all,isOnTouch:t===en.onTouched});const ah="AsyncFunction";var QC=t=>!!t&&!!t.validate&&!!(tn(t.validate)&&t.validate.constructor.name===ah||rt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===ah)),JC=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),oh=(t,e,i)=>!i&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const Ns=(t,e,i,s)=>{for(const a of i||Object.keys(t)){const o=ee(t,a);if(o){const{_f:u,...d}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],a)&&!s)return!0;if(u.ref&&e(u.ref,u.name)&&!s)return!0;if(Ns(d,e))break}else if(rt(d)&&Ns(d,e))break}}};function lh(t,e,i){const s=ee(t,i);if(s||Na(i))return{error:s,name:i};const a=i.split(".");for(;a.length;){const o=a.join("."),u=ee(e,o),d=ee(t,o);if(u&&!Array.isArray(u)&&i!==o)return{name:i};if(d&&d.type)return{name:o,error:d};if(d&&d.root&&d.root.type)return{name:`${o}.root`,error:d.root};a.pop()}return{name:i}}var ek=(t,e,i,s)=>{i(t);const{name:a,...o}=t;return At(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!s||en.all))},tk=(t,e,i)=>!t||!e||t===e||Ps(t).some(s=>s&&(i?s===e:s.startsWith(e)||e.startsWith(s))),nk=(t,e,i,s,a)=>a.isOnAll?!1:!i&&a.isOnTouch?!(e||t):(i?s.isOnBlur:a.isOnBlur)?!t:(i?s.isOnChange:a.isOnChange)?t:!0,ik=(t,e)=>!nc(ee(t,e)).length&&ct(t,e),sk=(t,e,i)=>{const s=Ps(ee(t,i));return Ze(s,"root",e[i]),Ze(t,i,s),t},Br=t=>fn(t);function ch(t,e,i="validate"){if(Br(t)||Array.isArray(t)&&t.every(Br)||dn(t)&&!t)return{type:i,message:Br(t)?t:"",ref:e}}var Ci=t=>rt(t)&&!Qr(t)?t:{value:t,message:""},uh=async(t,e,i,s,a,o)=>{const{ref:u,refs:d,required:f,maxLength:p,minLength:g,min:y,max:x,pattern:b,validate:P,name:T,valueAsNumber:A,mount:D}=t._f,j=ee(i,T);if(!D||e.has(T))return{};const R=d?d[0]:u,$=H=>{a&&R.reportValidity&&(R.setCustomValidity(dn(H)?"":H||""),R.reportValidity())},O={},X=rc(u),oe=Js(u),se=X||oe,pe=(A||sc(u))&&ut(u.value)&&ut(j)||Xr(u)&&u.value===""||j===""||Array.isArray(j)&&!j.length,ge=ox.bind(null,T,s,O),z=(H,re,Z,Oe=Cn.maxLength,Te=Cn.minLength)=>{const ye=H?re:Z;O[T]={type:H?Oe:Te,message:ye,ref:u,...ge(H?Oe:Te,ye)}};if(o?!Array.isArray(j)||!j.length:f&&(!se&&(pe||Pt(j))||dn(j)&&!j||oe&&!dx(d).isValid||X&&!fx(d).isValid)){const{value:H,message:re}=Br(f)?{value:!!f,message:f}:Ci(f);if(H&&(O[T]={type:Cn.required,message:re,ref:R,...ge(Cn.required,re)},!s))return $(re),O}if(!pe&&(!Pt(y)||!Pt(x))){let H,re;const Z=Ci(x),Oe=Ci(y);if(!Pt(j)&&!isNaN(j)){const Te=u.valueAsNumber||j&&+j;Pt(Z.value)||(H=Te>Z.value),Pt(Oe.value)||(re=Te<Oe.value)}else{const Te=u.valueAsDate||new Date(j),ye=ne=>new Date(new Date().toDateString()+" "+ne),Y=u.type=="time",at=u.type=="week";fn(Z.value)&&j&&(H=Y?ye(j)>ye(Z.value):at?j>Z.value:Te>new Date(Z.value)),fn(Oe.value)&&j&&(re=Y?ye(j)<ye(Oe.value):at?j<Oe.value:Te<new Date(Oe.value))}if((H||re)&&(z(!!H,Z.message,Oe.message,Cn.max,Cn.min),!s))return $(O[T].message),O}if((p||g)&&!pe&&(fn(j)||o&&Array.isArray(j))){const H=Ci(p),re=Ci(g),Z=!Pt(H.value)&&j.length>+H.value,Oe=!Pt(re.value)&&j.length<+re.value;if((Z||Oe)&&(z(Z,H.message,re.message),!s))return $(O[T].message),O}if(b&&!pe&&fn(j)){const{value:H,message:re}=Ci(b);if(Qr(H)&&!j.match(H)&&(O[T]={type:Cn.pattern,message:re,ref:u,...ge(Cn.pattern,re)},!s))return $(re),O}if(P){if(tn(P)){const H=await P(j,i),re=ch(H,R);if(re&&(O[T]={...re,...ge(Cn.validate,re.message)},!s))return $(re.message),O}else if(rt(P)){let H={};for(const re in P){if(!At(H)&&!s)break;const Z=ch(await P[re](j,i),R,re);Z&&(H={...Z,...ge(re,Z.message)},$(Z.message),s&&(O[T]=H))}if(!At(H)&&(O[T]={ref:R,...H},!s))return O}}return $(!0),O};const rk={mode:en.onSubmit,reValidateMode:en.onChange,shouldFocusError:!0};function ak(t={}){let e={...rk,...t},i={submitCount:0,isDirty:!1,isReady:!1,isLoading:tn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},a=rt(e.defaultValues)||rt(e.values)?ft(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:ft(a),u={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...g};const x={array:eh(),state:eh()},b=e.criteriaMode===en.all,P=S=>k=>{clearTimeout(p),p=setTimeout(S,k)},T=async S=>{if(!e.disabled&&(g.isValid||y.isValid||S)){const k=e.resolver?At((await oe()).errors):await pe(s,!0);k!==i.isValid&&x.state.next({isValid:k})}},A=(S,k)=>{!e.disabled&&(g.isValidating||g.validatingFields||y.isValidating||y.validatingFields)&&((S||Array.from(d.mount)).forEach(I=>{I&&(k?Ze(i.validatingFields,I,k):ct(i.validatingFields,I))}),x.state.next({validatingFields:i.validatingFields,isValidating:!At(i.validatingFields)}))},D=(S,k=[],I,K,q=!0,E=!0)=>{if(K&&I&&!e.disabled){if(u.action=!0,E&&Array.isArray(ee(s,S))){const B=I(ee(s,S),K.argA,K.argB);q&&Ze(s,S,B)}if(E&&Array.isArray(ee(i.errors,S))){const B=I(ee(i.errors,S),K.argA,K.argB);q&&Ze(i.errors,S,B),ik(i.errors,S)}if((g.touchedFields||y.touchedFields)&&E&&Array.isArray(ee(i.touchedFields,S))){const B=I(ee(i.touchedFields,S),K.argA,K.argB);q&&Ze(i.touchedFields,S,B)}(g.dirtyFields||y.dirtyFields)&&(i.dirtyFields=ds(a,o)),x.state.next({name:S,isDirty:z(S,k),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else Ze(o,S,k)},j=(S,k)=>{Ze(i.errors,S,k),x.state.next({errors:i.errors})},R=S=>{i.errors=S,x.state.next({errors:i.errors,isValid:!1})},$=(S,k,I,K)=>{const q=ee(s,S);if(q){const E=ee(o,S,ut(I)?ee(a,S):I);ut(E)||K&&K.defaultChecked||k?Ze(o,S,k?E:sh(q._f)):Z(S,E),u.mount&&T()}},O=(S,k,I,K,q)=>{let E=!1,B=!1;const te={name:S};if(!e.disabled){if(!I||K){(g.isDirty||y.isDirty)&&(B=i.isDirty,i.isDirty=te.isDirty=z(),E=B!==te.isDirty);const me=Bn(ee(a,S),k);B=!!ee(i.dirtyFields,S),me?ct(i.dirtyFields,S):Ze(i.dirtyFields,S,!0),te.dirtyFields=i.dirtyFields,E=E||(g.dirtyFields||y.dirtyFields)&&B!==!me}if(I){const me=ee(i.touchedFields,S);me||(Ze(i.touchedFields,S,I),te.touchedFields=i.touchedFields,E=E||(g.touchedFields||y.touchedFields)&&me!==I)}E&&q&&x.state.next(te)}return E?te:{}},X=(S,k,I,K)=>{const q=ee(i.errors,S),E=(g.isValid||y.isValid)&&dn(k)&&i.isValid!==k;if(e.delayError&&I?(f=P(()=>j(S,I)),f(e.delayError)):(clearTimeout(p),f=null,I?Ze(i.errors,S,I):ct(i.errors,S)),(I?!Bn(q,I):q)||!At(K)||E){const B={...K,...E&&dn(k)?{isValid:k}:{},errors:i.errors,name:S};i={...i,...B},x.state.next(B)}},oe=async S=>{A(S,!0);const k=await e.resolver(o,e.context,YC(S||d.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return A(S),k},se=async S=>{const{errors:k}=await oe(S);if(S)for(const I of S){const K=ee(k,I);K?Ze(i.errors,I,K):ct(i.errors,I)}else i.errors=k;return k},pe=async(S,k,I={valid:!0})=>{for(const K in S){const q=S[K];if(q){const{_f:E,...B}=q;if(E){const te=d.array.has(E.name),me=q._f&&QC(q._f);me&&g.validatingFields&&A([K],!0);const le=await uh(q,d.disabled,o,b,e.shouldUseNativeValidation&&!k,te);if(me&&g.validatingFields&&A([K]),le[E.name]&&(I.valid=!1,k))break;!k&&(ee(le,E.name)?te?sk(i.errors,le,E.name):Ze(i.errors,E.name,le[E.name]):ct(i.errors,E.name))}!At(B)&&await pe(B,k,I)}}return I.valid},ge=()=>{for(const S of d.unMount){const k=ee(s,S);k&&(k._f.refs?k._f.refs.every(I=>!Ao(I)):!Ao(k._f.ref))&&Ne(S)}d.unMount=new Set},z=(S,k)=>!e.disabled&&(S&&k&&Ze(o,S,k),!Bn(ne(),a)),H=(S,k,I)=>qC(S,d,{...u.mount?o:ut(k)?a:fn(S)?{[S]:k}:k},I,k),re=S=>nc(ee(u.mount?o:a,S,e.shouldUnregister?ee(a,S,[]):[])),Z=(S,k,I={})=>{const K=ee(s,S);let q=k;if(K){const E=K._f;E&&(!E.disabled&&Ze(o,S,hx(k,E)),q=Xr(E.ref)&&Pt(k)?"":k,lx(E.ref)?[...E.ref.options].forEach(B=>B.selected=q.includes(B.value)):E.refs?Js(E.ref)?E.refs.forEach(B=>{(!B.defaultChecked||!B.disabled)&&(Array.isArray(q)?B.checked=!!q.find(te=>te===B.value):B.checked=q===B.value||!!q)}):E.refs.forEach(B=>B.checked=B.value===q):sc(E.ref)?E.ref.value="":(E.ref.value=q,E.ref.type||x.state.next({name:S,values:ft(o)})))}(I.shouldDirty||I.shouldTouch)&&O(S,q,I.shouldTouch,I.shouldDirty,!0),I.shouldValidate&&at(S)},Oe=(S,k,I)=>{for(const K in k){if(!k.hasOwnProperty(K))return;const q=k[K],E=S+"."+K,B=ee(s,E);(d.array.has(S)||rt(q)||B&&!B._f)&&!oi(q)?Oe(E,q,I):Z(E,q,I)}},Te=(S,k,I={})=>{const K=ee(s,S),q=d.array.has(S),E=ft(k);Ze(o,S,E),q?(x.array.next({name:S,values:ft(o)}),(g.isDirty||g.dirtyFields||y.isDirty||y.dirtyFields)&&I.shouldDirty&&x.state.next({name:S,dirtyFields:ds(a,o),isDirty:z(S,E)})):K&&!K._f&&!Pt(E)?Oe(S,E,I):Z(S,E,I),oh(S,d)&&x.state.next({...i,name:S}),x.state.next({name:u.mount?S:void 0,values:ft(o)})},ye=async S=>{u.mount=!0;const k=S.target;let I=k.name,K=!0;const q=ee(s,I),E=me=>{K=Number.isNaN(me)||oi(me)&&isNaN(me.getTime())||Bn(me,ee(o,I,me))},B=rh(e.mode),te=rh(e.reValidateMode);if(q){let me,le;const we=k.type?sh(q._f):FC(S),ze=S.type===Jd.BLUR||S.type===Jd.FOCUS_OUT,wn=!JC(q._f)&&!e.resolver&&!ee(i.errors,I)&&!q._f.deps||nk(ze,ee(i.touchedFields,I),i.isSubmitted,te,B),Gt=oh(I,d,ze);Ze(o,I,we),ze?(q._f.onBlur&&q._f.onBlur(S),f&&f(0)):q._f.onChange&&q._f.onChange(S);const Xt=O(I,we,ze),ir=!At(Xt)||Gt;if(!ze&&x.state.next({name:I,type:S.type,values:ft(o)}),wn)return(g.isValid||y.isValid)&&(e.mode==="onBlur"?ze&&T():ze||T()),ir&&x.state.next({name:I,...Gt?{}:Xt});if(!ze&&Gt&&x.state.next({...i}),e.resolver){const{errors:sr}=await oe([I]);if(E(we),K){const Xn=lh(i.errors,s,I),rr=lh(sr,s,Xn.name||I);me=rr.error,I=rr.name,le=At(sr)}}else A([I],!0),me=(await uh(q,d.disabled,o,b,e.shouldUseNativeValidation))[I],A([I]),E(we),K&&(me?le=!1:(g.isValid||y.isValid)&&(le=await pe(s,!0)));K&&(q._f.deps&&at(q._f.deps),X(I,le,me,Xt))}},Y=(S,k)=>{if(ee(i.errors,k)&&S.focus)return S.focus(),1},at=async(S,k={})=>{let I,K;const q=Ps(S);if(e.resolver){const E=await se(ut(S)?S:q);I=At(E),K=S?!q.some(B=>ee(E,B)):I}else S?(K=(await Promise.all(q.map(async E=>{const B=ee(s,E);return await pe(B&&B._f?{[E]:B}:B)}))).every(Boolean),!(!K&&!i.isValid)&&T()):K=I=await pe(s);return x.state.next({...!fn(S)||(g.isValid||y.isValid)&&I!==i.isValid?{}:{name:S},...e.resolver||!S?{isValid:I}:{},errors:i.errors}),k.shouldFocus&&!K&&Ns(s,Y,S?q:d.mount),K},ne=S=>{const k={...u.mount?o:a};return ut(S)?k:fn(S)?ee(k,S):S.map(I=>ee(k,I))},Re=(S,k)=>({invalid:!!ee((k||i).errors,S),isDirty:!!ee((k||i).dirtyFields,S),error:ee((k||i).errors,S),isValidating:!!ee(i.validatingFields,S),isTouched:!!ee((k||i).touchedFields,S)}),We=S=>{S&&Ps(S).forEach(k=>ct(i.errors,k)),x.state.next({errors:S?i.errors:{}})},He=(S,k,I)=>{const K=(ee(s,S,{_f:{}})._f||{}).ref,q=ee(i.errors,S)||{},{ref:E,message:B,type:te,...me}=q;Ze(i.errors,S,{...me,...k,ref:K}),x.state.next({name:S,errors:i.errors,isValid:!1}),I&&I.shouldFocus&&K&&K.focus&&K.focus()},Ve=(S,k)=>tn(S)?x.state.subscribe({next:I=>"values"in I&&S(H(void 0,k),I)}):H(S,k,!0),ke=S=>x.state.subscribe({next:k=>{tk(S.name,k.name,S.exact)&&ek(k,S.formState||g,Et,S.reRenderRoot)&&S.callback({values:{...o},...i,...k,defaultValues:a})}}).unsubscribe,U=S=>(u.mount=!0,y={...y,...S.formState},ke({...S,formState:y})),Ne=(S,k={})=>{for(const I of S?Ps(S):d.mount)d.mount.delete(I),d.array.delete(I),k.keepValue||(ct(s,I),ct(o,I)),!k.keepError&&ct(i.errors,I),!k.keepDirty&&ct(i.dirtyFields,I),!k.keepTouched&&ct(i.touchedFields,I),!k.keepIsValidating&&ct(i.validatingFields,I),!e.shouldUnregister&&!k.keepDefaultValue&&ct(a,I);x.state.next({values:ft(o)}),x.state.next({...i,...k.keepDirty?{isDirty:z()}:{}}),!k.keepIsValid&&T()},Fe=({disabled:S,name:k})=>{(dn(S)&&u.mount||S||d.disabled.has(k))&&(S?d.disabled.add(k):d.disabled.delete(k))},Be=(S,k={})=>{let I=ee(s,S);const K=dn(k.disabled)||dn(e.disabled);return Ze(s,S,{...I||{},_f:{...I&&I._f?I._f:{ref:{name:S}},name:S,mount:!0,...k}}),d.mount.add(S),I?Fe({disabled:dn(k.disabled)?k.disabled:e.disabled,name:S}):$(S,!0,k.value),{...K?{disabled:k.disabled||e.disabled}:{},...e.progressive?{required:!!k.required,min:hs(k.min),max:hs(k.max),minLength:hs(k.minLength),maxLength:hs(k.maxLength),pattern:hs(k.pattern)}:{},name:S,onChange:ye,onBlur:ye,ref:q=>{if(q){Be(S,k),I=ee(s,S);const E=ut(q.value)&&q.querySelectorAll&&q.querySelectorAll("input,select,textarea")[0]||q,B=KC(E),te=I._f.refs||[];if(B?te.find(me=>me===E):E===I._f.ref)return;Ze(s,S,{_f:{...I._f,...B?{refs:[...te.filter(Ao),E,...Array.isArray(ee(a,S))?[{}]:[]],ref:{type:E.type,name:S}}:{ref:E}}}),$(S,!1,void 0,E)}else I=ee(s,S,{}),I._f&&(I._f.mount=!1),(e.shouldUnregister||k.shouldUnregister)&&!(ZC(d.array,S)&&u.action)&&d.unMount.add(S)}}},qe=()=>e.shouldFocusError&&Ns(s,Y,d.mount),tt=S=>{dn(S)&&(x.state.next({disabled:S}),Ns(s,(k,I)=>{const K=ee(s,I);K&&(k.disabled=K._f.disabled||S,Array.isArray(K._f.refs)&&K._f.refs.forEach(q=>{q.disabled=K._f.disabled||S}))},0,!1))},vt=(S,k)=>async I=>{let K;I&&(I.preventDefault&&I.preventDefault(),I.persist&&I.persist());let q=ft(o);if(x.state.next({isSubmitting:!0}),e.resolver){const{errors:E,values:B}=await oe();i.errors=E,q=ft(B)}else await pe(s);if(d.disabled.size)for(const E of d.disabled)ct(q,E);if(ct(i.errors,"root"),At(i.errors)){x.state.next({errors:{}});try{await S(q,I)}catch(E){K=E}}else k&&await k({...i.errors},I),qe(),setTimeout(qe);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:At(i.errors)&&!K,submitCount:i.submitCount+1,errors:i.errors}),K)throw K},jt=(S,k={})=>{ee(s,S)&&(ut(k.defaultValue)?Te(S,ft(ee(a,S))):(Te(S,k.defaultValue),Ze(a,S,ft(k.defaultValue))),k.keepTouched||ct(i.touchedFields,S),k.keepDirty||(ct(i.dirtyFields,S),i.isDirty=k.defaultValue?z(S,ft(ee(a,S))):z()),k.keepError||(ct(i.errors,S),g.isValid&&T()),x.state.next({...i}))},Vt=(S,k={})=>{const I=S?ft(S):a,K=ft(I),q=At(S),E=q?a:K;if(k.keepDefaultValues||(a=I),!k.keepValues){if(k.keepDirtyValues){const B=new Set([...d.mount,...Object.keys(ds(a,o))]);for(const te of Array.from(B))ee(i.dirtyFields,te)?Ze(E,te,ee(o,te)):Te(te,ee(E,te))}else{if(tc&&ut(S))for(const B of d.mount){const te=ee(s,B);if(te&&te._f){const me=Array.isArray(te._f.refs)?te._f.refs[0]:te._f.ref;if(Xr(me)){const le=me.closest("form");if(le){le.reset();break}}}}if(k.keepFieldsRef)for(const B of d.mount)Te(B,ee(E,B));else s={}}o=e.shouldUnregister?k.keepDefaultValues?ft(a):{}:ft(E),x.array.next({values:{...E}}),x.state.next({values:{...E}})}d={mount:k.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!k.keepIsValid||!!k.keepDirtyValues,u.watch=!!e.shouldUnregister,x.state.next({submitCount:k.keepSubmitCount?i.submitCount:0,isDirty:q?!1:k.keepDirty?i.isDirty:!!(k.keepDefaultValues&&!Bn(S,a)),isSubmitted:k.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:q?{}:k.keepDirtyValues?k.keepDefaultValues&&o?ds(a,o):i.dirtyFields:k.keepDefaultValues&&S?ds(a,S):k.keepDirty?i.dirtyFields:{},touchedFields:k.keepTouched?i.touchedFields:{},errors:k.keepErrors?i.errors:{},isSubmitSuccessful:k.keepIsSubmitSuccessful?i.isSubmitSuccessful:!1,isSubmitting:!1})},Bt=(S,k)=>Vt(tn(S)?S(o):S,k),bn=(S,k={})=>{const I=ee(s,S),K=I&&I._f;if(K){const q=K.refs?K.refs[0]:K.ref;q.focus&&(q.focus(),k.shouldSelect&&tn(q.select)&&q.select())}},Et=S=>{i={...i,...S}},zt={control:{register:Be,unregister:Ne,getFieldState:Re,handleSubmit:vt,setError:He,_subscribe:ke,_runSchema:oe,_focusError:qe,_getWatch:H,_getDirty:z,_setValid:T,_setFieldArray:D,_setDisabledField:Fe,_setErrors:R,_getFieldArray:re,_reset:Vt,_resetDefaultValues:()=>tn(e.defaultValues)&&e.defaultValues().then(S=>{Bt(S,e.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:ge,_disableForm:tt,_subjects:x,_proxyFormState:g,get _fields(){return s},get _formValues(){return o},get _state(){return u},set _state(S){u=S},get _defaultValues(){return a},get _names(){return d},set _names(S){d=S},get _formState(){return i},get _options(){return e},set _options(S){e={...e,...S}}},subscribe:U,trigger:at,register:Be,handleSubmit:vt,watch:Ve,setValue:Te,getValues:ne,reset:Bt,resetField:jt,clearErrors:We,unregister:Ne,setError:He,setFocus:bn,getFieldState:Re};return{...zt,formControl:zt}}function mx(t={}){const e=xt.useRef(void 0),i=xt.useRef(void 0),[s,a]=xt.useState({isDirty:!1,isValidating:!1,isLoading:tn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:tn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:s},t.defaultValues&&!tn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...d}=ak(t);e.current={...d,formState:s}}const o=e.current.control;return o._options=t,HC(()=>{const u=o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),o._formState.isReady=!0,u},[o]),xt.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),xt.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),xt.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),xt.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),xt.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==s.isDirty&&o._subjects.state.next({isDirty:u})}},[o,s.isDirty]),xt.useEffect(()=>{t.values&&!Bn(t.values,i.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),i.current=t.values,a(u=>({...u}))):o._resetDefaultValues()},[o,t.values]),xt.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=WC(s,o),e.current}const dh=(t,e,i)=>{if(t&&"reportValidity"in t){const s=ee(i,e);t.setCustomValidity(s&&s.message||""),t.reportValidity()}},px=(t,e)=>{for(const i in e.fields){const s=e.fields[i];s&&s.ref&&"reportValidity"in s.ref?dh(s.ref,i,t):s.refs&&s.refs.forEach(a=>dh(a,i,t))}},ok=(t,e)=>{e.shouldUseNativeValidation&&px(t,e);const i={};for(const s in t){const a=ee(e.fields,s),o=Object.assign(t[s]||{},{ref:a&&a.ref});if(lk(e.names||Object.keys(t),s)){const u=Object.assign({},ee(i,s));Ze(u,"root",o),Ze(i,s,u)}else Ze(i,s,o)}return i},lk=(t,e)=>t.some(i=>i.startsWith(e+"."));var ck=function(t,e){for(var i={};t.length;){var s=t[0],a=s.code,o=s.message,u=s.path.join(".");if(!i[u])if("unionErrors"in s){var d=s.unionErrors[0].errors[0];i[u]={message:d.message,type:d.code}}else i[u]={message:o,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(g){return g.errors.forEach(function(y){return t.push(y)})}),e){var f=i[u].types,p=f&&f[s.code];i[u]=ox(u,e,i,a,p?[].concat(p,s.message):s.message)}t.shift()}return i},gx=function(t,e,i){return i===void 0&&(i={}),function(s,a,o){try{return Promise.resolve(function(u,d){try{var f=Promise.resolve(t[i.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(p){return o.shouldUseNativeValidation&&px({},o),{errors:{},values:i.raw?s:p}})}catch(p){return d(p)}return f&&f.then?f.then(void 0,d):f}(0,function(u){if(function(d){return Array.isArray(d==null?void 0:d.errors)}(u))return{values:{},errors:ok(ck(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}}};const F=Symbol.for("drizzle:entityKind");function gt(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,F))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let i=Object.getPrototypeOf(t).constructor;if(i)for(;i;){if(F in i&&i[F]===e[F])return!0;i=Object.getPrototypeOf(i)}return!1}var Ch;Ch=F;class $i{constructor(e,i){N(this,"name");N(this,"keyAsName");N(this,"primary");N(this,"notNull");N(this,"default");N(this,"defaultFn");N(this,"onUpdateFn");N(this,"hasDefault");N(this,"isUnique");N(this,"uniqueName");N(this,"uniqueType");N(this,"dataType");N(this,"columnType");N(this,"enumValues");N(this,"generated");N(this,"generatedIdentity");N(this,"config");this.table=e,this.config=i,this.name=i.name,this.keyAsName=i.keyAsName,this.notNull=i.notNull,this.default=i.default,this.defaultFn=i.defaultFn,this.onUpdateFn=i.onUpdateFn,this.hasDefault=i.hasDefault,this.primary=i.primaryKey,this.isUnique=i.isUnique,this.uniqueName=i.uniqueName,this.uniqueType=i.uniqueType,this.dataType=i.dataType,this.columnType=i.columnType,this.generated=i.generated,this.generatedIdentity=i.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}N($i,Ch,"Column");var kh;kh=F;class yx{constructor(e,i,s){N(this,"config");N(this,"$default",this.$defaultFn);N(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:i,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}N(yx,kh,"ColumnBuilder");const Oi=Symbol.for("drizzle:Name");var Ah;Ah=F;class vx{constructor(e,i){N(this,"reference");N(this,"_onUpdate","no action");N(this,"_onDelete","no action");this.reference=()=>{const{name:s,columns:a,foreignColumns:o}=e();return{name:s,columns:a,foreignTable:o[0].table,foreignColumns:o}},i&&(this._onUpdate=i.onUpdate,this._onDelete=i.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new xx(e,this)}}N(vx,Ah,"PgForeignKeyBuilder");var Lh;Lh=F;class xx{constructor(e,i){N(this,"reference");N(this,"onUpdate");N(this,"onDelete");this.table=e,this.reference=i.reference,this.onUpdate=i._onUpdate,this.onDelete=i._onDelete}getName(){const{name:e,columns:i,foreignColumns:s}=this.reference(),a=i.map(d=>d.name),o=s.map(d=>d.name),u=[this.table[Oi],...a,s[0].table[Oi],...o];return e??`${u.join("_")}_fk`}}N(xx,Lh,"PgForeignKey");function uk(t,...e){return t(...e)}function dk(t,e){return`${t[Oi]}_${e.join("_")}_unique`}function hh(t,e,i){for(let s=e;s<t.length;s++){const a=t[s];if(a==="\\"){s++;continue}if(a==='"')return[t.slice(e,s).replace(/\\/g,""),s+1];if(!i&&(a===","||a==="}"))return[t.slice(e,s).replace(/\\/g,""),s]}return[t.slice(e).replace(/\\/g,""),t.length]}function _x(t,e=0){const i=[];let s=e,a=!1;for(;s<t.length;){const o=t[s];if(o===","){(a||s===e)&&i.push(""),a=!0,s++;continue}if(a=!1,o==="\\"){s+=2;continue}if(o==='"'){const[f,p]=hh(t,s+1,!0);i.push(f),s=p;continue}if(o==="}")return[i,s+1];if(o==="{"){const[f,p]=_x(t,s+1);i.push(f),s=p;continue}const[u,d]=hh(t,s,!1);i.push(u),s=d}return[i,s]}function hk(t){const[e]=_x(t,1);return e}function bx(t){return`{${t.map(e=>Array.isArray(e)?bx(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Eh,Mh;class Ee extends(Mh=yx,Eh=F,Mh){constructor(){super(...arguments);N(this,"foreignKeyConfigs",[])}array(i){return new Tx(this.config.name,this,i)}references(i,s={}){return this.foreignKeyConfigs.push({ref:i,actions:s}),this}unique(i,s){return this.config.isUnique=!0,this.config.uniqueName=i,this.config.uniqueType=s==null?void 0:s.nulls,this}generatedAlwaysAs(i){return this.config.generated={as:i,type:"always",mode:"stored"},this}buildForeignKeys(i,s){return this.foreignKeyConfigs.map(({ref:a,actions:o})=>uk((u,d)=>{const f=new vx(()=>{const p=u();return{columns:[i],foreignColumns:[p]}});return d.onUpdate&&f.onUpdate(d.onUpdate),d.onDelete&&f.onDelete(d.onDelete),f.build(s)},a,o))}buildExtraConfigColumn(i){return new wx(i,this.config)}}N(Ee,Eh,"PgColumnBuilder");var Dh,Rh;class be extends(Rh=$i,Dh=F,Rh){constructor(e,i){i.uniqueName||(i.uniqueName=dk(e,[i.name])),super(e,i),this.table=e}}N(be,Dh,"PgColumn");var Ih,Oh;class wx extends(Oh=be,Ih=F,Oh){constructor(){super(...arguments);N(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});N(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(i){return this.indexConfig.opClass=i,this}}N(wx,Ih,"ExtraConfigColumn");var Vh,Bh;class Tx extends(Bh=Ee,Vh=F,Bh){constructor(e,i,s){super(e,"array","PgArray"),this.config.baseBuilder=i,this.config.size=s}build(e){const i=this.config.baseBuilder.build(e);return new nl(e,this.config,i)}}N(Tx,Vh,"PgArrayBuilder");var Fh,zh;const ha=class ha extends(zh=be,Fh=F,zh){constructor(i,s,a,o){super(i,s);N(this,"size");this.baseColumn=a,this.range=o,this.size=s.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(i){return typeof i=="string"&&(i=hk(i)),i.map(s=>this.baseColumn.mapFromDriverValue(s))}mapToDriverValue(i,s=!1){const a=i.map(o=>o===null?null:gt(this.baseColumn,ha)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return s?a:bx(a)}};N(ha,Fh,"PgArray");let nl=ha;const fh=Symbol.for("drizzle:isPgEnum");function fk(t){return!!t&&typeof t=="function"&&fh in t&&t[fh]===!0}var Zh;Zh=F;class ac{constructor(e,i,s,a=!1){this._={brand:"Subquery",sql:e,selectedFields:i,alias:s,isWith:a}}}N(ac,Zh,"Subquery");const mk={startActiveSpan(t,e){return e()}},Vi=Symbol.for("drizzle:ViewBaseConfig"),Lo=Symbol.for("drizzle:Schema"),mh=Symbol.for("drizzle:Columns"),ph=Symbol.for("drizzle:ExtraConfigColumns"),Eo=Symbol.for("drizzle:OriginalName"),Mo=Symbol.for("drizzle:BaseName"),Jr=Symbol.for("drizzle:IsAlias"),gh=Symbol.for("drizzle:ExtraConfigBuilder"),Sx=Symbol.for("drizzle:IsDrizzleTable");var Uh,$h,Wh,Hh,qh,Kh,Gh,Xh,Yh,Qh,Ar;let Mt=(Qh=F,Yh=Oi,Xh=Eo,Gh=Lo,Kh=mh,qh=ph,Hh=Mo,Wh=Jr,$h=Sx,Uh=gh,Ar=class{constructor(e,i,s){N(this,Yh);N(this,Xh);N(this,Gh);N(this,Kh);N(this,qh);N(this,Hh);N(this,Wh,!1);N(this,$h,!0);N(this,Uh);this[Oi]=this[Eo]=e,this[Lo]=i,this[Mo]=s}},N(Ar,Qh,"Table"),N(Ar,"Symbol",{Name:Oi,Schema:Lo,OriginalName:Eo,Columns:mh,ExtraConfigColumns:ph,BaseName:Mo,IsAlias:Jr,ExtraConfigBuilder:gh}),Ar);function Px(t){return typeof t=="object"&&t!==null&&Sx in t}function pk(t){return t!=null&&typeof t.getSQL=="function"}function gk(t){var i;const e={sql:"",params:[]};for(const s of t)e.sql+=s.sql,e.params.push(...s.params),(i=s.typings)!=null&&i.length&&(e.typings||(e.typings=[]),e.typings.push(...s.typings));return e}var Jh;Jh=F;class qt{constructor(e){N(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new dt([this])}}N(qt,Jh,"StringChunk");var ef;ef=F;const ri=class ri{constructor(e){N(this,"decoder",Nx);N(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return mk.startActiveSpan("drizzle.buildSQL",i=>{const s=this.buildQueryFromSourceParams(this.queryChunks,e);return i==null||i.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(e,i){const s=Object.assign({},i,{inlineParams:i.inlineParams||this.shouldInlineParams,paramStartIndex:i.paramStartIndex||{value:0}}),{casing:a,escapeName:o,escapeParam:u,prepareTyping:d,inlineParams:f,paramStartIndex:p}=s;return gk(e.map(g=>{var y;if(gt(g,qt))return{sql:g.value.join(""),params:[]};if(gt(g,ea))return{sql:o(g.value),params:[]};if(g===void 0)return{sql:"",params:[]};if(Array.isArray(g)){const x=[new qt("(")];for(const[b,P]of g.entries())x.push(P),b<g.length-1&&x.push(new qt(", "));return x.push(new qt(")")),this.buildQueryFromSourceParams(x,s)}if(gt(g,ri))return this.buildQueryFromSourceParams(g.queryChunks,{...s,inlineParams:f||g.shouldInlineParams});if(gt(g,Mt)){const x=g[Mt.Symbol.Schema],b=g[Mt.Symbol.Name];return{sql:x===void 0||g[Jr]?o(b):o(x)+"."+o(b),params:[]}}if(gt(g,$i)){const x=a.getColumnCasing(g);if(i.invokeSource==="indexes")return{sql:o(x),params:[]};const b=g.table[Mt.Symbol.Schema];return{sql:g.table[Jr]||b===void 0?o(g.table[Mt.Symbol.Name])+"."+o(x):o(b)+"."+o(g.table[Mt.Symbol.Name])+"."+o(x),params:[]}}if(gt(g,kx)){const x=g[Vi].schema,b=g[Vi].name;return{sql:x===void 0||g[Vi].isAlias?o(b):o(x)+"."+o(b),params:[]}}if(gt(g,oc)){if(gt(g.value,ta))return{sql:u(p.value++,g),params:[g],typings:["none"]};const x=g.value===null?null:g.encoder.mapToDriverValue(g.value);if(gt(x,ri))return this.buildQueryFromSourceParams([x],s);if(f)return{sql:this.mapInlineParam(x,s),params:[]};let b=["none"];return d&&(b=[d(g.encoder)]),{sql:u(p.value++,x),params:[x],typings:b}}return gt(g,ta)?{sql:u(p.value++,g),params:[g],typings:["none"]}:gt(g,ri.Aliased)&&g.fieldAlias!==void 0?{sql:o(g.fieldAlias),params:[]}:gt(g,ac)?g._.isWith?{sql:o(g._.alias),params:[]}:this.buildQueryFromSourceParams([new qt("("),g._.sql,new qt(") "),new ea(g._.alias)],s):fk(g)?g.schema?{sql:o(g.schema)+"."+o(g.enumName),params:[]}:{sql:o(g.enumName),params:[]}:pk(g)?(y=g.shouldOmitSQLParens)!=null&&y.call(g)?this.buildQueryFromSourceParams([g.getSQL()],s):this.buildQueryFromSourceParams([new qt("("),g.getSQL(),new qt(")")],s):f?{sql:this.mapInlineParam(g,s),params:[]}:{sql:u(p.value++,g),params:[g],typings:["none"]}}))}mapInlineParam(e,{escapeString:i}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return i(e);if(typeof e=="object"){const s=e.toString();return i(s==="[object Object]"?JSON.stringify(e):s)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new ri.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};N(ri,ef,"SQL");let dt=ri;var tf;tf=F;class ea{constructor(e){N(this,"brand");this.value=e}getSQL(){return new dt([this])}}N(ea,tf,"Name");const Nx={mapFromDriverValue:t=>t},jx={mapToDriverValue:t=>t};({...Nx,...jx});var nf;nf=F;class oc{constructor(e,i=jx){N(this,"brand");this.value=e,this.encoder=i}getSQL(){return new dt([this])}}N(oc,nf,"Param");function hi(t,...e){const i=[];(e.length>0||t.length>0&&t[0]!=="")&&i.push(new qt(t[0]));for(const[s,a]of e.entries())i.push(a,new qt(t[s+1]));return new dt(i)}(t=>{function e(){return new dt([])}t.empty=e;function i(f){return new dt(f)}t.fromList=i;function s(f){return new dt([new qt(f)])}t.raw=s;function a(f,p){const g=[];for(const[y,x]of f.entries())y>0&&p!==void 0&&g.push(p),g.push(x);return new dt(g)}t.join=a;function o(f){return new ea(f)}t.identifier=o;function u(f){return new ta(f)}t.placeholder=u;function d(f,p){return new oc(f,p)}t.param=d})(hi||(hi={}));(t=>{var i;i=F;const s=class s{constructor(o,u){N(this,"isSelectionField",!1);this.sql=o,this.fieldAlias=u}getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}};N(s,i,"SQL.Aliased");let e=s;t.Aliased=e})(dt||(dt={}));var sf;sf=F;class ta{constructor(e){this.name=e}getSQL(){return new dt([this])}}N(ta,sf,"Placeholder");const Cx=Symbol.for("drizzle:IsDrizzleView");var rf,af,of;of=F,af=Vi,rf=Cx;class kx{constructor({name:e,schema:i,selectedFields:s,query:a}){N(this,af);N(this,rf,!0);this[Vi]={name:e,originalName:e,schema:i,selectedFields:s,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new dt([this])}}N(kx,of,"View");function yk(t){return typeof t=="object"&&t!==null&&Cx in t}$i.prototype.getSQL=function(){return new dt([this])};Mt.prototype.getSQL=function(){return new dt([this])};ac.prototype.getSQL=function(){return new dt([this])};function vk(t){return t[Mt.Symbol.Columns]}function xk(t){return t[Vi].selectedFields}function mt(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var lf,cf;class er extends(cf=Ee,lf=F,cf){generatedAlwaysAsIdentity(e){if(e){const{name:i,...s}=e;this.config.generatedIdentity={type:"always",sequenceName:i,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:i,...s}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:i,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}N(er,lf,"PgIntColumnBaseBuilder");var uf,df;class Ax extends(df=er,uf=F,df){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Lx(e,this.config)}}N(Ax,uf,"PgBigInt53Builder");var hf,ff;class Lx extends(ff=be,hf=F,ff){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}N(Lx,hf,"PgBigInt53");var mf,pf;class Ex extends(pf=er,mf=F,pf){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Mx(e,this.config)}}N(Ex,mf,"PgBigInt64Builder");var gf,yf;class Mx extends(yf=be,gf=F,yf){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}N(Mx,gf,"PgBigInt64");function _k(t,e){const{name:i,config:s}=mt(t,e);return s.mode==="number"?new Ax(i):new Ex(i)}var vf,xf;class Dx extends(xf=Ee,vf=F,xf){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Rx(e,this.config)}}N(Dx,vf,"PgBigSerial53Builder");var _f,bf;class Rx extends(bf=be,_f=F,bf){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}N(Rx,_f,"PgBigSerial53");var wf,Tf;class Ix extends(Tf=Ee,wf=F,Tf){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Ox(e,this.config)}}N(Ix,wf,"PgBigSerial64Builder");var Sf,Pf;class Ox extends(Pf=be,Sf=F,Pf){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}N(Ox,Sf,"PgBigSerial64");function bk(t,e){const{name:i,config:s}=mt(t,e);return s.mode==="number"?new Dx(i):new Ix(i)}var Nf,jf;class Vx extends(jf=Ee,Nf=F,jf){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Bx(e,this.config)}}N(Vx,Nf,"PgBooleanBuilder");var Cf,kf;class Bx extends(kf=be,Cf=F,kf){getSQLType(){return"boolean"}}N(Bx,Cf,"PgBoolean");function na(t){return new Vx(t??"")}var Af,Lf;class Fx extends(Lf=Ee,Af=F,Lf){constructor(e,i){super(e,"string","PgChar"),this.config.length=i.length,this.config.enumValues=i.enum}build(e){return new zx(e,this.config)}}N(Fx,Af,"PgCharBuilder");var Ef,Mf;class zx extends(Mf=be,Ef=F,Mf){constructor(){super(...arguments);N(this,"length",this.config.length);N(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}N(zx,Ef,"PgChar");function wk(t,e={}){const{name:i,config:s}=mt(t,e);return new Fx(i,s)}var Df,Rf;class Zx extends(Rf=Ee,Df=F,Rf){constructor(e){super(e,"string","PgCidr")}build(e){return new Ux(e,this.config)}}N(Zx,Df,"PgCidrBuilder");var If,Of;class Ux extends(Of=be,If=F,Of){getSQLType(){return"cidr"}}N(Ux,If,"PgCidr");function Tk(t){return new Zx(t??"")}var Vf,Bf;class $x extends(Bf=Ee,Vf=F,Bf){constructor(e,i,s){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=i,this.config.customTypeParams=s}build(e){return new Wx(e,this.config)}}N($x,Vf,"PgCustomColumnBuilder");var Ff,zf;class Wx extends(zf=be,Ff=F,zf){constructor(i,s){super(i,s);N(this,"sqlName");N(this,"mapTo");N(this,"mapFrom");this.sqlName=s.customTypeParams.dataType(s.fieldConfig),this.mapTo=s.customTypeParams.toDriver,this.mapFrom=s.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(i){return typeof this.mapFrom=="function"?this.mapFrom(i):i}mapToDriverValue(i){return typeof this.mapTo=="function"?this.mapTo(i):i}}N(Wx,Ff,"PgCustomColumn");function Sk(t){return(e,i)=>{const{name:s,config:a}=mt(e,i);return new $x(s,a,t)}}var Zf,Uf;class Xi extends(Uf=Ee,Zf=F,Uf){defaultNow(){return this.default(hi`now()`)}}N(Xi,Zf,"PgDateColumnBaseBuilder");var $f,Wf;class Hx extends(Wf=Xi,$f=F,Wf){constructor(e){super(e,"date","PgDate")}build(e){return new qx(e,this.config)}}N(Hx,$f,"PgDateBuilder");var Hf,qf;class qx extends(qf=be,Hf=F,qf){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}N(qx,Hf,"PgDate");var Kf,Gf;class Kx extends(Gf=Xi,Kf=F,Gf){constructor(e){super(e,"string","PgDateString")}build(e){return new Gx(e,this.config)}}N(Kx,Kf,"PgDateStringBuilder");var Xf,Yf;class Gx extends(Yf=be,Xf=F,Yf){getSQLType(){return"date"}}N(Gx,Xf,"PgDateString");function Pk(t,e){const{name:i,config:s}=mt(t,e);return(s==null?void 0:s.mode)==="date"?new Hx(i):new Kx(i)}var Qf,Jf;class Xx extends(Jf=Ee,Qf=F,Jf){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Yx(e,this.config)}}N(Xx,Qf,"PgDoublePrecisionBuilder");var em,tm;class Yx extends(tm=be,em=F,tm){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}N(Yx,em,"PgDoublePrecision");function Nk(t){return new Xx(t??"")}var nm,im;class Qx extends(im=Ee,nm=F,im){constructor(e){super(e,"string","PgInet")}build(e){return new Jx(e,this.config)}}N(Qx,nm,"PgInetBuilder");var sm,rm;class Jx extends(rm=be,sm=F,rm){getSQLType(){return"inet"}}N(Jx,sm,"PgInet");function jk(t){return new Qx(t??"")}var am,om;class e_ extends(om=er,am=F,om){constructor(e){super(e,"number","PgInteger")}build(e){return new t_(e,this.config)}}N(e_,am,"PgIntegerBuilder");var lm,cm;class t_ extends(cm=be,lm=F,cm){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}N(t_,lm,"PgInteger");function il(t){return new e_(t??"")}var um,dm;class n_ extends(dm=Ee,um=F,dm){constructor(e,i){super(e,"string","PgInterval"),this.config.intervalConfig=i}build(e){return new i_(e,this.config)}}N(n_,um,"PgIntervalBuilder");var hm,fm;class i_ extends(fm=be,hm=F,fm){constructor(){super(...arguments);N(this,"fields",this.config.intervalConfig.fields);N(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const i=this.fields?` ${this.fields}`:"",s=this.precision?`(${this.precision})`:"";return`interval${i}${s}`}}N(i_,hm,"PgInterval");function Ck(t,e={}){const{name:i,config:s}=mt(t,e);return new n_(i,s)}var mm,pm;class s_ extends(pm=Ee,mm=F,pm){constructor(e){super(e,"json","PgJson")}build(e){return new r_(e,this.config)}}N(s_,mm,"PgJsonBuilder");var gm,ym;class r_ extends(ym=be,gm=F,ym){constructor(e,i){super(e,i)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}N(r_,gm,"PgJson");function kk(t){return new s_(t??"")}var vm,xm;class a_ extends(xm=Ee,vm=F,xm){constructor(e){super(e,"json","PgJsonb")}build(e){return new o_(e,this.config)}}N(a_,vm,"PgJsonbBuilder");var _m,bm;class o_ extends(bm=be,_m=F,bm){constructor(e,i){super(e,i)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}N(o_,_m,"PgJsonb");function sl(t){return new a_(t??"")}var wm,Tm;class l_ extends(Tm=Ee,wm=F,Tm){constructor(e){super(e,"array","PgLine")}build(e){return new c_(e,this.config)}}N(l_,wm,"PgLineBuilder");var Sm,Pm;class c_ extends(Pm=be,Sm=F,Pm){getSQLType(){return"line"}mapFromDriverValue(e){const[i,s,a]=e.slice(1,-1).split(",");return[Number.parseFloat(i),Number.parseFloat(s),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}N(c_,Sm,"PgLine");var Nm,jm;class u_ extends(jm=Ee,Nm=F,jm){constructor(e){super(e,"json","PgLineABC")}build(e){return new d_(e,this.config)}}N(u_,Nm,"PgLineABCBuilder");var Cm,km;class d_ extends(km=be,Cm=F,km){getSQLType(){return"line"}mapFromDriverValue(e){const[i,s,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(i),b:Number.parseFloat(s),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}N(d_,Cm,"PgLineABC");function Ak(t,e){const{name:i,config:s}=mt(t,e);return!(s!=null&&s.mode)||s.mode==="tuple"?new l_(i):new u_(i)}var Am,Lm;class h_ extends(Lm=Ee,Am=F,Lm){constructor(e){super(e,"string","PgMacaddr")}build(e){return new f_(e,this.config)}}N(h_,Am,"PgMacaddrBuilder");var Em,Mm;class f_ extends(Mm=be,Em=F,Mm){getSQLType(){return"macaddr"}}N(f_,Em,"PgMacaddr");function Lk(t){return new h_(t??"")}var Dm,Rm;class m_ extends(Rm=Ee,Dm=F,Rm){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new p_(e,this.config)}}N(m_,Dm,"PgMacaddr8Builder");var Im,Om;class p_ extends(Om=be,Im=F,Om){getSQLType(){return"macaddr8"}}N(p_,Im,"PgMacaddr8");function Ek(t){return new m_(t??"")}var Vm,Bm;class g_ extends(Bm=Ee,Vm=F,Bm){constructor(e,i,s){super(e,"string","PgNumeric"),this.config.precision=i,this.config.scale=s}build(e){return new y_(e,this.config)}}N(g_,Vm,"PgNumericBuilder");var Fm,zm;class y_ extends(zm=be,Fm=F,zm){constructor(i,s){super(i,s);N(this,"precision");N(this,"scale");this.precision=s.precision,this.scale=s.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}N(y_,Fm,"PgNumeric");function Mk(t,e){const{name:i,config:s}=mt(t,e);return new g_(i,s==null?void 0:s.precision,s==null?void 0:s.scale)}var Zm,Um;class v_ extends(Um=Ee,Zm=F,Um){constructor(e){super(e,"array","PgPointTuple")}build(e){return new x_(e,this.config)}}N(v_,Zm,"PgPointTupleBuilder");var $m,Wm;class x_ extends(Wm=be,$m=F,Wm){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[i,s]=e.slice(1,-1).split(",");return[Number.parseFloat(i),Number.parseFloat(s)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}N(x_,$m,"PgPointTuple");var Hm,qm;class __ extends(qm=Ee,Hm=F,qm){constructor(e){super(e,"json","PgPointObject")}build(e){return new b_(e,this.config)}}N(__,Hm,"PgPointObjectBuilder");var Km,Gm;class b_ extends(Gm=be,Km=F,Gm){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[i,s]=e.slice(1,-1).split(",");return{x:Number.parseFloat(i),y:Number.parseFloat(s)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}N(b_,Km,"PgPointObject");function Dk(t,e){const{name:i,config:s}=mt(t,e);return!(s!=null&&s.mode)||s.mode==="tuple"?new v_(i):new __(i)}function Rk(t){const e=[];for(let i=0;i<t.length;i+=2)e.push(Number.parseInt(t.slice(i,i+2),16));return new Uint8Array(e)}function yh(t,e){const i=new ArrayBuffer(8),s=new DataView(i);for(let a=0;a<8;a++)s.setUint8(a,t[e+a]);return s.getFloat64(0,!0)}function w_(t){const e=Rk(t);let i=0;const s=e[i];i+=1;const a=new DataView(e.buffer),o=a.getUint32(i,s===1);if(i+=4,o&536870912&&(a.getUint32(i,s===1),i+=4),(o&65535)===1){const u=yh(e,i);i+=8;const d=yh(e,i);return i+=8,[u,d]}throw new Error("Unsupported geometry type")}var Xm,Ym;class T_ extends(Ym=Ee,Xm=F,Ym){constructor(e){super(e,"array","PgGeometry")}build(e){return new S_(e,this.config)}}N(T_,Xm,"PgGeometryBuilder");var Qm,Jm;class S_ extends(Jm=be,Qm=F,Jm){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return w_(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}N(S_,Qm,"PgGeometry");var ep,tp;class P_ extends(tp=Ee,ep=F,tp){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new N_(e,this.config)}}N(P_,ep,"PgGeometryObjectBuilder");var np,ip;class N_ extends(ip=be,np=F,ip){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const i=w_(e);return{x:i[0],y:i[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}N(N_,np,"PgGeometryObject");function Ik(t,e){const{name:i,config:s}=mt(t,e);return!(s!=null&&s.mode)||s.mode==="tuple"?new T_(i):new P_(i)}var sp,rp;class j_ extends(rp=Ee,sp=F,rp){constructor(e,i){super(e,"number","PgReal"),this.config.length=i}build(e){return new C_(e,this.config)}}N(j_,sp,"PgRealBuilder");var ap,op;class C_ extends(op=be,ap=F,op){constructor(i,s){super(i,s);N(this,"mapFromDriverValue",i=>typeof i=="string"?Number.parseFloat(i):i)}getSQLType(){return"real"}}N(C_,ap,"PgReal");function Ok(t){return new j_(t??"")}var lp,cp;class k_ extends(cp=Ee,lp=F,cp){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new A_(e,this.config)}}N(k_,lp,"PgSerialBuilder");var up,dp;class A_ extends(dp=be,up=F,dp){getSQLType(){return"serial"}}N(A_,up,"PgSerial");function Vk(t){return new k_(t??"")}var hp,fp;class L_ extends(fp=er,hp=F,fp){constructor(e){super(e,"number","PgSmallInt")}build(e){return new E_(e,this.config)}}N(L_,hp,"PgSmallIntBuilder");var mp,pp;class E_ extends(pp=be,mp=F,pp){constructor(){super(...arguments);N(this,"mapFromDriverValue",i=>typeof i=="string"?Number(i):i)}getSQLType(){return"smallint"}}N(E_,mp,"PgSmallInt");function Bk(t){return new L_(t??"")}var gp,yp;class M_ extends(yp=Ee,gp=F,yp){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new D_(e,this.config)}}N(M_,gp,"PgSmallSerialBuilder");var vp,xp;class D_ extends(xp=be,vp=F,xp){getSQLType(){return"smallserial"}}N(D_,vp,"PgSmallSerial");function Fk(t){return new M_(t??"")}var _p,bp;class R_ extends(bp=Ee,_p=F,bp){constructor(e,i){super(e,"string","PgText"),this.config.enumValues=i.enum}build(e){return new I_(e,this.config)}}N(R_,_p,"PgTextBuilder");var wp,Tp;class I_ extends(Tp=be,wp=F,Tp){constructor(){super(...arguments);N(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}N(I_,wp,"PgText");function Dt(t,e={}){const{name:i,config:s}=mt(t,e);return new R_(i,s)}var Sp,Pp;class O_ extends(Pp=Xi,Sp=F,Pp){constructor(e,i,s){super(e,"string","PgTime"),this.withTimezone=i,this.precision=s,this.config.withTimezone=i,this.config.precision=s}build(e){return new V_(e,this.config)}}N(O_,Sp,"PgTimeBuilder");var Np,jp;class V_ extends(jp=be,Np=F,jp){constructor(i,s){super(i,s);N(this,"withTimezone");N(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}N(V_,Np,"PgTime");function zk(t,e={}){const{name:i,config:s}=mt(t,e);return new O_(i,s.withTimezone??!1,s.precision)}var Cp,kp;class B_ extends(kp=Xi,Cp=F,kp){constructor(e,i,s){super(e,"date","PgTimestamp"),this.config.withTimezone=i,this.config.precision=s}build(e){return new F_(e,this.config)}}N(B_,Cp,"PgTimestampBuilder");var Ap,Lp;class F_ extends(Lp=be,Ap=F,Lp){constructor(i,s){super(i,s);N(this,"withTimezone");N(this,"precision");N(this,"mapFromDriverValue",i=>new Date(this.withTimezone?i:i+"+0000"));N(this,"mapToDriverValue",i=>i.toISOString());this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}N(F_,Ap,"PgTimestamp");var Ep,Mp;class z_ extends(Mp=Xi,Ep=F,Mp){constructor(e,i,s){super(e,"string","PgTimestampString"),this.config.withTimezone=i,this.config.precision=s}build(e){return new Z_(e,this.config)}}N(z_,Ep,"PgTimestampStringBuilder");var Dp,Rp;class Z_ extends(Rp=be,Dp=F,Rp){constructor(i,s){super(i,s);N(this,"withTimezone");N(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}N(Z_,Dp,"PgTimestampString");function Ms(t,e={}){const{name:i,config:s}=mt(t,e);return(s==null?void 0:s.mode)==="string"?new z_(i,s.withTimezone??!1,s.precision):new B_(i,(s==null?void 0:s.withTimezone)??!1,s==null?void 0:s.precision)}var Ip,Op;class U_ extends(Op=Ee,Ip=F,Op){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(hi`gen_random_uuid()`)}build(e){return new $_(e,this.config)}}N(U_,Ip,"PgUUIDBuilder");var Vp,Bp;class $_ extends(Bp=be,Vp=F,Bp){getSQLType(){return"uuid"}}N($_,Vp,"PgUUID");function Zk(t){return new U_(t??"")}var Fp,zp;class W_ extends(zp=Ee,Fp=F,zp){constructor(e,i){super(e,"string","PgVarchar"),this.config.length=i.length,this.config.enumValues=i.enum}build(e){return new H_(e,this.config)}}N(W_,Fp,"PgVarcharBuilder");var Zp,Up;class H_ extends(Up=be,Zp=F,Up){constructor(){super(...arguments);N(this,"length",this.config.length);N(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}N(H_,Zp,"PgVarchar");function ci(t,e={}){const{name:i,config:s}=mt(t,e);return new W_(i,s)}var $p,Wp;class q_ extends(Wp=Ee,$p=F,Wp){constructor(e,i){super(e,"string","PgBinaryVector"),this.config.dimensions=i.dimensions}build(e){return new K_(e,this.config)}}N(q_,$p,"PgBinaryVectorBuilder");var Hp,qp;class K_ extends(qp=be,Hp=F,qp){constructor(){super(...arguments);N(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}N(K_,Hp,"PgBinaryVector");function Uk(t,e){const{name:i,config:s}=mt(t,e);return new q_(i,s)}var Kp,Gp;class G_ extends(Gp=Ee,Kp=F,Gp){constructor(e,i){super(e,"array","PgHalfVector"),this.config.dimensions=i.dimensions}build(e){return new X_(e,this.config)}}N(G_,Kp,"PgHalfVectorBuilder");var Xp,Yp;class X_ extends(Yp=be,Xp=F,Yp){constructor(){super(...arguments);N(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(i){return JSON.stringify(i)}mapFromDriverValue(i){return i.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}N(X_,Xp,"PgHalfVector");function $k(t,e){const{name:i,config:s}=mt(t,e);return new G_(i,s)}var Qp,Jp;class Y_ extends(Jp=Ee,Qp=F,Jp){constructor(e,i){super(e,"string","PgSparseVector"),this.config.dimensions=i.dimensions}build(e){return new Q_(e,this.config)}}N(Y_,Qp,"PgSparseVectorBuilder");var eg,tg;class Q_ extends(tg=be,eg=F,tg){constructor(){super(...arguments);N(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}N(Q_,eg,"PgSparseVector");function Wk(t,e){const{name:i,config:s}=mt(t,e);return new Y_(i,s)}var ng,ig;class J_ extends(ig=Ee,ng=F,ig){constructor(e,i){super(e,"array","PgVector"),this.config.dimensions=i.dimensions}build(e){return new e0(e,this.config)}}N(J_,ng,"PgVectorBuilder");var sg,rg;class e0 extends(rg=be,sg=F,rg){constructor(){super(...arguments);N(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(i){return JSON.stringify(i)}mapFromDriverValue(i){return i.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}N(e0,sg,"PgVector");function Hk(t,e){const{name:i,config:s}=mt(t,e);return new J_(i,s)}function qk(){return{bigint:_k,bigserial:bk,boolean:na,char:wk,cidr:Tk,customType:Sk,date:Pk,doublePrecision:Nk,inet:jk,integer:il,interval:Ck,json:kk,jsonb:sl,line:Ak,macaddr:Lk,macaddr8:Ek,numeric:Mk,point:Dk,geometry:Ik,real:Ok,serial:Vk,smallint:Bk,smallserial:Fk,text:Dt,time:zk,timestamp:Ms,uuid:Zk,varchar:ci,bit:Uk,halfvec:$k,sparsevec:Wk,vector:Hk}}const rl=Symbol.for("drizzle:PgInlineForeignKeys"),vh=Symbol.for("drizzle:EnableRLS");var ag,og,lg,cg,ug;class ia extends(ug=Mt,cg=F,lg=rl,og=vh,ag=Mt.Symbol.ExtraConfigBuilder,ug){constructor(){super(...arguments);N(this,lg,[]);N(this,og,!1);N(this,ag)}}N(ia,cg,"PgTable"),N(ia,"Symbol",Object.assign({},Mt.Symbol,{InlineForeignKeys:rl,EnableRLS:vh}));function Kk(t,e,i,s,a=t){const o=new ia(t,s,a),u=typeof e=="function"?e(qk()):e,d=Object.fromEntries(Object.entries(u).map(([g,y])=>{const x=y;x.setName(g);const b=x.build(o);return o[rl].push(...x.buildForeignKeys(b,o)),[g,b]})),f=Object.fromEntries(Object.entries(u).map(([g,y])=>{const x=y;x.setName(g);const b=x.buildExtraConfigColumn(o);return[g,b]})),p=Object.assign(o,d);return p[Mt.Symbol.Columns]=d,p[Mt.Symbol.ExtraConfigColumns]=f,Object.assign(p,{enableRLS:()=>(p[ia.Symbol.EnableRLS]=!0,p)})}const lc=(t,e,i)=>Kk(t,e,i,void 0);var Le;(function(t){t.assertEqual=a=>{};function e(a){}t.assertIs=e;function i(a){throw new Error}t.assertNever=i,t.arrayToEnum=a=>{const o={};for(const u of a)o[u]=u;return o},t.getValidEnumValues=a=>{const o=t.objectKeys(a).filter(d=>typeof a[a[d]]!="number"),u={};for(const d of o)u[d]=a[d];return t.objectValues(u)},t.objectValues=a=>t.objectKeys(a).map(function(o){return a[o]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&o.push(u);return o},t.find=(a,o)=>{for(const u of a)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function s(a,o=" | "){return a.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=s,t.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(Le||(Le={}));var al;(function(t){t.mergeShapes=(e,i)=>({...e,...i})})(al||(al={}));const J=Le.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),An=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return Number.isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},W=Le.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Gk=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class It extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const i=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,i):this.__proto__=i,this.name="ZodError",this.issues=e}format(e){const i=e||function(o){return o.message},s={_errors:[]},a=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(a);else if(u.code==="invalid_return_type")a(u.returnTypeError);else if(u.code==="invalid_arguments")a(u.argumentsError);else if(u.path.length===0)s._errors.push(i(u));else{let d=s,f=0;for(;f<u.path.length;){const p=u.path[f];f===u.path.length-1?(d[p]=d[p]||{_errors:[]},d[p]._errors.push(i(u))):d[p]=d[p]||{_errors:[]},d=d[p],f++}}};return a(this),s}static assert(e){if(!(e instanceof It))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Le.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=i=>i.message){const i={},s=[];for(const a of this.issues)if(a.path.length>0){const o=a.path[0];i[o]=i[o]||[],i[o].push(e(a))}else s.push(e(a));return{formErrors:s,fieldErrors:i}}get formErrors(){return this.flatten()}}It.create=t=>new It(t);const Wi=(t,e)=>{let i;switch(t.code){case W.invalid_type:t.received===J.undefined?i="Required":i=`Expected ${t.expected}, received ${t.received}`;break;case W.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(t.expected,Le.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:i=`Unrecognized key(s) in object: ${Le.joinValues(t.keys,", ")}`;break;case W.invalid_union:i="Invalid input";break;case W.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${Le.joinValues(t.options)}`;break;case W.invalid_enum_value:i=`Invalid enum value. Expected ${Le.joinValues(t.options)}, received '${t.received}'`;break;case W.invalid_arguments:i="Invalid function arguments";break;case W.invalid_return_type:i="Invalid function return type";break;case W.invalid_date:i="Invalid date";break;case W.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(i=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(i=`${i} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?i=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?i=`Invalid input: must end with "${t.validation.endsWith}"`:Le.assertNever(t.validation):t.validation!=="regex"?i=`Invalid ${t.validation}`:i="Invalid";break;case W.too_small:t.type==="array"?i=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?i=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?i=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?i=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?i=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:i="Invalid input";break;case W.too_big:t.type==="array"?i=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?i=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?i=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?i=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?i=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:i="Invalid input";break;case W.custom:i="Invalid input";break;case W.invalid_intersection_types:i="Intersection results could not be merged";break;case W.not_multiple_of:i=`Number must be a multiple of ${t.multipleOf}`;break;case W.not_finite:i="Number must be finite";break;default:i=e.defaultError,Le.assertNever(t)}return{message:i}};let t0=Wi;function Xk(t){t0=t}function sa(){return t0}const ra=t=>{const{data:e,path:i,errorMaps:s,issueData:a}=t,o=[...i,...a.path||[]],u={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let d="";const f=s.filter(p=>!!p).slice().reverse();for(const p of f)d=p(u,{data:e,defaultError:d}).message;return{...a,path:o,message:d}},Yk=[];function G(t,e){const i=sa(),s=ra({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,i,i===Wi?void 0:Wi].filter(a=>!!a)});t.common.issues.push(s)}class Tt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,i){const s=[];for(const a of i){if(a.status==="aborted")return ue;a.status==="dirty"&&e.dirty(),s.push(a.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,i){const s=[];for(const a of i){const o=await a.key,u=await a.value;s.push({key:o,value:u})}return Tt.mergeObjectSync(e,s)}static mergeObjectSync(e,i){const s={};for(const a of i){const{key:o,value:u}=a;if(o.status==="aborted"||u.status==="aborted")return ue;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||a.alwaysSet)&&(s[o.value]=u.value)}return{status:e.value,value:s}}}const ue=Object.freeze({status:"aborted"}),Ii=t=>({status:"dirty",value:t}),Nt=t=>({status:"valid",value:t}),ol=t=>t.status==="aborted",ll=t=>t.status==="dirty",fi=t=>t.status==="valid",Ds=t=>typeof Promise<"u"&&t instanceof Promise;var ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ie||(ie={}));class vn{constructor(e,i,s,a){this._cachedPath=[],this.parent=e,this.data=i,this._path=s,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xh=(t,e)=>{if(fi(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const i=new It(t.common.issues);return this._error=i,this._error}}};function xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:i,required_error:s,description:a}=t;if(e&&(i||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,d)=>{const{message:f}=t;return u.code==="invalid_enum_value"?{message:f??d.defaultError}:typeof d.data>"u"?{message:f??s??d.defaultError}:u.code!=="invalid_type"?{message:d.defaultError}:{message:f??i??d.defaultError}},description:a}}class Pe{get description(){return this._def.description}_getType(e){return An(e.data)}_getOrReturnCtx(e,i){return i||{common:e.parent.common,data:e.data,parsedType:An(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Tt,ctx:{common:e.parent.common,data:e.data,parsedType:An(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const i=this._parse(e);if(Ds(i))throw new Error("Synchronous parse encountered promise.");return i}_parseAsync(e){const i=this._parse(e);return Promise.resolve(i)}parse(e,i){const s=this.safeParse(e,i);if(s.success)return s.data;throw s.error}safeParse(e,i){const s={common:{issues:[],async:(i==null?void 0:i.async)??!1,contextualErrorMap:i==null?void 0:i.errorMap},path:(i==null?void 0:i.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:An(e)},a=this._parseSync({data:e,path:s.path,parent:s});return xh(s,a)}"~validate"(e){var s,a;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:An(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:i});return fi(o)?{value:o.value}:{issues:i.common.issues}}catch(o){(a=(s=o==null?void 0:o.message)==null?void 0:s.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>fi(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,i){const s=await this.safeParseAsync(e,i);if(s.success)return s.data;throw s.error}async safeParseAsync(e,i){const s={common:{issues:[],contextualErrorMap:i==null?void 0:i.errorMap,async:!0},path:(i==null?void 0:i.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:An(e)},a=this._parse({data:e,path:s.path,parent:s}),o=await(Ds(a)?a:Promise.resolve(a));return xh(s,o)}refine(e,i){const s=a=>typeof i=="string"||typeof i>"u"?{message:i}:typeof i=="function"?i(a):i;return this._refinement((a,o)=>{const u=e(a),d=()=>o.addIssue({code:W.custom,...s(a)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(d(),!1)):u?!0:(d(),!1)})}refinement(e,i){return this._refinement((s,a)=>e(s)?!0:(a.addIssue(typeof i=="function"?i(s,a):i),!1))}_refinement(e){return new an({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:i=>this["~validate"](i)}}optional(){return yn.create(this,this._def)}nullable(){return qn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rn.create(this)}promise(){return qi.create(this,this._def)}or(e){return Vs.create([this,e],this._def)}and(e){return Bs.create(this,e,this._def)}transform(e){return new an({...xe(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const i=typeof e=="function"?e:()=>e;return new $s({...xe(this._def),innerType:this,defaultValue:i,typeName:fe.ZodDefault})}brand(){return new cc({typeName:fe.ZodBranded,type:this,...xe(this._def)})}catch(e){const i=typeof e=="function"?e:()=>e;return new Ws({...xe(this._def),innerType:this,catchValue:i,typeName:fe.ZodCatch})}describe(e){const i=this.constructor;return new i({...this._def,description:e})}pipe(e){return tr.create(this,e)}readonly(){return Hs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Qk=/^c[^\s-]{8,}$/i,Jk=/^[0-9a-z]+$/,eA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tA=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nA=/^[a-z0-9_-]{21}$/i,iA=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sA=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rA=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Do;const oA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dA=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,hA=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,n0="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fA=new RegExp(`^${n0}$`);function i0(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const i=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${i}`}function mA(t){return new RegExp(`^${i0(t)}$`)}function s0(t){let e=`${n0}T${i0(t)}`;const i=[];return i.push(t.local?"Z?":"Z"),t.offset&&i.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${i.join("|")})`,new RegExp(`^${e}$`)}function pA(t,e){return!!((e==="v4"||!e)&&oA.test(t)||(e==="v6"||!e)&&cA.test(t))}function gA(t,e){if(!iA.test(t))return!1;try{const[i]=t.split(".");if(!i)return!1;const s=i.replace(/-/g,"+").replace(/_/g,"/").padEnd(i.length+(4-i.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function yA(t,e){return!!((e==="v4"||!e)&&lA.test(t)||(e==="v6"||!e)&&uA.test(t))}class nn extends Pe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const o=this._getOrReturnCtx(e);return G(o,{code:W.invalid_type,expected:J.string,received:o.parsedType}),ue}const s=new Tt;let a;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(a=this._getOrReturnCtx(e,a),G(a,{code:W.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")e.data.length>o.value&&(a=this._getOrReturnCtx(e,a),G(a,{code:W.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,d=e.data.length<o.value;(u||d)&&(a=this._getOrReturnCtx(e,a),u?G(a,{code:W.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):d&&G(a,{code:W.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")rA.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"email",code:W.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")Do||(Do=new RegExp(aA,"u")),Do.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"emoji",code:W.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")tA.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"uuid",code:W.invalid_string,message:o.message}),s.dirty());else if(o.kind==="nanoid")nA.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"nanoid",code:W.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")Qk.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"cuid",code:W.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")Jk.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"cuid2",code:W.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")eA.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"ulid",code:W.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),G(a,{validation:"url",code:W.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"regex",code:W.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(e,a),G(a,{code:W.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(a=this._getOrReturnCtx(e,a),G(a,{code:W.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(a=this._getOrReturnCtx(e,a),G(a,{code:W.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?s0(o).test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{code:W.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="date"?fA.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{code:W.invalid_string,validation:"date",message:o.message}),s.dirty()):o.kind==="time"?mA(o).test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{code:W.invalid_string,validation:"time",message:o.message}),s.dirty()):o.kind==="duration"?sA.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"duration",code:W.invalid_string,message:o.message}),s.dirty()):o.kind==="ip"?pA(e.data,o.version)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"ip",code:W.invalid_string,message:o.message}),s.dirty()):o.kind==="jwt"?gA(e.data,o.alg)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"jwt",code:W.invalid_string,message:o.message}),s.dirty()):o.kind==="cidr"?yA(e.data,o.version)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"cidr",code:W.invalid_string,message:o.message}),s.dirty()):o.kind==="base64"?dA.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"base64",code:W.invalid_string,message:o.message}),s.dirty()):o.kind==="base64url"?hA.test(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{validation:"base64url",code:W.invalid_string,message:o.message}),s.dirty()):Le.assertNever(o);return{status:s.value,value:e.data}}_regex(e,i,s){return this.refinement(a=>e.test(a),{validation:i,code:W.invalid_string,...ie.errToObj(s)})}_addCheck(e){return new nn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ie.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ie.errToObj(e)})}regex(e,i){return this._addCheck({kind:"regex",regex:e,...ie.errToObj(i)})}includes(e,i){return this._addCheck({kind:"includes",value:e,position:i==null?void 0:i.position,...ie.errToObj(i==null?void 0:i.message)})}startsWith(e,i){return this._addCheck({kind:"startsWith",value:e,...ie.errToObj(i)})}endsWith(e,i){return this._addCheck({kind:"endsWith",value:e,...ie.errToObj(i)})}min(e,i){return this._addCheck({kind:"min",value:e,...ie.errToObj(i)})}max(e,i){return this._addCheck({kind:"max",value:e,...ie.errToObj(i)})}length(e,i){return this._addCheck({kind:"length",value:e,...ie.errToObj(i)})}nonempty(e){return this.min(1,ie.errToObj(e))}trim(){return new nn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new nn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new nn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxLength(){let e=null;for(const i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}}nn.create=t=>new nn({checks:[],typeName:fe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...xe(t)});function vA(t,e){const i=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,a=i>s?i:s,o=Number.parseInt(t.toFixed(a).replace(".","")),u=Number.parseInt(e.toFixed(a).replace(".",""));return o%u/10**a}class $n extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const o=this._getOrReturnCtx(e);return G(o,{code:W.invalid_type,expected:J.number,received:o.parsedType}),ue}let s;const a=new Tt;for(const o of this._def.checks)o.kind==="int"?Le.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:W.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),G(s,{code:W.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),G(s,{code:W.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?vA(e.data,o.value)!==0&&(s=this._getOrReturnCtx(e,s),G(s,{code:W.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:W.not_finite,message:o.message}),a.dirty()):Le.assertNever(o);return{status:a.value,value:e.data}}gte(e,i){return this.setLimit("min",e,!0,ie.toString(i))}gt(e,i){return this.setLimit("min",e,!1,ie.toString(i))}lte(e,i){return this.setLimit("max",e,!0,ie.toString(i))}lt(e,i){return this.setLimit("max",e,!1,ie.toString(i))}setLimit(e,i,s,a){return new $n({...this._def,checks:[...this._def.checks,{kind:e,value:i,inclusive:s,message:ie.toString(a)}]})}_addCheck(e){return new $n({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ie.toString(e)})}multipleOf(e,i){return this._addCheck({kind:"multipleOf",value:e,message:ie.toString(i)})}finite(e){return this._addCheck({kind:"finite",message:ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ie.toString(e)})}get minValue(){let e=null;for(const i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxValue(){let e=null;for(const i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Le.isInteger(e.value))}get isFinite(){let e=null,i=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(i===null||s.value>i)&&(i=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(i)&&Number.isFinite(e)}}$n.create=t=>new $n({checks:[],typeName:fe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class Wn extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==J.bigint)return this._getInvalidInput(e);let s;const a=new Tt;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),G(s,{code:W.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),G(s,{code:W.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),G(s,{code:W.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):Le.assertNever(o);return{status:a.value,value:e.data}}_getInvalidInput(e){const i=this._getOrReturnCtx(e);return G(i,{code:W.invalid_type,expected:J.bigint,received:i.parsedType}),ue}gte(e,i){return this.setLimit("min",e,!0,ie.toString(i))}gt(e,i){return this.setLimit("min",e,!1,ie.toString(i))}lte(e,i){return this.setLimit("max",e,!0,ie.toString(i))}lt(e,i){return this.setLimit("max",e,!1,ie.toString(i))}setLimit(e,i,s,a){return new Wn({...this._def,checks:[...this._def.checks,{kind:e,value:i,inclusive:s,message:ie.toString(a)}]})}_addCheck(e){return new Wn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ie.toString(e)})}multipleOf(e,i){return this._addCheck({kind:"multipleOf",value:e,message:ie.toString(i)})}get minValue(){let e=null;for(const i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e}get maxValue(){let e=null;for(const i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e}}Wn.create=t=>new Wn({checks:[],typeName:fe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...xe(t)});class Rs extends Pe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const s=this._getOrReturnCtx(e);return G(s,{code:W.invalid_type,expected:J.boolean,received:s.parsedType}),ue}return Nt(e.data)}}Rs.create=t=>new Rs({typeName:fe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class mi extends Pe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const o=this._getOrReturnCtx(e);return G(o,{code:W.invalid_type,expected:J.date,received:o.parsedType}),ue}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return G(o,{code:W.invalid_date}),ue}const s=new Tt;let a;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(a=this._getOrReturnCtx(e,a),G(a,{code:W.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(a=this._getOrReturnCtx(e,a),G(a,{code:W.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):Le.assertNever(o);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new mi({...this._def,checks:[...this._def.checks,e]})}min(e,i){return this._addCheck({kind:"min",value:e.getTime(),message:ie.toString(i)})}max(e,i){return this._addCheck({kind:"max",value:e.getTime(),message:ie.toString(i)})}get minDate(){let e=null;for(const i of this._def.checks)i.kind==="min"&&(e===null||i.value>e)&&(e=i.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const i of this._def.checks)i.kind==="max"&&(e===null||i.value<e)&&(e=i.value);return e!=null?new Date(e):null}}mi.create=t=>new mi({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:fe.ZodDate,...xe(t)});class aa extends Pe{_parse(e){if(this._getType(e)!==J.symbol){const s=this._getOrReturnCtx(e);return G(s,{code:W.invalid_type,expected:J.symbol,received:s.parsedType}),ue}return Nt(e.data)}}aa.create=t=>new aa({typeName:fe.ZodSymbol,...xe(t)});class Is extends Pe{_parse(e){if(this._getType(e)!==J.undefined){const s=this._getOrReturnCtx(e);return G(s,{code:W.invalid_type,expected:J.undefined,received:s.parsedType}),ue}return Nt(e.data)}}Is.create=t=>new Is({typeName:fe.ZodUndefined,...xe(t)});class Os extends Pe{_parse(e){if(this._getType(e)!==J.null){const s=this._getOrReturnCtx(e);return G(s,{code:W.invalid_type,expected:J.null,received:s.parsedType}),ue}return Nt(e.data)}}Os.create=t=>new Os({typeName:fe.ZodNull,...xe(t)});class Hi extends Pe{constructor(){super(...arguments),this._any=!0}_parse(e){return Nt(e.data)}}Hi.create=t=>new Hi({typeName:fe.ZodAny,...xe(t)});class ui extends Pe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nt(e.data)}}ui.create=t=>new ui({typeName:fe.ZodUnknown,...xe(t)});class Rn extends Pe{_parse(e){const i=this._getOrReturnCtx(e);return G(i,{code:W.invalid_type,expected:J.never,received:i.parsedType}),ue}}Rn.create=t=>new Rn({typeName:fe.ZodNever,...xe(t)});class oa extends Pe{_parse(e){if(this._getType(e)!==J.undefined){const s=this._getOrReturnCtx(e);return G(s,{code:W.invalid_type,expected:J.void,received:s.parsedType}),ue}return Nt(e.data)}}oa.create=t=>new oa({typeName:fe.ZodVoid,...xe(t)});class rn extends Pe{_parse(e){const{ctx:i,status:s}=this._processInputParams(e),a=this._def;if(i.parsedType!==J.array)return G(i,{code:W.invalid_type,expected:J.array,received:i.parsedType}),ue;if(a.exactLength!==null){const u=i.data.length>a.exactLength.value,d=i.data.length<a.exactLength.value;(u||d)&&(G(i,{code:u?W.too_big:W.too_small,minimum:d?a.exactLength.value:void 0,maximum:u?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&i.data.length<a.minLength.value&&(G(i,{code:W.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&i.data.length>a.maxLength.value&&(G(i,{code:W.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),i.common.async)return Promise.all([...i.data].map((u,d)=>a.type._parseAsync(new vn(i,u,i.path,d)))).then(u=>Tt.mergeArray(s,u));const o=[...i.data].map((u,d)=>a.type._parseSync(new vn(i,u,i.path,d)));return Tt.mergeArray(s,o)}get element(){return this._def.type}min(e,i){return new rn({...this._def,minLength:{value:e,message:ie.toString(i)}})}max(e,i){return new rn({...this._def,maxLength:{value:e,message:ie.toString(i)}})}length(e,i){return new rn({...this._def,exactLength:{value:e,message:ie.toString(i)}})}nonempty(e){return this.min(1,e)}}rn.create=(t,e)=>new rn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...xe(e)});function Ai(t){if(t instanceof Xe){const e={};for(const i in t.shape){const s=t.shape[i];e[i]=yn.create(Ai(s))}return new Xe({...t._def,shape:()=>e})}else return t instanceof rn?new rn({...t._def,type:Ai(t.element)}):t instanceof yn?yn.create(Ai(t.unwrap())):t instanceof qn?qn.create(Ai(t.unwrap())):t instanceof xn?xn.create(t.items.map(e=>Ai(e))):t}class Xe extends Pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),i=Le.objectKeys(e);return this._cached={shape:e,keys:i},this._cached}_parse(e){if(this._getType(e)!==J.object){const p=this._getOrReturnCtx(e);return G(p,{code:W.invalid_type,expected:J.object,received:p.parsedType}),ue}const{status:s,ctx:a}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),d=[];if(!(this._def.catchall instanceof Rn&&this._def.unknownKeys==="strip"))for(const p in a.data)u.includes(p)||d.push(p);const f=[];for(const p of u){const g=o[p],y=a.data[p];f.push({key:{status:"valid",value:p},value:g._parse(new vn(a,y,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof Rn){const p=this._def.unknownKeys;if(p==="passthrough")for(const g of d)f.push({key:{status:"valid",value:g},value:{status:"valid",value:a.data[g]}});else if(p==="strict")d.length>0&&(G(a,{code:W.unrecognized_keys,keys:d}),s.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const g of d){const y=a.data[g];f.push({key:{status:"valid",value:g},value:p._parse(new vn(a,y,a.path,g)),alwaysSet:g in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const p=[];for(const g of f){const y=await g.key,x=await g.value;p.push({key:y,value:x,alwaysSet:g.alwaysSet})}return p}).then(p=>Tt.mergeObjectSync(s,p)):Tt.mergeObjectSync(s,f)}get shape(){return this._def.shape()}strict(e){return ie.errToObj,new Xe({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(i,s)=>{var o,u;const a=((u=(o=this._def).errorMap)==null?void 0:u.call(o,i,s).message)??s.defaultError;return i.code==="unrecognized_keys"?{message:ie.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new Xe({...this._def,unknownKeys:"strip"})}passthrough(){return new Xe({...this._def,unknownKeys:"passthrough"})}extend(e){return new Xe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Xe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,i){return this.augment({[e]:i})}catchall(e){return new Xe({...this._def,catchall:e})}pick(e){const i={};for(const s of Le.objectKeys(e))e[s]&&this.shape[s]&&(i[s]=this.shape[s]);return new Xe({...this._def,shape:()=>i})}omit(e){const i={};for(const s of Le.objectKeys(this.shape))e[s]||(i[s]=this.shape[s]);return new Xe({...this._def,shape:()=>i})}deepPartial(){return Ai(this)}partial(e){const i={};for(const s of Le.objectKeys(this.shape)){const a=this.shape[s];e&&!e[s]?i[s]=a:i[s]=a.optional()}return new Xe({...this._def,shape:()=>i})}required(e){const i={};for(const s of Le.objectKeys(this.shape))if(e&&!e[s])i[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof yn;)o=o._def.innerType;i[s]=o}return new Xe({...this._def,shape:()=>i})}keyof(){return r0(Le.objectKeys(this.shape))}}Xe.create=(t,e)=>new Xe({shape:()=>t,unknownKeys:"strip",catchall:Rn.create(),typeName:fe.ZodObject,...xe(e)});Xe.strictCreate=(t,e)=>new Xe({shape:()=>t,unknownKeys:"strict",catchall:Rn.create(),typeName:fe.ZodObject,...xe(e)});Xe.lazycreate=(t,e)=>new Xe({shape:t,unknownKeys:"strip",catchall:Rn.create(),typeName:fe.ZodObject,...xe(e)});class Vs extends Pe{_parse(e){const{ctx:i}=this._processInputParams(e),s=this._def.options;function a(o){for(const d of o)if(d.result.status==="valid")return d.result;for(const d of o)if(d.result.status==="dirty")return i.common.issues.push(...d.ctx.common.issues),d.result;const u=o.map(d=>new It(d.ctx.common.issues));return G(i,{code:W.invalid_union,unionErrors:u}),ue}if(i.common.async)return Promise.all(s.map(async o=>{const u={...i,common:{...i.common,issues:[]},parent:null};return{result:await o._parseAsync({data:i.data,path:i.path,parent:u}),ctx:u}})).then(a);{let o;const u=[];for(const f of s){const p={...i,common:{...i.common,issues:[]},parent:null},g=f._parseSync({data:i.data,path:i.path,parent:p});if(g.status==="valid")return g;g.status==="dirty"&&!o&&(o={result:g,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(o)return i.common.issues.push(...o.ctx.common.issues),o.result;const d=u.map(f=>new It(f));return G(i,{code:W.invalid_union,unionErrors:d}),ue}}get options(){return this._def.options}}Vs.create=(t,e)=>new Vs({options:t,typeName:fe.ZodUnion,...xe(e)});const kn=t=>t instanceof zs?kn(t.schema):t instanceof an?kn(t.innerType()):t instanceof Zs?[t.value]:t instanceof Hn?t.options:t instanceof Us?Le.objectValues(t.enum):t instanceof $s?kn(t._def.innerType):t instanceof Is?[void 0]:t instanceof Os?[null]:t instanceof yn?[void 0,...kn(t.unwrap())]:t instanceof qn?[null,...kn(t.unwrap())]:t instanceof cc||t instanceof Hs?kn(t.unwrap()):t instanceof Ws?kn(t._def.innerType):[];class ja extends Pe{_parse(e){const{ctx:i}=this._processInputParams(e);if(i.parsedType!==J.object)return G(i,{code:W.invalid_type,expected:J.object,received:i.parsedType}),ue;const s=this.discriminator,a=i.data[s],o=this.optionsMap.get(a);return o?i.common.async?o._parseAsync({data:i.data,path:i.path,parent:i}):o._parseSync({data:i.data,path:i.path,parent:i}):(G(i,{code:W.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,i,s){const a=new Map;for(const o of i){const u=kn(o.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const d of u){if(a.has(d))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(d)}`);a.set(d,o)}}return new ja({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:i,optionsMap:a,...xe(s)})}}function cl(t,e){const i=An(t),s=An(e);if(t===e)return{valid:!0,data:t};if(i===J.object&&s===J.object){const a=Le.objectKeys(e),o=Le.objectKeys(t).filter(d=>a.indexOf(d)!==-1),u={...t,...e};for(const d of o){const f=cl(t[d],e[d]);if(!f.valid)return{valid:!1};u[d]=f.data}return{valid:!0,data:u}}else if(i===J.array&&s===J.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let o=0;o<t.length;o++){const u=t[o],d=e[o],f=cl(u,d);if(!f.valid)return{valid:!1};a.push(f.data)}return{valid:!0,data:a}}else return i===J.date&&s===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Bs extends Pe{_parse(e){const{status:i,ctx:s}=this._processInputParams(e),a=(o,u)=>{if(ol(o)||ol(u))return ue;const d=cl(o.value,u.value);return d.valid?((ll(o)||ll(u))&&i.dirty(),{status:i.value,value:d.data}):(G(s,{code:W.invalid_intersection_types}),ue)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([o,u])=>a(o,u)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Bs.create=(t,e,i)=>new Bs({left:t,right:e,typeName:fe.ZodIntersection,...xe(i)});class xn extends Pe{_parse(e){const{status:i,ctx:s}=this._processInputParams(e);if(s.parsedType!==J.array)return G(s,{code:W.invalid_type,expected:J.array,received:s.parsedType}),ue;if(s.data.length<this._def.items.length)return G(s,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ue;!this._def.rest&&s.data.length>this._def.items.length&&(G(s,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),i.dirty());const o=[...s.data].map((u,d)=>{const f=this._def.items[d]||this._def.rest;return f?f._parse(new vn(s,u,s.path,d)):null}).filter(u=>!!u);return s.common.async?Promise.all(o).then(u=>Tt.mergeArray(i,u)):Tt.mergeArray(i,o)}get items(){return this._def.items}rest(e){return new xn({...this._def,rest:e})}}xn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xn({items:t,typeName:fe.ZodTuple,rest:null,...xe(e)})};class Fs extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:i,ctx:s}=this._processInputParams(e);if(s.parsedType!==J.object)return G(s,{code:W.invalid_type,expected:J.object,received:s.parsedType}),ue;const a=[],o=this._def.keyType,u=this._def.valueType;for(const d in s.data)a.push({key:o._parse(new vn(s,d,s.path,d)),value:u._parse(new vn(s,s.data[d],s.path,d)),alwaysSet:d in s.data});return s.common.async?Tt.mergeObjectAsync(i,a):Tt.mergeObjectSync(i,a)}get element(){return this._def.valueType}static create(e,i,s){return i instanceof Pe?new Fs({keyType:e,valueType:i,typeName:fe.ZodRecord,...xe(s)}):new Fs({keyType:nn.create(),valueType:e,typeName:fe.ZodRecord,...xe(i)})}}class la extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:i,ctx:s}=this._processInputParams(e);if(s.parsedType!==J.map)return G(s,{code:W.invalid_type,expected:J.map,received:s.parsedType}),ue;const a=this._def.keyType,o=this._def.valueType,u=[...s.data.entries()].map(([d,f],p)=>({key:a._parse(new vn(s,d,s.path,[p,"key"])),value:o._parse(new vn(s,f,s.path,[p,"value"]))}));if(s.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const f of u){const p=await f.key,g=await f.value;if(p.status==="aborted"||g.status==="aborted")return ue;(p.status==="dirty"||g.status==="dirty")&&i.dirty(),d.set(p.value,g.value)}return{status:i.value,value:d}})}else{const d=new Map;for(const f of u){const p=f.key,g=f.value;if(p.status==="aborted"||g.status==="aborted")return ue;(p.status==="dirty"||g.status==="dirty")&&i.dirty(),d.set(p.value,g.value)}return{status:i.value,value:d}}}}la.create=(t,e,i)=>new la({valueType:e,keyType:t,typeName:fe.ZodMap,...xe(i)});class pi extends Pe{_parse(e){const{status:i,ctx:s}=this._processInputParams(e);if(s.parsedType!==J.set)return G(s,{code:W.invalid_type,expected:J.set,received:s.parsedType}),ue;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(G(s,{code:W.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),i.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(G(s,{code:W.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),i.dirty());const o=this._def.valueType;function u(f){const p=new Set;for(const g of f){if(g.status==="aborted")return ue;g.status==="dirty"&&i.dirty(),p.add(g.value)}return{status:i.value,value:p}}const d=[...s.data.values()].map((f,p)=>o._parse(new vn(s,f,s.path,p)));return s.common.async?Promise.all(d).then(f=>u(f)):u(d)}min(e,i){return new pi({...this._def,minSize:{value:e,message:ie.toString(i)}})}max(e,i){return new pi({...this._def,maxSize:{value:e,message:ie.toString(i)}})}size(e,i){return this.min(e,i).max(e,i)}nonempty(e){return this.min(1,e)}}pi.create=(t,e)=>new pi({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...xe(e)});class Bi extends Pe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:i}=this._processInputParams(e);if(i.parsedType!==J.function)return G(i,{code:W.invalid_type,expected:J.function,received:i.parsedType}),ue;function s(d,f){return ra({data:d,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,sa(),Wi].filter(p=>!!p),issueData:{code:W.invalid_arguments,argumentsError:f}})}function a(d,f){return ra({data:d,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,sa(),Wi].filter(p=>!!p),issueData:{code:W.invalid_return_type,returnTypeError:f}})}const o={errorMap:i.common.contextualErrorMap},u=i.data;if(this._def.returns instanceof qi){const d=this;return Nt(async function(...f){const p=new It([]),g=await d._def.args.parseAsync(f,o).catch(b=>{throw p.addIssue(s(f,b)),p}),y=await Reflect.apply(u,this,g);return await d._def.returns._def.type.parseAsync(y,o).catch(b=>{throw p.addIssue(a(y,b)),p})})}else{const d=this;return Nt(function(...f){const p=d._def.args.safeParse(f,o);if(!p.success)throw new It([s(f,p.error)]);const g=Reflect.apply(u,this,p.data),y=d._def.returns.safeParse(g,o);if(!y.success)throw new It([a(g,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Bi({...this._def,args:xn.create(e).rest(ui.create())})}returns(e){return new Bi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,i,s){return new Bi({args:e||xn.create([]).rest(ui.create()),returns:i||ui.create(),typeName:fe.ZodFunction,...xe(s)})}}class zs extends Pe{get schema(){return this._def.getter()}_parse(e){const{ctx:i}=this._processInputParams(e);return this._def.getter()._parse({data:i.data,path:i.path,parent:i})}}zs.create=(t,e)=>new zs({getter:t,typeName:fe.ZodLazy,...xe(e)});class Zs extends Pe{_parse(e){if(e.data!==this._def.value){const i=this._getOrReturnCtx(e);return G(i,{received:i.data,code:W.invalid_literal,expected:this._def.value}),ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}Zs.create=(t,e)=>new Zs({value:t,typeName:fe.ZodLiteral,...xe(e)});function r0(t,e){return new Hn({values:t,typeName:fe.ZodEnum,...xe(e)})}class Hn extends Pe{_parse(e){if(typeof e.data!="string"){const i=this._getOrReturnCtx(e),s=this._def.values;return G(i,{expected:Le.joinValues(s),received:i.parsedType,code:W.invalid_type}),ue}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const i=this._getOrReturnCtx(e),s=this._def.values;return G(i,{received:i.data,code:W.invalid_enum_value,options:s}),ue}return Nt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const i of this._def.values)e[i]=i;return e}get Values(){const e={};for(const i of this._def.values)e[i]=i;return e}get Enum(){const e={};for(const i of this._def.values)e[i]=i;return e}extract(e,i=this._def){return Hn.create(e,{...this._def,...i})}exclude(e,i=this._def){return Hn.create(this.options.filter(s=>!e.includes(s)),{...this._def,...i})}}Hn.create=r0;class Us extends Pe{_parse(e){const i=Le.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==J.string&&s.parsedType!==J.number){const a=Le.objectValues(i);return G(s,{expected:Le.joinValues(a),received:s.parsedType,code:W.invalid_type}),ue}if(this._cache||(this._cache=new Set(Le.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=Le.objectValues(i);return G(s,{received:s.data,code:W.invalid_enum_value,options:a}),ue}return Nt(e.data)}get enum(){return this._def.values}}Us.create=(t,e)=>new Us({values:t,typeName:fe.ZodNativeEnum,...xe(e)});class qi extends Pe{unwrap(){return this._def.type}_parse(e){const{ctx:i}=this._processInputParams(e);if(i.parsedType!==J.promise&&i.common.async===!1)return G(i,{code:W.invalid_type,expected:J.promise,received:i.parsedType}),ue;const s=i.parsedType===J.promise?i.data:Promise.resolve(i.data);return Nt(s.then(a=>this._def.type.parseAsync(a,{path:i.path,errorMap:i.common.contextualErrorMap})))}}qi.create=(t,e)=>new qi({type:t,typeName:fe.ZodPromise,...xe(e)});class an extends Pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:i,ctx:s}=this._processInputParams(e),a=this._def.effect||null,o={addIssue:u=>{G(s,u),u.fatal?i.abort():i.dirty()},get path(){return s.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const u=a.transform(s.data,o);if(s.common.async)return Promise.resolve(u).then(async d=>{if(i.value==="aborted")return ue;const f=await this._def.schema._parseAsync({data:d,path:s.path,parent:s});return f.status==="aborted"?ue:f.status==="dirty"||i.value==="dirty"?Ii(f.value):f});{if(i.value==="aborted")return ue;const d=this._def.schema._parseSync({data:u,path:s.path,parent:s});return d.status==="aborted"?ue:d.status==="dirty"||i.value==="dirty"?Ii(d.value):d}}if(a.type==="refinement"){const u=d=>{const f=a.refinement(d,o);if(s.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(s.common.async===!1){const d=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return d.status==="aborted"?ue:(d.status==="dirty"&&i.dirty(),u(d.value),{status:i.value,value:d.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(d=>d.status==="aborted"?ue:(d.status==="dirty"&&i.dirty(),u(d.value).then(()=>({status:i.value,value:d.value}))))}if(a.type==="transform")if(s.common.async===!1){const u=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!fi(u))return ue;const d=a.transform(u.value,o);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:i.value,value:d}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(u=>fi(u)?Promise.resolve(a.transform(u.value,o)).then(d=>({status:i.value,value:d})):ue);Le.assertNever(a)}}an.create=(t,e,i)=>new an({schema:t,typeName:fe.ZodEffects,effect:e,...xe(i)});an.createWithPreprocess=(t,e,i)=>new an({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...xe(i)});class yn extends Pe{_parse(e){return this._getType(e)===J.undefined?Nt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yn.create=(t,e)=>new yn({innerType:t,typeName:fe.ZodOptional,...xe(e)});class qn extends Pe{_parse(e){return this._getType(e)===J.null?Nt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qn.create=(t,e)=>new qn({innerType:t,typeName:fe.ZodNullable,...xe(e)});class $s extends Pe{_parse(e){const{ctx:i}=this._processInputParams(e);let s=i.data;return i.parsedType===J.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:i.path,parent:i})}removeDefault(){return this._def.innerType}}$s.create=(t,e)=>new $s({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xe(e)});class Ws extends Pe{_parse(e){const{ctx:i}=this._processInputParams(e),s={...i,common:{...i.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ds(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new It(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new It(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Ws.create=(t,e)=>new Ws({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xe(e)});class ca extends Pe{_parse(e){if(this._getType(e)!==J.nan){const s=this._getOrReturnCtx(e);return G(s,{code:W.invalid_type,expected:J.nan,received:s.parsedType}),ue}return{status:"valid",value:e.data}}}ca.create=t=>new ca({typeName:fe.ZodNaN,...xe(t)});const xA=Symbol("zod_brand");class cc extends Pe{_parse(e){const{ctx:i}=this._processInputParams(e),s=i.data;return this._def.type._parse({data:s,path:i.path,parent:i})}unwrap(){return this._def.type}}class tr extends Pe{_parse(e){const{status:i,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?ue:o.status==="dirty"?(i.dirty(),Ii(o.value)):this._def.out._parseAsync({data:o.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?ue:a.status==="dirty"?(i.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(e,i){return new tr({in:e,out:i,typeName:fe.ZodPipeline})}}class Hs extends Pe{_parse(e){const i=this._def.innerType._parse(e),s=a=>(fi(a)&&(a.value=Object.freeze(a.value)),a);return Ds(i)?i.then(a=>s(a)):s(i)}unwrap(){return this._def.innerType}}Hs.create=(t,e)=>new Hs({innerType:t,typeName:fe.ZodReadonly,...xe(e)});function _h(t,e){const i=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof i=="string"?{message:i}:i}function uc(t,e={},i){return t?Hi.create().superRefine((s,a)=>{const o=t(s);if(o instanceof Promise)return o.then(u=>{if(!u){const d=_h(e,s),f=d.fatal??i??!0;a.addIssue({code:"custom",...d,fatal:f})}});if(!o){const u=_h(e,s),d=u.fatal??i??!0;a.addIssue({code:"custom",...u,fatal:d})}}):Hi.create()}const _A={object:Xe.lazycreate};var fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));const bA=(t,e={message:`Input not instance of ${t.name}`})=>uc(i=>i instanceof t,e),mn=nn.create,Ca=$n.create,wA=ca.create,TA=Wn.create,ka=Rs.create,SA=mi.create,PA=aa.create,NA=Is.create,a0=Os.create,ua=Hi.create,jA=ui.create,CA=Rn.create,kA=oa.create,o0=rn.create,nr=Xe.create,AA=Xe.strictCreate,dc=Vs.create,LA=ja.create,EA=Bs.create,MA=xn.create,l0=Fs.create,DA=la.create,RA=pi.create,IA=Bi.create,OA=zs.create,VA=Zs.create,BA=Hn.create,FA=Us.create,zA=qi.create,bh=an.create,ZA=yn.create,UA=qn.create,$A=an.createWithPreprocess,WA=tr.create,HA=()=>mn().optional(),qA=()=>Ca().optional(),KA=()=>ka().optional(),GA={string:t=>nn.create({...t,coerce:!0}),number:t=>$n.create({...t,coerce:!0}),boolean:t=>Rs.create({...t,coerce:!0}),bigint:t=>Wn.create({...t,coerce:!0}),date:t=>mi.create({...t,coerce:!0})},XA=ue,YA=Object.freeze(Object.defineProperty({__proto__:null,BRAND:xA,DIRTY:Ii,EMPTY_PATH:Yk,INVALID:ue,NEVER:XA,OK:Nt,ParseStatus:Tt,Schema:Pe,ZodAny:Hi,ZodArray:rn,ZodBigInt:Wn,ZodBoolean:Rs,ZodBranded:cc,ZodCatch:Ws,ZodDate:mi,ZodDefault:$s,ZodDiscriminatedUnion:ja,ZodEffects:an,ZodEnum:Hn,ZodError:It,get ZodFirstPartyTypeKind(){return fe},ZodFunction:Bi,ZodIntersection:Bs,ZodIssueCode:W,ZodLazy:zs,ZodLiteral:Zs,ZodMap:la,ZodNaN:ca,ZodNativeEnum:Us,ZodNever:Rn,ZodNull:Os,ZodNullable:qn,ZodNumber:$n,ZodObject:Xe,ZodOptional:yn,ZodParsedType:J,ZodPipeline:tr,ZodPromise:qi,ZodReadonly:Hs,ZodRecord:Fs,ZodSchema:Pe,ZodSet:pi,ZodString:nn,ZodSymbol:aa,ZodTransformer:an,ZodTuple:xn,ZodType:Pe,ZodUndefined:Is,ZodUnion:Vs,ZodUnknown:ui,ZodVoid:oa,addIssueToContext:G,any:ua,array:o0,bigint:TA,boolean:ka,coerce:GA,custom:uc,date:SA,datetimeRegex:s0,defaultErrorMap:Wi,discriminatedUnion:LA,effect:bh,enum:BA,function:IA,getErrorMap:sa,getParsedType:An,instanceof:bA,intersection:EA,isAborted:ol,isAsync:Ds,isDirty:ll,isValid:fi,late:_A,lazy:OA,literal:VA,makeIssue:ra,map:DA,nan:wA,nativeEnum:FA,never:CA,null:a0,nullable:UA,number:Ca,object:nr,get objectUtil(){return al},oboolean:KA,onumber:qA,optional:ZA,ostring:HA,pipeline:WA,preprocess:$A,promise:zA,quotelessJson:Gk,record:l0,set:RA,setErrorMap:Xk,strictObject:AA,string:mn,symbol:PA,transformer:bh,tuple:MA,undefined:NA,union:dc,unknown:jA,get util(){return Le},void:kA},Symbol.toStringTag,{value:"Module"})),Ge={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function st(t,e){return e.includes(t.columnType)}function QA(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const JA=dc([mn(),Ca(),ka(),a0()]),eL=dc([JA,l0(ua()),o0(ua())]),tL=uc(t=>t instanceof Buffer);function c0(t,e){const i=(e==null?void 0:e.zodInstance)??YA,s=(e==null?void 0:e.coerce)??{};let a;return QA(t)&&(a=t.enumValues.length?i.enum(t.enumValues):i.string()),a||(st(t,["PgGeometry","PgPointTuple"])?a=i.tuple([i.number(),i.number()]):st(t,["PgGeometryObject","PgPointObject"])?a=i.object({x:i.number(),y:i.number()}):st(t,["PgHalfVector","PgVector"])?(a=i.array(i.number()),a=t.dimensions?a.length(t.dimensions):a):st(t,["PgLine"])?a=i.tuple([i.number(),i.number(),i.number()]):st(t,["PgLineABC"])?a=i.object({a:i.number(),b:i.number(),c:i.number()}):st(t,["PgArray"])?(a=i.array(c0(t.baseColumn,i)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=i.array(i.any()):t.dataType==="number"?a=nL(t,i,s):t.dataType==="bigint"?a=iL(t,i,s):t.dataType==="boolean"?a=s===!0||s.boolean?i.coerce.boolean():i.boolean():t.dataType==="date"?a=s===!0||s.date?i.coerce.date():i.date():t.dataType==="string"?a=sL(t,i,s):t.dataType==="json"?a=eL:t.dataType==="custom"?a=i.any():t.dataType==="buffer"&&(a=tL)),a||(a=i.any()),a}function nL(t,e,i){let s=t.getSQLType().includes("unsigned"),a,o,u=!1;st(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=s?0:Ge.INT8_MIN,o=s?Ge.INT8_UNSIGNED_MAX:Ge.INT8_MAX,u=!0):st(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=s?0:Ge.INT16_MIN,o=s?Ge.INT16_UNSIGNED_MAX:Ge.INT16_MAX,u=!0):st(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=s?0:Ge.INT24_MIN,o=s?Ge.INT24_UNSIGNED_MAX:Ge.INT24_MAX,u=st(t,["MySqlMediumInt","SingleStoreMediumInt"])):st(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=s?0:Ge.INT32_MIN,o=s?Ge.INT32_UNSIGNED_MAX:Ge.INT32_MAX,u=!0):st(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=s?0:Ge.INT48_MIN,o=s?Ge.INT48_UNSIGNED_MAX:Ge.INT48_MAX):st(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(s=s||st(t,["MySqlSerial","SingleStoreSerial"]),a=s?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,u=!0):st(t,["MySqlYear","SingleStoreYear"])?(a=1901,o=2155,u=!0):(a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let d=i===!0||i!=null&&i.number?e.coerce.number():e.number();return d=d.min(a).max(o),u?d.int():d}function iL(t,e,i){const s=t.getSQLType().includes("unsigned"),a=s?0n:Ge.INT64_MIN,o=s?Ge.INT64_UNSIGNED_MAX:Ge.INT64_MAX;return(i===!0||i!=null&&i.bigint?e.coerce.bigint():e.bigint()).min(a).max(o)}function sL(t,e,i){if(st(t,["PgUUID"]))return e.string().uuid();let s,a,o=!1;st(t,["PgVarchar","SQLiteText"])?s=t.length:st(t,["MySqlVarChar","SingleStoreVarChar"])?s=t.length??Ge.INT16_UNSIGNED_MAX:st(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?s=Ge.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?s=Ge.INT24_UNSIGNED_MAX:t.textType==="text"?s=Ge.INT16_UNSIGNED_MAX:s=Ge.INT8_UNSIGNED_MAX),st(t,["PgChar","MySqlChar","SingleStoreChar"])&&(s=t.length,o=!0),st(t,["PgBinaryVector"])&&(a=/^[01]+$/,s=t.dimensions);let u=i===!0||i!=null&&i.string?e.coerce.string():e.string();return u=a?u.regex(a):u,s&&o?u.length(s):s?u.max(s):u}function u0(t){return Px(t)?vk(t):xk(t)}function d0(t,e,i,s){const a={};for(const[o,u]of Object.entries(t)){if(!gt(u,$i)&&!gt(u,dt)&&!gt(u,dt.Aliased)&&typeof u=="object"){const y=Px(u)||yk(u)?u0(u):u;a[o]=d0(y,e[o]??{},i,s);continue}const d=e[o];if(d!==void 0&&typeof d!="function"){a[o]=d;continue}const f=gt(u,$i)?u:void 0,p=f?c0(f,s):ua(),g=typeof d=="function"?d(p):p;i.never(f)||(a[o]=g,f&&(i.nullable(f)&&(a[o]=a[o].nullable()),i.optional(f)&&(a[o]=a[o].optional())))}return nr(a)}const rL={never:t=>{var e,i;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((i=t==null?void 0:t.generatedIdentity)==null?void 0:i.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},hc=(t,e)=>{const i=u0(t);return d0(i,{},rL)},fc=lc("users",{id:ci("id").primaryKey().default(hi`gen_random_uuid()`),name:Dt("name").notNull(),email:Dt("email").notNull().unique(),phone:Dt("phone"),country:Dt("country"),isVerified:na("is_verified").default(!1),riskLevel:Dt("risk_level").default("low"),deviceFingerprint:sl("device_fingerprint"),behaviorProfile:sl("behavior_profile"),isAdmin:na("is_admin").default(!1),createdAt:Ms("created_at").defaultNow(),lastLogin:Ms("last_login")}),h0=lc("transactions",{id:ci("id").primaryKey().default(hi`gen_random_uuid()`),userId:ci("user_id").references(()=>fc.id).notNull(),type:Dt("type").notNull(),amount:il("amount").notNull(),recipient:Dt("recipient"),description:Dt("description"),riskScore:il("risk_score").default(0),status:Dt("status").default("completed"),createdAt:Ms("created_at").defaultNow()}),aL=lc("fraud_alerts",{id:ci("id").primaryKey().default(hi`gen_random_uuid()`),userId:ci("user_id").references(()=>fc.id).notNull(),transactionId:ci("transaction_id").references(()=>h0.id),alertType:Dt("alert_type").notNull(),severity:Dt("severity").notNull(),description:Dt("description").notNull(),isResolved:na("is_resolved").default(!1),createdAt:Ms("created_at").defaultNow()});hc(fc).omit({id:!0,createdAt:!0,lastLogin:!0});hc(h0).omit({id:!0,createdAt:!0});hc(aL).omit({id:!0,createdAt:!0});const oL=nr({name:mn().min(2,"Name must be at least 2 characters"),email:mn().email("Please enter a valid email address"),phone:mn().min(10,"Please enter a valid phone number"),country:mn().min(2,"Please select a country"),agreeToTerms:ka().refine(t=>t===!0,"You must agree to the terms")}),lL=nr({recipient:mn().email("Please enter a valid email address"),amount:Ca().min(.01,"Amount must be greater than 0"),description:mn().optional()});nr({email:mn().email("Please enter a valid email address")});const f0=[{code:"IN",name:"India",currency:"INR",locale:"en-IN",symbol:"₹"},{code:"US",name:"United States",currency:"USD",locale:"en-US",symbol:"$"},{code:"UK",name:"United Kingdom",currency:"GBP",locale:"en-GB",symbol:"£"},{code:"CA",name:"Canada",currency:"CAD",locale:"en-CA",symbol:"CA$"},{code:"DE",name:"Germany",currency:"EUR",locale:"de-DE",symbol:"€"},{code:"FR",name:"France",currency:"EUR",locale:"fr-FR",symbol:"€"},{code:"AU",name:"Australia",currency:"AUD",locale:"en-AU",symbol:"A$"},{code:"JP",name:"Japan",currency:"JPY",locale:"ja-JP",symbol:"¥"},{code:"BR",name:"Brazil",currency:"BRL",locale:"pt-BR",symbol:"R$"},{code:"CN",name:"China",currency:"CNY",locale:"zh-CN",symbol:"¥"}];function cL(){const[,t]=Kn(),{toast:e}=gi(),i=mx({resolver:gx(oL),defaultValues:{name:"",email:"",phone:"",country:"",agreeToTerms:!1}}),s=di({mutationFn:async o=>await(await sn("POST","/api/auth/register",o)).json(),onSuccess:o=>{localStorage.setItem("securebank_pending_email",i.getValues("email")),e({title:"Registration Successful",description:"Please check your email to verify your account."}),t("/verify-email")},onError:o=>{var u;if(console.log("Registration error object:",o),o&&o.detail&&typeof o.detail=="object"&&o.detail.message==="User already exists."){const{verified:d,onboarding_complete:f}=o.detail;if(d){if(d&&!f){e({title:"Complete Onboarding",description:"Please finish onboarding to continue."}),t("/onboarding");return}else if(d&&f){e({title:"Account Exists",description:"Please log in to your account."}),t("/login");return}}else{e({title:"Email Verification Required",description:"Please verify your email to continue."}),t("/verify-email");return}}e({title:"Registration Failed",description:((u=o==null?void 0:o.detail)==null?void 0:u.message)||(o==null?void 0:o.message)||"Something went wrong",variant:"destructive"})}}),a=o=>{s.mutate(o)};return c.jsx("section",{className:"py-12 min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md mx-auto px-4",children:c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:c.jsxs(De,{className:"banking-card",children:[c.jsxs(Je,{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx(bt,{href:"/",children:c.jsxs(he,{variant:"ghost",size:"sm",children:[c.jsx(Bg,{className:"h-4 w-4 mr-2"}),"Back"]})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-xs font-bold",children:"1"})}),c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-gray-500 text-xs font-bold",children:"2"})}),c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-gray-500 text-xs font-bold",children:"3"})})]})]}),c.jsx(et,{className:"text-2xl font-bold text-gray-900",children:"Create Your Account"}),c.jsx("p",{className:"text-gray-600",children:"Join the future of secure banking"})]}),c.jsxs(Ie,{children:[c.jsxs("form",{onSubmit:i.handleSubmit(a),className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx(hn,{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),c.jsx(Mn,{id:"name",...i.register("name"),placeholder:"Enter your full name",className:"w-full"}),i.formState.errors.name&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.formState.errors.name.message})]}),c.jsxs("div",{children:[c.jsx(hn,{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),c.jsx(Mn,{id:"email",type:"email",...i.register("email"),placeholder:"Enter your email",className:"w-full"}),i.formState.errors.email&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.formState.errors.email.message})]}),c.jsxs("div",{children:[c.jsx(hn,{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),c.jsx(Mn,{id:"phone",type:"tel",...i.register("phone"),placeholder:"Enter your phone number",className:"w-full"}),i.formState.errors.phone&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.formState.errors.phone.message})]}),c.jsxs("div",{children:[c.jsx(hn,{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),c.jsxs(Or,{onValueChange:o=>i.setValue("country",o),children:[c.jsx(Ts,{className:"w-full",children:c.jsx(Vr,{placeholder:"Select your country"})}),c.jsx(Ss,{children:f0.map(o=>c.jsx(kt,{value:o.code,children:o.name},o.code))})]}),i.formState.errors.country&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.formState.errors.country.message})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(rx,{id:"terms",checked:i.watch("agreeToTerms"),onCheckedChange:o=>i.setValue("agreeToTerms",!!o)}),c.jsxs(hn,{htmlFor:"terms",className:"text-sm text-gray-600 leading-relaxed",children:["I agree to the"," ",c.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 underline",children:"Terms of Service"})," ","and"," ",c.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 underline",children:"Privacy Policy"})]})]}),i.formState.errors.agreeToTerms&&c.jsx("p",{className:"text-sm text-red-600",children:i.formState.errors.agreeToTerms.message}),c.jsx(he,{type:"submit",className:"w-full banking-button-primary",disabled:s.isPending,children:s.isPending?"Creating Account...":"Create Account"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",c.jsx(bt,{href:"/login",className:"text-primary hover:text-primary/80 font-medium",children:"Sign in"})]})})]})]})})})})}function uL(){const[,t]=Kn(),[e,i]=_.useState(""),{toast:s}=gi();_.useEffect(()=>{const u=localStorage.getItem("securebank_pending_email");u?i(u):t("/register")},[t]);const a=di({mutationFn:async()=>await(await sn("POST","/api/auth/verify-email",{email:e})).json(),onSuccess:()=>{s({title:"Email Verified!",description:"Your email has been successfully verified."}),t("/onboarding")},onError:u=>{s({title:"Verification Failed",description:u.message||"Something went wrong",variant:"destructive"})}}),o=()=>{a.mutate()};return c.jsx("section",{className:"py-20 min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"max-w-md mx-auto px-4",children:c.jsx(Ce.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:c.jsxs(De,{className:"banking-card text-center",children:[c.jsxs(Je,{children:[c.jsxs("div",{className:"flex items-center justify-center mb-4",children:[c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center mr-2",children:c.jsx("span",{className:"text-gray-500 text-xs font-bold",children:"1"})}),c.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center mr-2",children:c.jsx("span",{className:"text-white text-xs font-bold",children:"2"})}),c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-gray-500 text-xs font-bold",children:"3"})})]}),c.jsx(Ce.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx(Fg,{className:"h-8 w-8 text-primary"})}),c.jsx(et,{className:"text-2xl font-bold text-gray-900 mb-4",children:"Check Your Email"}),c.jsxs("p",{className:"text-gray-600 mb-8",children:["We've sent a verification link to"," ",c.jsx("span",{className:"font-medium text-gray-900",children:e}),". Click the link to complete your registration."]})]}),c.jsxs(Ie,{className:"space-y-4",children:[c.jsx(he,{onClick:o,className:"w-full banking-button-primary",disabled:a.isPending,children:a.isPending?c.jsxs(c.Fragment,{children:[c.jsx(wu,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):c.jsxs(c.Fragment,{children:[c.jsx(zn,{className:"mr-2 h-4 w-4"}),"Email Verified - Continue"]})}),c.jsxs(he,{variant:"outline",className:"w-full banking-button-secondary",onClick:()=>{s({title:"Verification email sent",description:"Please check your inbox."})},children:[c.jsx(wu,{className:"mr-2 h-4 w-4"}),"Resend Verification Email"]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email? Check your spam folder or"," ",c.jsx("button",{onClick:()=>t("/register"),className:"text-primary hover:text-primary/80 underline",children:"try a different email address"})]})})]})]})})})})}const mc=_.forwardRef(({className:t,...e},i)=>c.jsx("textarea",{className:_e("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:i,...e}));mc.displayName="Textarea";var pc="Progress",gc=100,[dL,L1]=fa(pc),[hL,fL]=dL(pc),m0=_.forwardRef((t,e)=>{const{__scopeProgress:i,value:s=null,max:a,getValueLabel:o=mL,...u}=t;(a||a===0)&&!wh(a)&&console.error(pL(`${a}`,"Progress"));const d=wh(a)?a:gc;s!==null&&!Th(s,d)&&console.error(gL(`${s}`,"Progress"));const f=Th(s,d)?s:null,p=da(f)?o(f,d):void 0;return c.jsx(hL,{scope:i,value:f,max:d,children:c.jsx(Kt.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":da(f)?f:void 0,"aria-valuetext":p,role:"progressbar","data-state":y0(f,d),"data-value":f??void 0,"data-max":d,...u,ref:e})})});m0.displayName=pc;var p0="ProgressIndicator",g0=_.forwardRef((t,e)=>{const{__scopeProgress:i,...s}=t,a=fL(p0,i);return c.jsx(Kt.div,{"data-state":y0(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:e})});g0.displayName=p0;function mL(t,e){return`${Math.round(t/e*100)}%`}function y0(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function da(t){return typeof t=="number"}function wh(t){return da(t)&&!isNaN(t)&&t>0}function Th(t,e){return da(t)&&!isNaN(t)&&t<=e&&t>=0}function pL(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gc}\`.`}function gL(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gc} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var v0=m0,yL=g0;const Fr=_.forwardRef(({className:t,value:e,...i},s)=>c.jsx(v0,{ref:s,className:_e("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:c.jsx(yL,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Fr.displayName=v0.displayName;function vL(){const[t,e]=_.useState({browser:"Unknown",os:"Unknown",screen:"Unknown",timezone:"Unknown",userAgent:"",language:"en-US",platform:"Unknown",cookieEnabled:!1,javaEnabled:!1});return _.useEffect(()=>{const i=()=>{var p,g,y,x;const f=navigator.userAgent;return f.includes("Chrome")&&!f.includes("Edg")?`Chrome ${((p=f.match(/Chrome\/(\d+)/))==null?void 0:p[1])||"Unknown"}`:f.includes("Firefox")?`Firefox ${((g=f.match(/Firefox\/(\d+)/))==null?void 0:g[1])||"Unknown"}`:f.includes("Safari")&&!f.includes("Chrome")?`Safari ${((y=f.match(/Version\/(\d+)/))==null?void 0:y[1])||"Unknown"}`:f.includes("Edg")?`Edge ${((x=f.match(/Edg\/(\d+)/))==null?void 0:x[1])||"Unknown"}`:"Unknown Browser"},s=()=>{var p,g,y,x,b,P;const f=navigator.userAgent;if(f.includes("Windows NT")){const T=(p=f.match(/Windows NT (\d+\.\d+)/))==null?void 0:p[1];return{"10.0":"Windows 10/11","6.3":"Windows 8.1","6.2":"Windows 8","6.1":"Windows 7"}[T||""]||"Windows"}else{if(f.includes("Mac OS X"))return`macOS ${((y=(g=f.match(/Mac OS X (\d+_\d+)/))==null?void 0:g[1])==null?void 0:y.replace(/_/g,"."))||""}`;if(f.includes("Linux"))return"Linux";if(f.includes("Android"))return`Android ${((x=f.match(/Android (\d+\.\d+)/))==null?void 0:x[1])||""}`;if(f.includes("iPhone")||f.includes("iPad"))return`iOS ${((P=(b=f.match(/OS (\d+_\d+)/))==null?void 0:b[1])==null?void 0:P.replace(/_/g,"."))||""}`}return"Unknown OS"},a=()=>`${screen.width}x${screen.height}`,o=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return"Unknown"}},u=()=>{try{return!1}catch{return!1}},d={browser:i(),os:s(),screen:a(),timezone:o(),userAgent:navigator.userAgent,language:navigator.language||"en-US",platform:navigator.platform||"Unknown",cookieEnabled:navigator.cookieEnabled,javaEnabled:u()};e(d)},[]),t}function xL(t){const[e,i]=_.useState(""),[s,a]=_.useState(null),[o,u]=_.useState(0),[d,f]=_.useState(0),[p,g]=_.useState([]),[y,x]=_.useState(null),b=(()=>{if(!s||e.length===0)return 0;const R=(Date.now()-s)/1e3/60,$=e.trim().split(/\s+/).length;return Math.round($/R)||0})(),P=(()=>{if(e.length===0)return 0;let R=0;const $=Math.min(e.length,t.length);for(let O=0;O<$;O++)e[O]===t[O]&&R++;return Math.round(R/e.length*100)||0})(),T=Math.min(e.length/t.length*100,100),A=e.length>0&&e.length>=t.length*.8,D=_.useCallback(R=>{const $=Date.now();if(!s&&R.length>0&&a($),y){const oe=$-y;g(se=>[...se,oe])}x($),R.length>e.length&&u(oe=>oe+1);let O=0;const X=Math.min(R.length,t.length);for(let oe=0;oe<X;oe++)R[oe]!==t[oe]&&O++;f(O),i(R)},[e,t,s,y]),j=_.useCallback(()=>{i(""),a(null),u(0),f(0),g([]),x(null)},[]);return{text:e,setText:D,wpm:b,accuracy:P,typingProgress:T,keystrokes:o,errors:d,isComplete:A,startTime:s,keystrokeTiming:p,reset:j}}const yc=Aw,_L=Cw,x0=_.forwardRef(({className:t,...e},i)=>c.jsx(kg,{ref:i,className:_e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));x0.displayName=kg.displayName;const Aa=_.forwardRef(({className:t,children:e,...i},s)=>c.jsxs(_L,{children:[c.jsx(x0,{}),c.jsxs(Ag,{ref:s,className:_e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[e,c.jsxs(kw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(ma,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Aa.displayName=Ag.displayName;const La=_.forwardRef(({className:t,...e},i)=>c.jsx(Lg,{ref:i,className:_e("text-lg font-semibold leading-none tracking-tight",t),...e}));La.displayName=Lg.displayName;const Ea=_.forwardRef(({className:t,...e},i)=>c.jsx(Eg,{ref:i,className:_e("text-sm text-muted-foreground",t),...e}));Ea.displayName=Eg.displayName;const Sh="The quick brown fox jumps over the lazy dog and runs through the forest.";function Ro(t){return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function bL(){var I,K,q;const[,t]=Kn(),[e,i]=_.useState(0),[s,a]=_.useState(0),[o,u]=_.useState(!1),[d,f]=_.useState({}),[p,g]=_.useState(!1),[y,x]=_.useState(!1),[b,P]=_.useState(!1),[T,A]=_.useState(!1),[D,j]=_.useState(!1),[R,$]=_.useState(!1),O=y||b,X=_.useRef(null),oe=_.useRef(null);_.useRef(null);const se=_.useRef(null),pe=vL(),{toast:ge}=gi(),{text:z,setText:H,wpm:re,accuracy:Z,typingProgress:Oe,isComplete:Te}=xL(Sh);_.useEffect(()=>{const B=[p,O,T,D,R].filter(Boolean).length,te=Math.round(B/5*100);a(te)},[p,O,T,D,R]),_.useEffect(()=>{Te&&!p&&(g(!0),f(E=>({...E,typingAnalysis:{wpm:re,accuracy:Z,keystrokeTimings:[]}})))},[Te,re,Z]);const ye=E=>{if(!X.current)return;const B=X.current.getBoundingClientRect(),te=E.clientX-B.left,me=E.clientY-B.top;f(le=>{const we=le.mouseMovement||{totalDistance:0,avgSpeed:0,clicks:0,trajectory:[]},ze=[...we.trajectory,{x:te,y:me,timestamp:Date.now()}];return ze.length>100&&ze.shift(),{...le,mouseMovement:{...we,trajectory:ze}}})},Y=()=>{var E;f(B=>{var te;return{...B,mouseMovement:{...B.mouseMovement,clicks:(((te=B.mouseMovement)==null?void 0:te.clicks)||0)+1}}}),(((E=d.mouseMovement)==null?void 0:E.clicks)||0)>=10&&!y&&!b&&(x(!0),P(!1),ge({title:"Mouse Activity Complete",description:"Mouse movement pattern recorded successfully. Touch not required."}))},at=E=>{const B=E.touches,te="force"in B[0]?B[0].force:.5;f(me=>{var le,we;return{...me,touchInteraction:{touchPoints:B.length,pressure:[...((le=me.touchInteraction)==null?void 0:le.pressure)||[],te],gestures:[...((we=me.touchInteraction)==null?void 0:we.gestures)||[],"touch"]}}})},ne=E=>{var B,te;f(me=>{var le;return{...me,touchInteraction:{...me.touchInteraction,gestures:[...((le=me.touchInteraction)==null?void 0:le.gestures)||[],"swipe"]}}}),(((te=(B=d.touchInteraction)==null?void 0:B.gestures)==null?void 0:te.length)||0)>=20&&!b&&!y&&(P(!0),x(!1),ge({title:"Touch Activity Complete",description:"Touch interaction patterns recorded. Mouse not required."}))},Re=E=>{const B=E.currentTarget.scrollTop;f(te=>{var me,le;return{...te,scrollBehavior:{totalScroll:B,scrollSpeed:Math.abs(B-(((me=te.scrollBehavior)==null?void 0:me.totalScroll)||0)),scrollPattern:[...((le=te.scrollBehavior)==null?void 0:le.scrollPattern)||[],B]}}}),B>300&&!T&&(A(!0),ge({title:"Scroll Activity Complete",description:"Scroll behavior pattern recorded."}))},[We,He]=_.useState(null),[Ve,ke]=_.useState({target1:"",target2:"",target3:""}),[U,Ne]=_.useState(0),Fe=(E,B)=>{He(B),Ne(Date.now())},Be=(E,B)=>{if(E.preventDefault(),!We)return;const te=Date.now()-U;ke(we=>({...we,[B]:We})),f(we=>{var ze;return{...we,dragDrop:{attempts:(((ze=we.dragDrop)==null?void 0:ze.attempts)||0)+1,accuracy:B===`target${We.slice(-1)}`?100:0,completionTime:te}}}),He(null);const me={...Ve,[B]:We};Object.entries(me).filter(([we,ze])=>we===`target${ze.slice(-1)}`).length===3&&!D&&(j(!0),ge({title:"Drag & Drop Complete",description:"Drag and drop activity completed successfully."}))},qe=()=>{if(!navigator.geolocation){ge({title:"Location Not Supported",description:"Your device doesn't support location services.",variant:"destructive"});return}navigator.geolocation.getCurrentPosition(E=>{const B={latitude:E.coords.latitude,longitude:E.coords.longitude,accuracy:E.coords.accuracy,timestamp:Date.now()};f(te=>({...te,locationData:B})),$(!0),ge({title:"Location Access Granted",description:"Location data captured for security profiling."})},E=>{ge({title:"Location Access Required",description:"Location access is mandatory for account security. Please enable location services.",variant:"destructive"}),u(!0)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})};_.useEffect(()=>{qe()},[]);const tt=di({mutationFn:async()=>{const E=localStorage.getItem("securebank_pending_email");if(!E)throw new Error("No pending registration found");return await(await sn("POST","/api/auth/complete-onboarding",{email:E,deviceFingerprint:pe,behaviorProfile:{...d,deviceInfo:pe,completedActivities:{typing:p,mouse:y,touch:b,scroll:T,dragDrop:D,location:R}}})).json()},onSuccess:E=>{localStorage.removeItem("securebank_pending_email"),localStorage.setItem("securebank_user",JSON.stringify(E.user)),ge({title:"Behavioral Profile Complete!",description:"Your comprehensive security profile has been created."}),t("/dashboard")},onError:E=>{ge({title:"Profile Creation Failed",description:E.message||"Please complete all activities first.",variant:"destructive"})}}),vt=()=>{if(s<100){ge({title:"Complete All Activities",description:"Please finish all behavioral activities before proceeding.",variant:"destructive"});return}tt.mutate()},[jt,Vt]=_.useState(!1),[Bt,bn]=_.useState(!1),[Et,Ft]=_.useState(null),[zt,S]=_.useState(!1),k=[{name:"Typing Analysis",completed:p,icon:Tu},{name:"Mouse or Touch",completed:O,icon:y?co:uo},{name:"Scroll Behavior",completed:T,icon:Sr},{name:"Drag & Drop",completed:D,icon:Sr},{name:"Location Services",completed:R,icon:ho}];return c.jsxs("section",{className:"py-8 min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4",children:c.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"flex items-center justify-center mb-6",children:[c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center mr-2",children:c.jsx("span",{className:"text-gray-500 text-xs",children:"1"})}),c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center mr-2",children:c.jsx("span",{className:"text-gray-500 text-xs",children:"2"})}),c.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-xs",children:"3"})})]}),c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Advanced Behavioral Profiling"}),c.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Complete all activities to create your comprehensive security profile"}),c.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:k.map((E,B)=>c.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full text-sm ${E.completed?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[c.jsx(E.icon,{className:"h-4 w-4 mr-1"}),E.name,E.completed&&c.jsx(zn,{className:"h-4 w-4 ml-1"})]},B))}),c.jsx(Fr,{value:s,className:"max-w-md mx-auto h-3 mb-2"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[s,"% Complete"]})]}),c.jsxs("div",{className:"grid lg:grid-cols-3 md:grid-cols-2 gap-6 mb-8",children:[c.jsx(Ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},children:c.jsxs(De,{className:`h-full ${p?"ring-2 ring-green-500":""}`,children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:c.jsx(Tu,{className:"h-5 w-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx(et,{className:"text-lg",children:"Typing Analysis"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Pattern recognition"})]})]})}),c.jsxs(Ie,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("p",{className:"text-gray-700 mb-3 p-3 bg-gray-50 rounded text-sm",children:['"',Sh,'"']}),c.jsx(mc,{value:z,onChange:E=>H(E.target.value),className:"w-full h-20 resize-none text-sm",placeholder:"Type the sentence above..."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsxs("span",{children:["Speed: ",re," WPM"]}),c.jsxs("span",{children:["Accuracy: ",Z,"%"]})]}),c.jsx(Fr,{value:Oe,className:"h-2"})]})]})]})}),c.jsx(Ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:c.jsxs(De,{className:`h-full ${y?"ring-2 ring-green-500":""}`,children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:c.jsx(co,{className:"h-5 w-5 text-purple-600"})}),c.jsxs("div",{children:[c.jsx(et,{className:"text-lg",children:"Mouse Movement"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Track cursor patterns"})]})]})}),c.jsx(Ie,{children:c.jsx("div",{ref:X,onMouseMove:ye,onClick:Y,className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-crosshair bg-gradient-to-br from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 transition-colors",children:c.jsxs("div",{className:"text-center",children:[c.jsx(co,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Move mouse and click here"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Clicks: ",((I=d.mouseMovement)==null?void 0:I.clicks)||0,"/10"]})]})})})]})}),c.jsx(Ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},children:c.jsxs(De,{className:`h-full ${b?"ring-2 ring-green-500":""}`,children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mr-3",children:c.jsx(uo,{className:"h-5 w-5 text-orange-600"})}),c.jsxs("div",{children:[c.jsx(et,{className:"text-lg",children:"Touch & Pressure"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Multi-touch gestures"})]})]})}),c.jsx(Ie,{children:c.jsx("div",{ref:se,onTouchStart:at,onTouchMove:ne,className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gradient-to-br from-orange-50 to-yellow-50 touch-manipulation",children:c.jsxs("div",{className:"text-center",children:[c.jsx(uo,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Touch and swipe here"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Gestures: ",((q=(K=d.touchInteraction)==null?void 0:K.gestures)==null?void 0:q.length)||0,"/20"]})]})})})]})}),c.jsx(Ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.4},children:c.jsxs(De,{className:`h-full ${T?"ring-2 ring-green-500":""}`,children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3",children:c.jsx(Sr,{className:"h-5 w-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx(et,{className:"text-lg",children:"Scroll Patterns"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Scroll behavior analysis"})]})]})}),c.jsx(Ie,{children:c.jsx("div",{ref:oe,onScroll:Re,className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg overflow-y-auto bg-gradient-to-b from-green-50 to-teal-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("p",{className:"text-sm",children:"Scroll down to analyze your scrolling pattern..."}),c.jsx("div",{className:"h-20 bg-green-100 rounded p-2",children:c.jsx("p",{className:"text-xs",children:"Scroll content area 1"})}),c.jsx("div",{className:"h-20 bg-green-200 rounded p-2",children:c.jsx("p",{className:"text-xs",children:"Scroll content area 2"})}),c.jsx("div",{className:"h-20 bg-green-300 rounded p-2",children:c.jsx("p",{className:"text-xs",children:"Scroll content area 3"})}),c.jsx("div",{className:"h-20 bg-green-400 rounded p-2",children:c.jsx("p",{className:"text-xs",children:"Scroll content area 4 - Keep scrolling!"})})]})})})]})}),c.jsx(Ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5},children:c.jsxs(De,{className:`h-full ${D?"ring-2 ring-green-500":""}`,children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:c.jsx(Sr,{className:"h-5 w-5 text-indigo-600"})}),c.jsxs("div",{children:[c.jsx(et,{className:"text-lg",children:"Drag & Drop"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Precision tracking"})]})]})}),c.jsx(Ie,{children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"flex gap-2 mb-3",children:["item1","item2","item3"].map(E=>c.jsx("div",{draggable:!0,onDragStart:B=>Fe(B,E),className:"px-3 py-2 bg-indigo-100 text-indigo-800 rounded-lg cursor-move text-sm hover:bg-indigo-200 transition-colors",children:E.replace("item","Item ")},E))}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["target1","target2","target3"].map(E=>c.jsx("div",{onDragOver:B=>B.preventDefault(),onDrop:B=>Be(B,E),className:`h-16 border-2 border-dashed rounded-lg flex items-center justify-center text-xs transition-colors ${Ve[E]?"border-green-500 bg-green-50":"border-gray-300 bg-gray-50"}`,children:Ve[E]||`Drop Zone ${E.slice(-1)}`},E))})]})})]})}),c.jsx(Ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.6},children:c.jsxs(De,{className:`h-full ${R?"ring-2 ring-green-500":"ring-2 ring-red-500"}`,children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${R?"bg-green-100":"bg-red-100"}`,children:c.jsx(ho,{className:`h-5 w-5 ${R?"text-green-600":"text-red-600"}`})}),c.jsxs("div",{children:[c.jsx(et,{className:"text-lg",children:"Location Access"}),c.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Required for Security"})]})]})}),c.jsx(Ie,{children:c.jsx("div",{className:"text-center space-y-4",children:R?c.jsxs("div",{className:"text-green-600",children:[c.jsx(zn,{className:"h-12 w-12 mx-auto mb-2"}),c.jsx("p",{className:"font-medium",children:"Location Captured"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Security profile enhanced"})]}):c.jsxs(c.Fragment,{children:[c.jsx(ho,{className:"h-12 w-12 mx-auto text-red-500 mb-2"}),c.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Location access is mandatory for fraud prevention and account security."}),c.jsx(he,{onClick:qe,className:"w-full bg-red-600 hover:bg-red-700 text-white",children:"Grant Location Access"}),o&&c.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Please enable location services to continue"})]})})})]})})]}),c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},className:"text-center",children:c.jsx(De,{className:"max-w-2xl mx-auto",children:c.jsxs(Ie,{className:"pt-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Behavioral Profile Status"}),c.jsx(Fr,{value:s,className:"w-full h-4 mb-2"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[s,"% of activities completed"]})]}),c.jsx(he,{onClick:vt,className:"w-full max-w-md mx-auto h-12 text-lg font-medium",disabled:s<100||tt.isPending,children:tt.isPending?"Creating Your Security Profile...":s<100?`Complete ${6-k.filter(E=>E.completed).length} More Activities`:"Create Security Profile & Continue"}),c.jsx("p",{className:"text-sm text-gray-500 mt-4",children:s<100?"All behavioral activities must be completed for maximum security.":"Your comprehensive behavioral profile is ready for creation!"})]})})})]})}),s===100&&!zt&&c.jsx(he,{variant:"outline",className:"w-full max-w-md mx-auto h-12 text-lg font-medium mt-4",onClick:()=>Vt(!0),disabled:Bt,children:"Register Biometric Device (Recommended)"}),c.jsx(yc,{open:jt,onOpenChange:Vt,children:c.jsxs(Aa,{children:[c.jsx(La,{children:"Register Biometric Device"}),c.jsx(Ea,{children:zt?c.jsx("div",{className:"text-green-600 font-medium",children:"Biometric device registered successfully! You can now use biometrics to log in."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-2",children:"For maximum security, register your device for biometric login (Face ID, Touch ID, Windows Hello, or security key)."}),Et&&c.jsx("div",{className:"text-red-600 text-xs mb-2",children:Et}),c.jsx(he,{disabled:Bt,onClick:async()=>{bn(!0),Ft(null);try{const E=localStorage.getItem("securebank_pending_email");if(!E)throw new Error("No pending registration found");const B=await sn("POST","/api/auth/webauthn/register/begin",{identifier:E}),{publicKey:te,challenge_id:me}=await B.json?await B.json():B;te.challenge=Uint8Array.from(atob(te.challenge),Xt=>Xt.charCodeAt(0)),te.user.id=Uint8Array.from(atob(te.user.id),Xt=>Xt.charCodeAt(0));const le=await navigator.credentials.create({publicKey:te});if(!le)throw new Error("Biometric registration failed or was cancelled.");const we=le,ze={id:we.id,type:we.type,rawId:Ro(we.rawId),response:{attestationObject:Ro(we.response.attestationObject),clientDataJSON:Ro(we.response.clientDataJSON)},authenticatorAttachment:we.authenticatorAttachment,transports:we.getTransports?we.getTransports():void 0},wn=await sn("POST","/api/auth/webauthn/register/complete",{identifier:E,credential:ze,challenge_id:me}),Gt=await wn.json?await wn.json():wn;if(Gt.success)S(!0),ge({title:"Biometric Registered",description:"You can now use biometrics to log in."});else throw new Error(Gt.message||"WebAuthn registration failed.")}catch(E){Ft(E.message||"WebAuthn registration failed")}bn(!1)},children:Bt?"Registering...":"Register Now"}),c.jsx(he,{variant:"ghost",className:"mt-2",onClick:()=>Vt(!1),disabled:Bt,children:"Skip for now"})]})})]})})]})}const wL=ga("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function qs({className:t,variant:e,...i}){return c.jsx("div",{className:_e(wL({variant:e}),t),...i})}const _0=_.createContext(void 0);function TL({children:t}){const[e,i]=_.useState(null),[s,a]=_.useState(!0),[,o]=Kn();_.useEffect(()=>{const p=localStorage.getItem("securebank_user");if(p)try{const g=JSON.parse(p);i(g)}catch(g){console.error("Failed to parse saved user data:",g),localStorage.removeItem("securebank_user")}a(!1)},[]);const f={user:e,login:p=>{i(p),localStorage.setItem("securebank_user",JSON.stringify(p))},logout:()=>{i(null),localStorage.removeItem("securebank_user"),localStorage.removeItem("securebank_pending_email"),o("/")},isLoading:s};return c.jsx(_0.Provider,{value:f,children:t})}function vi(){const t=_.useContext(_0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Ph(t){return function(i){const{user:s,isLoading:a}=vi(),[,o]=Kn();return _.useEffect(()=>{!a&&!s&&o("/login")},[s,a,o]),a?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):s?c.jsx(t,{...i}):null}}function SL(t){return function(i){const{user:s,isLoading:a}=vi(),[,o]=Kn();return _.useEffect(()=>{!a&&(!s||!s.isAdmin)&&o("/dashboard")},[s,a,o]),a?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!s||!s.isAdmin?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):c.jsx(t,{...i})}}function b0({isOpen:t,onClose:e}){const{user:i}=vi(),{toast:s}=gi(),a=Dg(),[o,u]=_.useState(null),d=mx({resolver:gx(lL),defaultValues:{recipient:"",amount:0,description:""}}),f=di({mutationFn:async T=>await(await sn("POST","/api/transactions",{...T,userId:i==null?void 0:i.id})).json(),onSuccess:T=>{u({riskScore:T.riskScore,status:T.transaction.status,message:p(T.riskScore,T.transaction.status)}),a.invalidateQueries({queryKey:["/api/transactions"]}),setTimeout(()=>{s({title:"Transfer Processed",description:p(T.riskScore,T.transaction.status)}),b()},3e3)},onError:T=>{s({title:"Transfer Failed",description:T.message||"Something went wrong",variant:"destructive"})}}),p=(T,A)=>A==="blocked"?"High risk transaction detected. Transfer blocked for manual review.":A==="pending"?"Medium risk detected. Additional verification required.":"Transfer approved and processed successfully!",g=T=>T<=30?"text-green-600":T<=60?"text-yellow-600":"text-red-600",y=T=>T<=30?"bg-green-100 border-green-200":T<=60?"bg-yellow-100 border-yellow-200":"bg-red-100 border-red-200",x=T=>T<=30?zn:T<=60?zg:Lr,b=()=>{d.reset(),u(null),e()},P=T=>{f.mutate(T)};return t?c.jsx(_y,{children:c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:c.jsx(Ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"w-full max-w-md",children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(et,{className:"text-lg font-semibold flex items-center",children:[c.jsx(Zw,{className:"mr-2 h-5 w-5 text-primary"}),"New Transfer"]}),c.jsx(he,{variant:"ghost",size:"sm",onClick:b,className:"text-gray-400 hover:text-gray-600",children:c.jsx(ma,{className:"h-4 w-4"})})]})}),c.jsx(Ie,{children:o?c.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[c.jsxs("div",{className:`p-4 rounded-lg border ${y(o.riskScore)}`,children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[(()=>{const T=x(o.riskScore);return c.jsx(T,{className:`h-5 w-5 ${g(o.riskScore)}`})})(),c.jsx("span",{className:`font-medium ${g(o.riskScore)}`,children:o.message})]})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Risk Score:"}),c.jsxs("span",{className:"font-medium",children:[o.riskScore,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${o.riskScore<=30?"bg-green-500":o.riskScore<=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o.riskScore}%`}})}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Status:"}),c.jsx(qs,{variant:o.status==="completed"?"default":o.status==="pending"?"secondary":"destructive",children:o.status.charAt(0).toUpperCase()+o.status.slice(1)})]})]})]}),c.jsx("div",{className:"text-center text-sm text-gray-500",children:"This modal will close automatically in a few seconds..."})]}):c.jsxs("form",{onSubmit:d.handleSubmit(P),className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(hn,{htmlFor:"recipient",className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient Email"}),c.jsx(Mn,{id:"recipient",type:"email",...d.register("recipient"),placeholder:"Enter recipient email",className:"w-full"}),d.formState.errors.recipient&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:d.formState.errors.recipient.message})]}),c.jsxs("div",{children:[c.jsx(hn,{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),c.jsx(Mn,{id:"amount",type:"number",step:"0.01",min:"0.01",...d.register("amount",{valueAsNumber:!0}),placeholder:"0.00",className:"w-full pl-8"})]}),d.formState.errors.amount&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:d.formState.errors.amount.message})]}),c.jsxs("div",{children:[c.jsx(hn,{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (Optional)"}),c.jsx(mc,{id:"description",...d.register("description"),placeholder:"Add a note for this transfer",className:"w-full resize-none",rows:3}),d.formState.errors.description&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:d.formState.errors.description.message})]}),c.jsxs("div",{className:"flex space-x-4 pt-4",children:[c.jsx(he,{type:"button",variant:"outline",onClick:b,className:"flex-1 banking-button-secondary",children:"Cancel"}),c.jsx(he,{type:"submit",className:"flex-1 banking-button-primary",disabled:f.isPending,children:f.isPending?"Processing...":"Send Transfer"})]})]})})]})})})}):null}function ki(t,e){const i=f0.find(s=>s.code===e);return i?t.toLocaleString(i.locale,{style:"currency",currency:i.currency}):t.toLocaleString("en-IN",{style:"currency",currency:"INR"})}function w0(t,e){const i=_.useRef(e);_.useEffect(function(){e!==i.current&&t.attributionControl!=null&&(i.current!=null&&t.attributionControl.removeAttribution(i.current),e!=null&&t.attributionControl.addAttribution(e)),i.current=e},[t,e])}function PL(t,e,i){e.center!==i.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==i.radius&&t.setRadius(e.radius)}const NL=1;function jL(t){return Object.freeze({__version:NL,map:t})}function CL(t,e){return Object.freeze({...t,...e})}const T0=_.createContext(null),S0=T0.Provider;function vc(){const t=_.useContext(T0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function kL(t){function e(i,s){const{instance:a,context:o}=t(i).current;return _.useImperativeHandle(s,()=>a),i.children==null?null:xt.createElement(S0,{value:o},i.children)}return _.forwardRef(e)}function AL(t){function e(i,s){const[a,o]=_.useState(!1),{instance:u}=t(i,o).current;_.useImperativeHandle(s,()=>u),_.useEffect(function(){a&&u.update()},[u,a,i.children]);const d=u._contentNode;return d?Lw.createPortal(i.children,d):null}return _.forwardRef(e)}function LL(t){function e(i,s){const{instance:a}=t(i).current;return _.useImperativeHandle(s,()=>a),null}return _.forwardRef(e)}function xc(t,e){const i=_.useRef();_.useEffect(function(){return e!=null&&t.instance.on(e),i.current=e,function(){i.current!=null&&t.instance.off(i.current),i.current=null}},[t,e])}function Ma(t,e){const i=t.pane??e.pane;return i?{...t,pane:i}:t}function EL(t,e){return function(s,a){const o=vc(),u=t(Ma(s,o),o);return w0(o.map,s.attribution),xc(u.current,s.eventHandlers),e(u.current,o,s,a),u}}var gs={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var ML=gs.exports,Nh;function DL(){return Nh||(Nh=1,function(t,e){(function(i,s){s(e)})(ML,function(i){var s="1.9.4";function a(n){var r,l,h,m;for(l=1,h=arguments.length;l<h;l++){m=arguments[l];for(r in m)n[r]=m[r]}return n}var o=Object.create||function(){function n(){}return function(r){return n.prototype=r,new n}}();function u(n,r){var l=Array.prototype.slice;if(n.bind)return n.bind.apply(n,l.call(arguments,1));var h=l.call(arguments,2);return function(){return n.apply(r,h.length?h.concat(l.call(arguments)):arguments)}}var d=0;function f(n){return"_leaflet_id"in n||(n._leaflet_id=++d),n._leaflet_id}function p(n,r,l){var h,m,v,w;return w=function(){h=!1,m&&(v.apply(l,m),m=!1)},v=function(){h?m=arguments:(n.apply(l,arguments),setTimeout(w,r),h=!0)},v}function g(n,r,l){var h=r[1],m=r[0],v=h-m;return n===h&&l?n:((n-m)%v+v)%v+m}function y(){return!1}function x(n,r){if(r===!1)return n;var l=Math.pow(10,r===void 0?6:r);return Math.round(n*l)/l}function b(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function P(n){return b(n).split(/\s+/)}function T(n,r){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?o(n.options):{});for(var l in r)n.options[l]=r[l];return n.options}function A(n,r,l){var h=[];for(var m in n)h.push(encodeURIComponent(l?m.toUpperCase():m)+"="+encodeURIComponent(n[m]));return(!r||r.indexOf("?")===-1?"?":"&")+h.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function j(n,r){return n.replace(D,function(l,h){var m=r[h];if(m===void 0)throw new Error("No value provided for variable "+l);return typeof m=="function"&&(m=m(r)),m})}var R=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function $(n,r){for(var l=0;l<n.length;l++)if(n[l]===r)return l;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var oe=0;function se(n){var r=+new Date,l=Math.max(0,16-(r-oe));return oe=r+l,window.setTimeout(n,l)}var pe=window.requestAnimationFrame||X("RequestAnimationFrame")||se,ge=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function z(n,r,l){if(l&&pe===se)n.call(r);else return pe.call(window,u(n,r))}function H(n){n&&ge.call(window,n)}var re={__proto__:null,extend:a,create:o,bind:u,get lastId(){return d},stamp:f,throttle:p,wrapNum:g,falseFn:y,formatNum:x,trim:b,splitWords:P,setOptions:T,getParamString:A,template:j,isArray:R,indexOf:$,emptyImageUrl:O,requestFn:pe,cancelFn:ge,requestAnimFrame:z,cancelAnimFrame:H};function Z(){}Z.extend=function(n){var r=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=r.__super__=this.prototype,h=o(l);h.constructor=r,r.prototype=h;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(r[m]=this[m]);return n.statics&&a(r,n.statics),n.includes&&(Oe(n.includes),a.apply(null,[h].concat(n.includes))),a(h,n),delete h.statics,delete h.includes,h.options&&(h.options=l.options?o(l.options):{},a(h.options,n.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,w=h._initHooks.length;v<w;v++)h._initHooks[v].call(this)}},r},Z.include=function(n){var r=this.prototype.options;return a(this.prototype,n),n.options&&(this.prototype.options=r,this.mergeOptions(n.options)),this},Z.mergeOptions=function(n){return a(this.prototype.options,n),this},Z.addInitHook=function(n){var r=Array.prototype.slice.call(arguments,1),l=typeof n=="function"?n:function(){this[n].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function Oe(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=R(n)?n:[n];for(var r=0;r<n.length;r++)n[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Te={on:function(n,r,l){if(typeof n=="object")for(var h in n)this._on(h,n[h],r);else{n=P(n);for(var m=0,v=n.length;m<v;m++)this._on(n[m],r,l)}return this},off:function(n,r,l){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var h in n)this._off(h,n[h],r);else{n=P(n);for(var m=arguments.length===1,v=0,w=n.length;v<w;v++)m?this._off(n[v]):this._off(n[v],r,l)}return this},_on:function(n,r,l,h){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(n,r,l)===!1){l===this&&(l=void 0);var m={fn:r,ctx:l};h&&(m.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(m)}},_off:function(n,r,l){var h,m,v;if(this._events&&(h=this._events[n],!!h)){if(arguments.length===1){if(this._firingCount)for(m=0,v=h.length;m<v;m++)h[m].fn=y;delete this._events[n];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var w=this._listens(n,r,l);if(w!==!1){var C=h[w];this._firingCount&&(C.fn=y,this._events[n]=h=h.slice()),h.splice(w,1)}}},fire:function(n,r,l){if(!this.listens(n,l))return this;var h=a({},r,{type:n,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var m=this._events[n];if(m){this._firingCount=this._firingCount+1||1;for(var v=0,w=m.length;v<w;v++){var C=m[v],M=C.fn;C.once&&this.off(n,M,C.ctx),M.call(C.ctx||this,h)}this._firingCount--}}return l&&this._propagateEvent(h),this},listens:function(n,r,l,h){typeof n!="string"&&console.warn('"string" type argument expected');var m=r;typeof r!="function"&&(h=!!r,m=void 0,l=void 0);var v=this._events&&this._events[n];if(v&&v.length&&this._listens(n,m,l)!==!1)return!0;if(h){for(var w in this._eventParents)if(this._eventParents[w].listens(n,r,l,h))return!0}return!1},_listens:function(n,r,l){if(!this._events)return!1;var h=this._events[n]||[];if(!r)return!!h.length;l===this&&(l=void 0);for(var m=0,v=h.length;m<v;m++)if(h[m].fn===r&&h[m].ctx===l)return m;return!1},once:function(n,r,l){if(typeof n=="object")for(var h in n)this._on(h,n[h],r,!0);else{n=P(n);for(var m=0,v=n.length;m<v;m++)this._on(n[m],r,l,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[f(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[f(n)],this},_propagateEvent:function(n){for(var r in this._eventParents)this._eventParents[r].fire(n.type,a({layer:n.target,propagatedFrom:n.target},n),!0)}};Te.addEventListener=Te.on,Te.removeEventListener=Te.clearAllEventListeners=Te.off,Te.addOneTimeEventListener=Te.once,Te.fireEvent=Te.fire,Te.hasEventListeners=Te.listens;var ye=Z.extend(Te);function Y(n,r,l){this.x=l?Math.round(n):n,this.y=l?Math.round(r):r}var at=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(n){return this.clone()._add(ne(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(ne(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new Y(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new Y(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=at(this.x),this.y=at(this.y),this},distanceTo:function(n){n=ne(n);var r=n.x-this.x,l=n.y-this.y;return Math.sqrt(r*r+l*l)},equals:function(n){return n=ne(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=ne(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function ne(n,r,l){return n instanceof Y?n:R(n)?new Y(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new Y(n.x,n.y):new Y(n,r,l)}function Re(n,r){if(n)for(var l=r?[n,r]:n,h=0,m=l.length;h<m;h++)this.extend(l[h])}Re.prototype={extend:function(n){var r,l;if(!n)return this;if(n instanceof Y||typeof n[0]=="number"||"x"in n)r=l=ne(n);else if(n=We(n),r=n.min,l=n.max,!r||!l)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=l.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(n){return ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return ne(this.min.x,this.max.y)},getTopRight:function(){return ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var r,l;return typeof n[0]=="number"||n instanceof Y?n=ne(n):n=We(n),n instanceof Re?(r=n.min,l=n.max):r=l=n,r.x>=this.min.x&&l.x<=this.max.x&&r.y>=this.min.y&&l.y<=this.max.y},intersects:function(n){n=We(n);var r=this.min,l=this.max,h=n.min,m=n.max,v=m.x>=r.x&&h.x<=l.x,w=m.y>=r.y&&h.y<=l.y;return v&&w},overlaps:function(n){n=We(n);var r=this.min,l=this.max,h=n.min,m=n.max,v=m.x>r.x&&h.x<l.x,w=m.y>r.y&&h.y<l.y;return v&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var r=this.min,l=this.max,h=Math.abs(r.x-l.x)*n,m=Math.abs(r.y-l.y)*n;return We(ne(r.x-h,r.y-m),ne(l.x+h,l.y+m))},equals:function(n){return n?(n=We(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function We(n,r){return!n||n instanceof Re?n:new Re(n,r)}function He(n,r){if(n)for(var l=r?[n,r]:n,h=0,m=l.length;h<m;h++)this.extend(l[h])}He.prototype={extend:function(n){var r=this._southWest,l=this._northEast,h,m;if(n instanceof ke)h=n,m=n;else if(n instanceof He){if(h=n._southWest,m=n._northEast,!h||!m)return this}else return n?this.extend(U(n)||Ve(n)):this;return!r&&!l?(this._southWest=new ke(h.lat,h.lng),this._northEast=new ke(m.lat,m.lng)):(r.lat=Math.min(h.lat,r.lat),r.lng=Math.min(h.lng,r.lng),l.lat=Math.max(m.lat,l.lat),l.lng=Math.max(m.lng,l.lng)),this},pad:function(n){var r=this._southWest,l=this._northEast,h=Math.abs(r.lat-l.lat)*n,m=Math.abs(r.lng-l.lng)*n;return new He(new ke(r.lat-h,r.lng-m),new ke(l.lat+h,l.lng+m))},getCenter:function(){return new ke((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ke(this.getNorth(),this.getWest())},getSouthEast:function(){return new ke(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof ke||"lat"in n?n=U(n):n=Ve(n);var r=this._southWest,l=this._northEast,h,m;return n instanceof He?(h=n.getSouthWest(),m=n.getNorthEast()):h=m=n,h.lat>=r.lat&&m.lat<=l.lat&&h.lng>=r.lng&&m.lng<=l.lng},intersects:function(n){n=Ve(n);var r=this._southWest,l=this._northEast,h=n.getSouthWest(),m=n.getNorthEast(),v=m.lat>=r.lat&&h.lat<=l.lat,w=m.lng>=r.lng&&h.lng<=l.lng;return v&&w},overlaps:function(n){n=Ve(n);var r=this._southWest,l=this._northEast,h=n.getSouthWest(),m=n.getNorthEast(),v=m.lat>r.lat&&h.lat<l.lat,w=m.lng>r.lng&&h.lng<l.lng;return v&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,r){return n?(n=Ve(n),this._southWest.equals(n.getSouthWest(),r)&&this._northEast.equals(n.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ve(n,r){return n instanceof He?n:new He(n,r)}function ke(n,r,l){if(isNaN(n)||isNaN(r))throw new Error("Invalid LatLng object: ("+n+", "+r+")");this.lat=+n,this.lng=+r,l!==void 0&&(this.alt=+l)}ke.prototype={equals:function(n,r){if(!n)return!1;n=U(n);var l=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return l<=(r===void 0?1e-9:r)},toString:function(n){return"LatLng("+x(this.lat,n)+", "+x(this.lng,n)+")"},distanceTo:function(n){return Fe.distance(this,U(n))},wrap:function(){return Fe.wrapLatLng(this)},toBounds:function(n){var r=180*n/40075017,l=r/Math.cos(Math.PI/180*this.lat);return Ve([this.lat-r,this.lng-l],[this.lat+r,this.lng+l])},clone:function(){return new ke(this.lat,this.lng,this.alt)}};function U(n,r,l){return n instanceof ke?n:R(n)&&typeof n[0]!="object"?n.length===3?new ke(n[0],n[1],n[2]):n.length===2?new ke(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new ke(n.lat,"lng"in n?n.lng:n.lon,n.alt):r===void 0?null:new ke(n,r,l)}var Ne={latLngToPoint:function(n,r){var l=this.projection.project(n),h=this.scale(r);return this.transformation._transform(l,h)},pointToLatLng:function(n,r){var l=this.scale(r),h=this.transformation.untransform(n,l);return this.projection.unproject(h)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var r=this.projection.bounds,l=this.scale(n),h=this.transformation.transform(r.min,l),m=this.transformation.transform(r.max,l);return new Re(h,m)},infinite:!1,wrapLatLng:function(n){var r=this.wrapLng?g(n.lng,this.wrapLng,!0):n.lng,l=this.wrapLat?g(n.lat,this.wrapLat,!0):n.lat,h=n.alt;return new ke(l,r,h)},wrapLatLngBounds:function(n){var r=n.getCenter(),l=this.wrapLatLng(r),h=r.lat-l.lat,m=r.lng-l.lng;if(h===0&&m===0)return n;var v=n.getSouthWest(),w=n.getNorthEast(),C=new ke(v.lat-h,v.lng-m),M=new ke(w.lat-h,w.lng-m);return new He(C,M)}},Fe=a({},Ne,{wrapLng:[-180,180],R:6371e3,distance:function(n,r){var l=Math.PI/180,h=n.lat*l,m=r.lat*l,v=Math.sin((r.lat-n.lat)*l/2),w=Math.sin((r.lng-n.lng)*l/2),C=v*v+Math.cos(h)*Math.cos(m)*w*w,M=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*M}}),Be=6378137,qe={R:Be,MAX_LATITUDE:85.0511287798,project:function(n){var r=Math.PI/180,l=this.MAX_LATITUDE,h=Math.max(Math.min(l,n.lat),-l),m=Math.sin(h*r);return new Y(this.R*n.lng*r,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(n){var r=180/Math.PI;return new ke((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*r,n.x*r/this.R)},bounds:function(){var n=Be*Math.PI;return new Re([-n,-n],[n,n])}()};function tt(n,r,l,h){if(R(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=r,this._c=l,this._d=h}tt.prototype={transform:function(n,r){return this._transform(n.clone(),r)},_transform:function(n,r){return r=r||1,n.x=r*(this._a*n.x+this._b),n.y=r*(this._c*n.y+this._d),n},untransform:function(n,r){return r=r||1,new Y((n.x/r-this._b)/this._a,(n.y/r-this._d)/this._c)}};function vt(n,r,l,h){return new tt(n,r,l,h)}var jt=a({},Fe,{code:"EPSG:3857",projection:qe,transformation:function(){var n=.5/(Math.PI*qe.R);return vt(n,.5,-n,.5)}()}),Vt=a({},jt,{code:"EPSG:900913"});function Bt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function bn(n,r){var l="",h,m,v,w,C,M;for(h=0,v=n.length;h<v;h++){for(C=n[h],m=0,w=C.length;m<w;m++)M=C[m],l+=(m?"L":"M")+M.x+" "+M.y;l+=r?ae.svg?"z":"x":""}return l||"M0 0"}var Et=document.documentElement.style,Ft="ActiveXObject"in window,zt=Ft&&!document.addEventListener,S="msLaunchUri"in navigator&&!("documentMode"in document),k=on("webkit"),I=on("android"),K=on("android 2")||on("android 3"),q=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),E=I&&on("Google")&&q<537&&!("AudioNode"in window),B=!!window.opera,te=!S&&on("chrome"),me=on("gecko")&&!k&&!B&&!Ft,le=!te&&on("safari"),we=on("phantom"),ze="OTransition"in Et,wn=navigator.platform.indexOf("Win")===0,Gt=Ft&&"transition"in Et,Xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!K,ir="MozPerspective"in Et,sr=!window.L_DISABLE_3D&&(Gt||Xt||ir)&&!ze&&!we,Xn=typeof orientation<"u"||on("mobile"),rr=Xn&&k,K0=Xn&&Xt,Tc=!window.PointerEvent&&window.MSPointerEvent,Sc=!!(window.PointerEvent||Tc),Pc="ontouchstart"in window||!!window.TouchEvent,G0=!window.L_NO_TOUCH&&(Pc||Sc),X0=Xn&&B,Y0=Xn&&me,Q0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,J0=function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",y,r),window.removeEventListener("testPassiveEventSupport",y,r)}catch{}return n}(),eb=function(){return!!document.createElement("canvas").getContext}(),Ia=!!(document.createElementNS&&Bt("svg").createSVGRect),tb=!!Ia&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),nb=!Ia&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var r=n.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}(),ib=navigator.platform.indexOf("Mac")===0,sb=navigator.platform.indexOf("Linux")===0;function on(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var ae={ie:Ft,ielt9:zt,edge:S,webkit:k,android:I,android23:K,androidStock:E,opera:B,chrome:te,gecko:me,safari:le,phantom:we,opera12:ze,win:wn,ie3d:Gt,webkit3d:Xt,gecko3d:ir,any3d:sr,mobile:Xn,mobileWebkit:rr,mobileWebkit3d:K0,msPointer:Tc,pointer:Sc,touch:G0,touchNative:Pc,mobileOpera:X0,mobileGecko:Y0,retina:Q0,passiveEvents:J0,canvas:eb,svg:Ia,vml:nb,inlineSvg:tb,mac:ib,linux:sb},Nc=ae.msPointer?"MSPointerDown":"pointerdown",jc=ae.msPointer?"MSPointerMove":"pointermove",Cc=ae.msPointer?"MSPointerUp":"pointerup",kc=ae.msPointer?"MSPointerCancel":"pointercancel",Oa={touchstart:Nc,touchmove:jc,touchend:Cc,touchcancel:kc},Ac={touchstart:ub,touchmove:ar,touchend:ar,touchcancel:ar},xi={},Lc=!1;function rb(n,r,l){return r==="touchstart"&&cb(),Ac[r]?(l=Ac[r].bind(this,l),n.addEventListener(Oa[r],l,!1),l):(console.warn("wrong event specified:",r),y)}function ab(n,r,l){if(!Oa[r]){console.warn("wrong event specified:",r);return}n.removeEventListener(Oa[r],l,!1)}function ob(n){xi[n.pointerId]=n}function lb(n){xi[n.pointerId]&&(xi[n.pointerId]=n)}function Ec(n){delete xi[n.pointerId]}function cb(){Lc||(document.addEventListener(Nc,ob,!0),document.addEventListener(jc,lb,!0),document.addEventListener(Cc,Ec,!0),document.addEventListener(kc,Ec,!0),Lc=!0)}function ar(n,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var l in xi)r.touches.push(xi[l]);r.changedTouches=[r],n(r)}}function ub(n,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&pt(r),ar(n,r)}function db(n){var r={},l,h;for(h in n)l=n[h],r[h]=l&&l.bind?l.bind(n):l;return n=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var hb=200;function fb(n,r){n.addEventListener("dblclick",r);var l=0,h;function m(v){if(v.detail!==1){h=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var w=Oc(v);if(!(w.some(function(M){return M instanceof HTMLLabelElement&&M.attributes.for})&&!w.some(function(M){return M instanceof HTMLInputElement||M instanceof HTMLSelectElement}))){var C=Date.now();C-l<=hb?(h++,h===2&&r(db(v))):h=1,l=C}}}return n.addEventListener("click",m),{dblclick:r,simDblclick:m}}function mb(n,r){n.removeEventListener("dblclick",r.dblclick),n.removeEventListener("click",r.simDblclick)}var Va=cr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qi=cr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Mc=Qi==="webkitTransition"||Qi==="OTransition"?Qi+"End":"transitionend";function Dc(n){return typeof n=="string"?document.getElementById(n):n}function Ji(n,r){var l=n.style[r]||n.currentStyle&&n.currentStyle[r];if((!l||l==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(n,null);l=h?h[r]:null}return l==="auto"?null:l}function Me(n,r,l){var h=document.createElement(n);return h.className=r||"",l&&l.appendChild(h),h}function Ke(n){var r=n.parentNode;r&&r.removeChild(n)}function or(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function _i(n){var r=n.parentNode;r&&r.lastChild!==n&&r.appendChild(n)}function bi(n){var r=n.parentNode;r&&r.firstChild!==n&&r.insertBefore(n,r.firstChild)}function Ba(n,r){if(n.classList!==void 0)return n.classList.contains(r);var l=lr(n);return l.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(l)}function Se(n,r){if(n.classList!==void 0)for(var l=P(r),h=0,m=l.length;h<m;h++)n.classList.add(l[h]);else if(!Ba(n,r)){var v=lr(n);Fa(n,(v?v+" ":"")+r)}}function nt(n,r){n.classList!==void 0?n.classList.remove(r):Fa(n,b((" "+lr(n)+" ").replace(" "+r+" "," ")))}function Fa(n,r){n.className.baseVal===void 0?n.className=r:n.className.baseVal=r}function lr(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function Zt(n,r){"opacity"in n.style?n.style.opacity=r:"filter"in n.style&&pb(n,r)}function pb(n,r){var l=!1,h="DXImageTransform.Microsoft.Alpha";try{l=n.filters.item(h)}catch{if(r===1)return}r=Math.round(r*100),l?(l.Enabled=r!==100,l.Opacity=r):n.style.filter+=" progid:"+h+"(opacity="+r+")"}function cr(n){for(var r=document.documentElement.style,l=0;l<n.length;l++)if(n[l]in r)return n[l];return!1}function Yn(n,r,l){var h=r||new Y(0,0);n.style[Va]=(ae.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(l?" scale("+l+")":"")}function ot(n,r){n._leaflet_pos=r,ae.any3d?Yn(n,r):(n.style.left=r.x+"px",n.style.top=r.y+"px")}function Qn(n){return n._leaflet_pos||new Y(0,0)}var es,ts,za;if("onselectstart"in document)es=function(){ve(window,"selectstart",pt)},ts=function(){Ue(window,"selectstart",pt)};else{var ns=cr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);es=function(){if(ns){var n=document.documentElement.style;za=n[ns],n[ns]="none"}},ts=function(){ns&&(document.documentElement.style[ns]=za,za=void 0)}}function Za(){ve(window,"dragstart",pt)}function Ua(){Ue(window,"dragstart",pt)}var ur,$a;function Wa(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(dr(),ur=n,$a=n.style.outlineStyle,n.style.outlineStyle="none",ve(window,"keydown",dr))}function dr(){ur&&(ur.style.outlineStyle=$a,ur=void 0,$a=void 0,Ue(window,"keydown",dr))}function Rc(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Ha(n){var r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth||1,y:r.height/n.offsetHeight||1,boundingClientRect:r}}var gb={__proto__:null,TRANSFORM:Va,TRANSITION:Qi,TRANSITION_END:Mc,get:Dc,getStyle:Ji,create:Me,remove:Ke,empty:or,toFront:_i,toBack:bi,hasClass:Ba,addClass:Se,removeClass:nt,setClass:Fa,getClass:lr,setOpacity:Zt,testProp:cr,setTransform:Yn,setPosition:ot,getPosition:Qn,get disableTextSelection(){return es},get enableTextSelection(){return ts},disableImageDrag:Za,enableImageDrag:Ua,preventOutline:Wa,restoreOutline:dr,getSizedParentNode:Rc,getScale:Ha};function ve(n,r,l,h){if(r&&typeof r=="object")for(var m in r)Ka(n,m,r[m],l);else{r=P(r);for(var v=0,w=r.length;v<w;v++)Ka(n,r[v],l,h)}return this}var ln="_leaflet_events";function Ue(n,r,l,h){if(arguments.length===1)Ic(n),delete n[ln];else if(r&&typeof r=="object")for(var m in r)Ga(n,m,r[m],l);else if(r=P(r),arguments.length===2)Ic(n,function(C){return $(r,C)!==-1});else for(var v=0,w=r.length;v<w;v++)Ga(n,r[v],l,h);return this}function Ic(n,r){for(var l in n[ln]){var h=l.split(/\d/)[0];(!r||r(h))&&Ga(n,h,null,null,l)}}var qa={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ka(n,r,l,h){var m=r+f(l)+(h?"_"+f(h):"");if(n[ln]&&n[ln][m])return this;var v=function(C){return l.call(h||n,C||window.event)},w=v;!ae.touchNative&&ae.pointer&&r.indexOf("touch")===0?v=rb(n,r,v):ae.touch&&r==="dblclick"?v=fb(n,v):"addEventListener"in n?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?n.addEventListener(qa[r]||r,v,ae.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(v=function(C){C=C||window.event,Ya(n,C)&&w(C)},n.addEventListener(qa[r],v,!1)):n.addEventListener(r,w,!1):n.attachEvent("on"+r,v),n[ln]=n[ln]||{},n[ln][m]=v}function Ga(n,r,l,h,m){m=m||r+f(l)+(h?"_"+f(h):"");var v=n[ln]&&n[ln][m];if(!v)return this;!ae.touchNative&&ae.pointer&&r.indexOf("touch")===0?ab(n,r,v):ae.touch&&r==="dblclick"?mb(n,v):"removeEventListener"in n?n.removeEventListener(qa[r]||r,v,!1):n.detachEvent("on"+r,v),n[ln][m]=null}function Jn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Xa(n){return Ka(n,"wheel",Jn),this}function is(n){return ve(n,"mousedown touchstart dblclick contextmenu",Jn),n._leaflet_disable_click=!0,this}function pt(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function ei(n){return pt(n),Jn(n),this}function Oc(n){if(n.composedPath)return n.composedPath();for(var r=[],l=n.target;l;)r.push(l),l=l.parentNode;return r}function Vc(n,r){if(!r)return new Y(n.clientX,n.clientY);var l=Ha(r),h=l.boundingClientRect;return new Y((n.clientX-h.left)/l.x-r.clientLeft,(n.clientY-h.top)/l.y-r.clientTop)}var yb=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Bc(n){return ae.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/yb:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Ya(n,r){var l=r.relatedTarget;if(!l)return!0;try{for(;l&&l!==n;)l=l.parentNode}catch{return!1}return l!==n}var vb={__proto__:null,on:ve,off:Ue,stopPropagation:Jn,disableScrollPropagation:Xa,disableClickPropagation:is,preventDefault:pt,stop:ei,getPropagationPath:Oc,getMousePosition:Vc,getWheelDelta:Bc,isExternalTarget:Ya,addListener:ve,removeListener:Ue},Fc=ye.extend({run:function(n,r,l,h){this.stop(),this._el=n,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=Qn(n),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(n){var r=+new Date-this._startTime,l=this._duration*1e3;r<l?this._runFrame(this._easeOut(r/l),n):(this._runFrame(1),this._complete())},_runFrame:function(n,r){var l=this._startPos.add(this._offset.multiplyBy(n));r&&l._round(),ot(this._el,l),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Ae=ye.extend({options:{crs:jt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,r){r=T(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(U(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qi&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ve(this._proxy,Mc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,r,l){if(r=r===void 0?this._zoom:this._limitZoom(r),n=this._limitCenter(U(n),r,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=a({animate:l.animate},l.zoom),l.pan=a({animate:l.animate,duration:l.duration},l.pan));var h=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,r,l.zoom):this._tryAnimatedPan(n,l.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(n,r,l.pan&&l.pan.noMoveStart),this},setZoom:function(n,r){return this._loaded?this.setView(this.getCenter(),n,{zoom:r}):(this._zoom=n,this)},zoomIn:function(n,r){return n=n||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,r)},zoomOut:function(n,r){return n=n||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,r)},setZoomAround:function(n,r,l){var h=this.getZoomScale(r),m=this.getSize().divideBy(2),v=n instanceof Y?n:this.latLngToContainerPoint(n),w=v.subtract(m).multiplyBy(1-1/h),C=this.containerPointToLatLng(m.add(w));return this.setView(C,r,{zoom:l})},_getBoundsCenterZoom:function(n,r){r=r||{},n=n.getBounds?n.getBounds():Ve(n);var l=ne(r.paddingTopLeft||r.padding||[0,0]),h=ne(r.paddingBottomRight||r.padding||[0,0]),m=this.getBoundsZoom(n,!1,l.add(h));if(m=typeof r.maxZoom=="number"?Math.min(r.maxZoom,m):m,m===1/0)return{center:n.getCenter(),zoom:m};var v=h.subtract(l).divideBy(2),w=this.project(n.getSouthWest(),m),C=this.project(n.getNorthEast(),m),M=this.unproject(w.add(C).divideBy(2).add(v),m);return{center:M,zoom:m}},fitBounds:function(n,r){if(n=Ve(n),!n.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(n,r);return this.setView(l.center,l.zoom,r)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,r){return this.setView(n,this._zoom,{pan:r})},panBy:function(n,r){if(n=ne(n).round(),r=r||{},!n.x&&!n.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){Se(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,l,r.duration||.25,r.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,r,l){if(l=l||{},l.animate===!1||!ae.any3d)return this.setView(n,r,l);this._stop();var h=this.project(this.getCenter()),m=this.project(n),v=this.getSize(),w=this._zoom;n=U(n),r=r===void 0?w:r;var C=Math.max(v.x,v.y),M=C*this.getZoomScale(w,r),V=m.distanceTo(h)||1,Q=1.42,de=Q*Q;function je(lt){var Tr=lt?-1:1,aw=lt?M:C,ow=M*M-C*C+Tr*de*de*V*V,lw=2*aw*de*V,lo=ow/lw,_u=Math.sqrt(lo*lo+1)-lo,cw=_u<1e-9?-18:Math.log(_u);return cw}function St(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function ht(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function $t(lt){return St(lt)/ht(lt)}var Ct=je(0);function ji(lt){return C*(ht(Ct)/ht(Ct+Q*lt))}function nw(lt){return C*(ht(Ct)*$t(Ct+Q*lt)-St(Ct))/de}function iw(lt){return 1-Math.pow(1-lt,1.5)}var sw=Date.now(),vu=(je(1)-Ct)/Q,rw=l.duration?1e3*l.duration:1e3*vu*.8;function xu(){var lt=(Date.now()-sw)/rw,Tr=iw(lt)*vu;lt<=1?(this._flyToFrame=z(xu,this),this._move(this.unproject(h.add(m.subtract(h).multiplyBy(nw(Tr)/V)),w),this.getScaleZoom(C/ji(Tr),w),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),xu.call(this),this},flyToBounds:function(n,r){var l=this._getBoundsCenterZoom(n,r);return this.flyTo(l.center,l.zoom,r)},setMaxBounds:function(n){return n=Ve(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var r=this.options.minZoom;return this.options.minZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var r=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,r){this._enforcingBounds=!0;var l=this.getCenter(),h=this._limitCenter(l,this._zoom,Ve(n));return l.equals(h)||this.panTo(h,r),this._enforcingBounds=!1,this},panInside:function(n,r){r=r||{};var l=ne(r.paddingTopLeft||r.padding||[0,0]),h=ne(r.paddingBottomRight||r.padding||[0,0]),m=this.project(this.getCenter()),v=this.project(n),w=this.getPixelBounds(),C=We([w.min.add(l),w.max.subtract(h)]),M=C.getSize();if(!C.contains(v)){this._enforcingBounds=!0;var V=v.subtract(C.getCenter()),Q=C.extend(v).getSize().subtract(M);m.x+=V.x<0?-Q.x:Q.x,m.y+=V.y<0?-Q.y:Q.y,this.panTo(this.unproject(m),r),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=a({animate:!1,pan:!0},n===!0?{animate:!0}:n);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),h=r.divideBy(2).round(),m=l.divideBy(2).round(),v=h.subtract(m);return!v.x&&!v.y?this:(n.animate&&n.pan?this.panBy(v):(n.pan&&this._rawPanBy(v),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=a({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=u(this._handleGeolocationResponse,this),l=u(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,l,n):navigator.geolocation.getCurrentPosition(r,l,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var r=n.code,l=n.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var r=n.coords.latitude,l=n.coords.longitude,h=new ke(r,l),m=h.toBounds(n.coords.accuracy*2),v=this._locateOptions;if(v.setView){var w=this.getBoundsZoom(m);this.setView(h,v.maxZoom?Math.min(w,v.maxZoom):w)}var C={latlng:h,bounds:m,timestamp:n.timestamp};for(var M in n.coords)typeof n.coords[M]=="number"&&(C[M]=n.coords[M]);this.fire("locationfound",C)}},addHandler:function(n,r){if(!r)return this;var l=this[n]=new r(this);return this._handlers.push(l),this.options[n]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Ke(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,r){var l="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),h=Me("div",l,r||this._mapPane);return n&&(this._panes[n]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),r=this.unproject(n.getBottomLeft()),l=this.unproject(n.getTopRight());return new He(r,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,r,l){n=Ve(n),l=ne(l||[0,0]);var h=this.getZoom()||0,m=this.getMinZoom(),v=this.getMaxZoom(),w=n.getNorthWest(),C=n.getSouthEast(),M=this.getSize().subtract(l),V=We(this.project(C,h),this.project(w,h)).getSize(),Q=ae.any3d?this.options.zoomSnap:1,de=M.x/V.x,je=M.y/V.y,St=r?Math.max(de,je):Math.min(de,je);return h=this.getScaleZoom(St,h),Q&&(h=Math.round(h/(Q/100))*(Q/100),h=r?Math.ceil(h/Q)*Q:Math.floor(h/Q)*Q),Math.max(m,Math.min(v,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,r){var l=this._getTopLeftPoint(n,r);return new Re(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,r){var l=this.options.crs;return r=r===void 0?this._zoom:r,l.scale(n)/l.scale(r)},getScaleZoom:function(n,r){var l=this.options.crs;r=r===void 0?this._zoom:r;var h=l.zoom(n*l.scale(r));return isNaN(h)?1/0:h},project:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(U(n),r)},unproject:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(ne(n),r)},layerPointToLatLng:function(n){var r=ne(n).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(n){var r=this.project(U(n))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(U(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Ve(n))},distance:function(n,r){return this.options.crs.distance(U(n),U(r))},containerPointToLayerPoint:function(n){return ne(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return ne(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var r=this.containerPointToLayerPoint(ne(n));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(n)))},mouseEventToContainerPoint:function(n){return Vc(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var r=this._container=Dc(n);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ve(r,"scroll",this._onScroll,this),this._containerId=f(r)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,Se(n,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=Ji(n,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ot(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(n.markerPane,"leaflet-zoom-hide"),Se(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,r,l){ot(this._mapPane,new Y(0,0));var h=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var m=this._zoom!==r;this._moveStart(m,l)._move(n,r)._moveEnd(m),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(n,r){return n&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(n,r,l,h){r===void 0&&(r=this._zoom);var m=this._zoom!==r;return this._zoom=r,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),h?l&&l.pinch&&this.fire("zoom",l):((m||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){ot(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[f(this._container)]=this;var r=n?Ue:ve;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,r){for(var l=[],h,m=r==="mouseout"||r==="mouseover",v=n.target||n.srcElement,w=!1;v;){if(h=this._targets[f(v)],h&&(r==="click"||r==="preclick")&&this._draggableMoved(h)){w=!0;break}if(h&&h.listens(r,!0)&&(m&&!Ya(v,n)||(l.push(h),m))||v===this._container)break;v=v.parentNode}return!l.length&&!w&&!m&&this.listens(r,!0)&&(l=[this]),l},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var r=n.target||n.srcElement;if(!(!this._loaded||r._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(r))){var l=n.type;l==="mousedown"&&Wa(r),this._fireDOMEvent(n,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,r,l){if(n.type==="click"){var h=a({},n);h.type="preclick",this._fireDOMEvent(h,h.type,l)}var m=this._findEventTargets(n,r);if(l){for(var v=[],w=0;w<l.length;w++)l[w].listens(r,!0)&&v.push(l[w]);m=v.concat(m)}if(m.length){r==="contextmenu"&&pt(n);var C=m[0],M={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var V=C.getLatLng&&(!C._radius||C._radius<=10);M.containerPoint=V?this.latLngToContainerPoint(C.getLatLng()):this.mouseEventToContainerPoint(n),M.layerPoint=this.containerPointToLayerPoint(M.containerPoint),M.latlng=V?C.getLatLng():this.layerPointToLatLng(M.layerPoint)}for(w=0;w<m.length;w++)if(m[w].fire(r,M,!0),M.originalEvent._stopped||m[w].options.bubblingMouseEvents===!1&&$(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,r=this._handlers.length;n<r;n++)this._handlers[n].disable()},whenReady:function(n,r){return this._loaded?n.call(r||this,{target:this}):this.on("load",n,r),this},_getMapPanePos:function(){return Qn(this._mapPane)||new Y(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,r){var l=n&&r!==void 0?this._getNewPixelOrigin(n,r):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,r){var l=this.getSize()._divideBy(2);return this.project(n,r)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,r,l){var h=this._getNewPixelOrigin(l,r);return this.project(n,r)._subtract(h)},_latLngBoundsToNewLayerBounds:function(n,r,l){var h=this._getNewPixelOrigin(l,r);return We([this.project(n.getSouthWest(),r)._subtract(h),this.project(n.getNorthWest(),r)._subtract(h),this.project(n.getSouthEast(),r)._subtract(h),this.project(n.getNorthEast(),r)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,r,l){if(!l)return n;var h=this.project(n,r),m=this.getSize().divideBy(2),v=new Re(h.subtract(m),h.add(m)),w=this._getBoundsOffset(v,l,r);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?n:this.unproject(h.add(w),r)},_limitOffset:function(n,r){if(!r)return n;var l=this.getPixelBounds(),h=new Re(l.min.add(n),l.max.add(n));return n.add(this._getBoundsOffset(h,r))},_getBoundsOffset:function(n,r,l){var h=We(this.project(r.getNorthEast(),l),this.project(r.getSouthWest(),l)),m=h.min.subtract(n.min),v=h.max.subtract(n.max),w=this._rebound(m.x,-v.x),C=this._rebound(m.y,-v.y);return new Y(w,C)},_rebound:function(n,r){return n+r>0?Math.round(n-r)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(r))},_limitZoom:function(n){var r=this.getMinZoom(),l=this.getMaxZoom(),h=ae.any3d?this.options.zoomSnap:1;return h&&(n=Math.round(n/h)*h),Math.max(r,Math.min(l,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,r){var l=this._getCenterOffset(n)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,r),!0)},_createAnimProxy:function(){var n=this._proxy=Me("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(r){var l=Va,h=this._proxy.style[l];Yn(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),h===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),r=this.getZoom();Yn(this._proxy,this.project(n,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,r,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(r),m=this._getCenterOffset(n)._divideBy(1-1/h);return l.animate!==!0&&!this.getSize().contains(m)?!1:(z(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(n,r,!0)},this),!0)},_animateZoom:function(n,r,l,h){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=r,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:r,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function xb(n,r){return new Ae(n,r)}var Yt=Z.extend({options:{position:"topright"},initialize:function(n){T(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var r=this._map;return r&&r.removeControl(this),this.options.position=n,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var r=this._container=this.onAdd(n),l=this.getPosition(),h=n._controlCorners[l];return Se(r,"leaflet-control"),l.indexOf("bottom")!==-1?h.insertBefore(r,h.firstChild):h.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),ss=function(n){return new Yt(n)};Ae.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",l=this._controlContainer=Me("div",r+"control-container",this._container);function h(m,v){var w=r+m+" "+r+v;n[m+v]=Me("div",w,l)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Ke(this._controlCorners[n]);Ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zc=Yt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,r,l,h){return l<h?-1:h<l?1:0}},initialize:function(n,r,l){T(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in n)this._addLayer(n[h],h);for(h in r)this._addLayer(r[h],h,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Yt.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,r){return this._addLayer(n,r),this._map?this._update():this},addOverlay:function(n,r){return this._addLayer(n,r,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var r=this._getLayer(f(n));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(Se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",r=this._container=Me("div",n),l=this.options.collapsed;r.setAttribute("aria-haspopup",!0),is(r),Xa(r);var h=this._section=Me("section",n+"-list");l&&(this._map.on("click",this.collapse,this),ve(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Me("a",n+"-toggle",r);m.href="#",m.title="Layers",m.setAttribute("role","button"),ve(m,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){pt(v),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=Me("div",n+"-base",h),this._separator=Me("div",n+"-separator",h),this._overlaysList=Me("div",n+"-overlays",h),r.appendChild(h)},_getLayer:function(n){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&f(this._layers[r].layer)===n)return this._layers[r]},_addLayer:function(n,r,l){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:r,overlay:l}),this.options.sortLayers&&this._layers.sort(u(function(h,m){return this.options.sortFunction(h.layer,m.layer,h.name,m.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;or(this._baseLayersList),or(this._overlaysList),this._layerControlInputs=[];var n,r,l,h,m=0;for(l=0;l<this._layers.length;l++)h=this._layers[l],this._addItem(h),r=r||h.overlay,n=n||!h.overlay,m+=h.overlay?0:1;return this.options.hideSingleBase&&(n=n&&m>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=r&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var r=this._getLayer(f(n.target)),l=r.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;l&&this._map.fire(l,r)},_createRadioElement:function(n,r){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(r?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=l,h.firstChild},_addItem:function(n){var r=document.createElement("label"),l=this._map.hasLayer(n.layer),h;n.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=l):h=this._createRadioElement("leaflet-base-layers_"+f(this),l),this._layerControlInputs.push(h),h.layerId=f(n.layer),ve(h,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+n.name;var v=document.createElement("span");r.appendChild(v),v.appendChild(h),v.appendChild(m);var w=n.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,r,l,h=[],m=[];this._handlingClick=!0;for(var v=n.length-1;v>=0;v--)r=n[v],l=this._getLayer(r.layerId).layer,r.checked?h.push(l):r.checked||m.push(l);for(v=0;v<m.length;v++)this._map.hasLayer(m[v])&&this._map.removeLayer(m[v]);for(v=0;v<h.length;v++)this._map.hasLayer(h[v])||this._map.addLayer(h[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,r,l,h=this._map.getZoom(),m=n.length-1;m>=0;m--)r=n[m],l=this._getLayer(r.layerId).layer,r.disabled=l.options.minZoom!==void 0&&h<l.options.minZoom||l.options.maxZoom!==void 0&&h>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,ve(n,"click",pt),this.expand();var r=this;setTimeout(function(){Ue(n,"click",pt),r._preventClick=!1})}}),_b=function(n,r,l){return new zc(n,r,l)},Qa=Yt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var r="leaflet-control-zoom",l=Me("div",r+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,r+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,r+"-out",l,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,r,l,h,m){var v=Me("a",l,h);return v.innerHTML=n,v.href="#",v.title=r,v.setAttribute("role","button"),v.setAttribute("aria-label",r),is(v),ve(v,"click",ei),ve(v,"click",m,this),ve(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var n=this._map,r="leaflet-disabled";nt(this._zoomInButton,r),nt(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(Se(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(Se(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ae.mergeOptions({zoomControl:!0}),Ae.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qa,this.addControl(this.zoomControl))});var bb=function(n){return new Qa(n)},Zc=Yt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var r="leaflet-control-scale",l=Me("div",r),h=this.options;return this._addScales(h,r+"-line",l),n.on(h.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),l},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,r,l){n.metric&&(this._mScale=Me("div",r,l)),n.imperial&&(this._iScale=Me("div",r,l))},_update:function(){var n=this._map,r=n.getSize().y/2,l=n.distance(n.containerPointToLatLng([0,r]),n.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(l)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var r=this._getRoundNum(n),l=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,l,r/n)},_updateImperial:function(n){var r=n*3.2808399,l,h,m;r>5280?(l=r/5280,h=this._getRoundNum(l),this._updateScale(this._iScale,h+" mi",h/l)):(m=this._getRoundNum(r),this._updateScale(this._iScale,m+" ft",m/r))},_updateScale:function(n,r,l){n.style.width=Math.round(this.options.maxWidth*l)+"px",n.innerHTML=r},_getRoundNum:function(n){var r=Math.pow(10,(Math.floor(n)+"").length-1),l=n/r;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,r*l}}),wb=function(n){return new Zc(n)},Tb='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ja=Yt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?Tb+" ":"")+"Leaflet</a>"},initialize:function(n){T(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Me("div","leaflet-control-attribution"),is(this._container);for(var r in n._layers)n._layers[r].getAttribution&&this.addAttribution(n._layers[r].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var r in this._attributions)this._attributions[r]&&n.push(r);var l=[];this.options.prefix&&l.push(this.options.prefix),n.length&&l.push(n.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Ae.mergeOptions({attributionControl:!0}),Ae.addInitHook(function(){this.options.attributionControl&&new Ja().addTo(this)});var Sb=function(n){return new Ja(n)};Yt.Layers=zc,Yt.Zoom=Qa,Yt.Scale=Zc,Yt.Attribution=Ja,ss.layers=_b,ss.zoom=bb,ss.scale=wb,ss.attribution=Sb;var cn=Z.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cn.addTo=function(n,r){return n.addHandler(r,this),this};var Pb={Events:Te},Uc=ae.touch?"touchstart mousedown":"mousedown",In=ye.extend({options:{clickTolerance:3},initialize:function(n,r,l,h){T(this,h),this._element=n,this._dragStartTarget=r||n,this._preventOutline=l},enable:function(){this._enabled||(ve(this._dragStartTarget,Uc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(In._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,Uc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!Ba(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){In._dragging===this&&this.finishDrag();return}if(!(In._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(In._dragging=this,this._preventOutline&&Wa(this._element),Za(),es(),!this._moving)){this.fire("down");var r=n.touches?n.touches[0]:n,l=Rc(this._element);this._startPoint=new Y(r.clientX,r.clientY),this._startPos=Qn(this._element),this._parentScale=Ha(l);var h=n.type==="mousedown";ve(document,h?"mousemove":"touchmove",this._onMove,this),ve(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var r=n.touches&&n.touches.length===1?n.touches[0]:n,l=new Y(r.clientX,r.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,pt(n),this._moved||(this.fire("dragstart"),this._moved=!0,Se(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),ot(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){nt(document.body,"leaflet-dragging"),this._lastTarget&&(nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),Ua(),ts();var r=this._moved&&this._moving;this._moving=!1,In._dragging=!1,r&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function $c(n,r,l){var h,m=[1,4,2,8],v,w,C,M,V,Q,de,je;for(v=0,Q=n.length;v<Q;v++)n[v]._code=ti(n[v],r);for(C=0;C<4;C++){for(de=m[C],h=[],v=0,Q=n.length,w=Q-1;v<Q;w=v++)M=n[v],V=n[w],M._code&de?V._code&de||(je=hr(V,M,de,r,l),je._code=ti(je,r),h.push(je)):(V._code&de&&(je=hr(V,M,de,r,l),je._code=ti(je,r),h.push(je)),h.push(M));n=h}return n}function Wc(n,r){var l,h,m,v,w,C,M,V,Q;if(!n||n.length===0)throw new Error("latlngs not passed");Ut(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var de=U([0,0]),je=Ve(n),St=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());St<1700&&(de=eo(n));var ht=n.length,$t=[];for(l=0;l<ht;l++){var Ct=U(n[l]);$t.push(r.project(U([Ct.lat-de.lat,Ct.lng-de.lng])))}for(C=M=V=0,l=0,h=ht-1;l<ht;h=l++)m=$t[l],v=$t[h],w=m.y*v.x-v.y*m.x,M+=(m.x+v.x)*w,V+=(m.y+v.y)*w,C+=w*3;C===0?Q=$t[0]:Q=[M/C,V/C];var ji=r.unproject(ne(Q));return U([ji.lat+de.lat,ji.lng+de.lng])}function eo(n){for(var r=0,l=0,h=0,m=0;m<n.length;m++){var v=U(n[m]);r+=v.lat,l+=v.lng,h++}return U([r/h,l/h])}var Nb={__proto__:null,clipPolygon:$c,polygonCenter:Wc,centroid:eo};function Hc(n,r){if(!r||!n.length)return n.slice();var l=r*r;return n=kb(n,l),n=Cb(n,l),n}function qc(n,r,l){return Math.sqrt(rs(n,r,l,!0))}function jb(n,r,l){return rs(n,r,l)}function Cb(n,r){var l=n.length,h=typeof Uint8Array<"u"?Uint8Array:Array,m=new h(l);m[0]=m[l-1]=1,to(n,m,r,0,l-1);var v,w=[];for(v=0;v<l;v++)m[v]&&w.push(n[v]);return w}function to(n,r,l,h,m){var v=0,w,C,M;for(C=h+1;C<=m-1;C++)M=rs(n[C],n[h],n[m],!0),M>v&&(w=C,v=M);v>l&&(r[w]=1,to(n,r,l,h,w),to(n,r,l,w,m))}function kb(n,r){for(var l=[n[0]],h=1,m=0,v=n.length;h<v;h++)Ab(n[h],n[m])>r&&(l.push(n[h]),m=h);return m<v-1&&l.push(n[v-1]),l}var Kc;function Gc(n,r,l,h,m){var v=h?Kc:ti(n,l),w=ti(r,l),C,M,V;for(Kc=w;;){if(!(v|w))return[n,r];if(v&w)return!1;C=v||w,M=hr(n,r,C,l,m),V=ti(M,l),C===v?(n=M,v=V):(r=M,w=V)}}function hr(n,r,l,h,m){var v=r.x-n.x,w=r.y-n.y,C=h.min,M=h.max,V,Q;return l&8?(V=n.x+v*(M.y-n.y)/w,Q=M.y):l&4?(V=n.x+v*(C.y-n.y)/w,Q=C.y):l&2?(V=M.x,Q=n.y+w*(M.x-n.x)/v):l&1&&(V=C.x,Q=n.y+w*(C.x-n.x)/v),new Y(V,Q,m)}function ti(n,r){var l=0;return n.x<r.min.x?l|=1:n.x>r.max.x&&(l|=2),n.y<r.min.y?l|=4:n.y>r.max.y&&(l|=8),l}function Ab(n,r){var l=r.x-n.x,h=r.y-n.y;return l*l+h*h}function rs(n,r,l,h){var m=r.x,v=r.y,w=l.x-m,C=l.y-v,M=w*w+C*C,V;return M>0&&(V=((n.x-m)*w+(n.y-v)*C)/M,V>1?(m=l.x,v=l.y):V>0&&(m+=w*V,v+=C*V)),w=n.x-m,C=n.y-v,h?w*w+C*C:new Y(m,v)}function Ut(n){return!R(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Xc(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ut(n)}function Yc(n,r){var l,h,m,v,w,C,M,V;if(!n||n.length===0)throw new Error("latlngs not passed");Ut(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Q=U([0,0]),de=Ve(n),je=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());je<1700&&(Q=eo(n));var St=n.length,ht=[];for(l=0;l<St;l++){var $t=U(n[l]);ht.push(r.project(U([$t.lat-Q.lat,$t.lng-Q.lng])))}for(l=0,h=0;l<St-1;l++)h+=ht[l].distanceTo(ht[l+1])/2;if(h===0)V=ht[0];else for(l=0,v=0;l<St-1;l++)if(w=ht[l],C=ht[l+1],m=w.distanceTo(C),v+=m,v>h){M=(v-h)/m,V=[C.x-M*(C.x-w.x),C.y-M*(C.y-w.y)];break}var Ct=r.unproject(ne(V));return U([Ct.lat+Q.lat,Ct.lng+Q.lng])}var Lb={__proto__:null,simplify:Hc,pointToSegmentDistance:qc,closestPointOnSegment:jb,clipSegment:Gc,_getEdgeIntersection:hr,_getBitCode:ti,_sqClosestPointOnSegment:rs,isFlat:Ut,_flat:Xc,polylineCenter:Yc},no={project:function(n){return new Y(n.lng,n.lat)},unproject:function(n){return new ke(n.y,n.x)},bounds:new Re([-180,-90],[180,90])},io={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var r=Math.PI/180,l=this.R,h=n.lat*r,m=this.R_MINOR/l,v=Math.sqrt(1-m*m),w=v*Math.sin(h),C=Math.tan(Math.PI/4-h/2)/Math.pow((1-w)/(1+w),v/2);return h=-l*Math.log(Math.max(C,1e-10)),new Y(n.lng*r*l,h)},unproject:function(n){for(var r=180/Math.PI,l=this.R,h=this.R_MINOR/l,m=Math.sqrt(1-h*h),v=Math.exp(-n.y/l),w=Math.PI/2-2*Math.atan(v),C=0,M=.1,V;C<15&&Math.abs(M)>1e-7;C++)V=m*Math.sin(w),V=Math.pow((1-V)/(1+V),m/2),M=Math.PI/2-2*Math.atan(v*V)-w,w+=M;return new ke(w*r,n.x*r/l)}},Eb={__proto__:null,LonLat:no,Mercator:io,SphericalMercator:qe},Mb=a({},Fe,{code:"EPSG:3395",projection:io,transformation:function(){var n=.5/(Math.PI*io.R);return vt(n,.5,-n,.5)}()}),Qc=a({},Fe,{code:"EPSG:4326",projection:no,transformation:vt(1/180,1,-1/180,.5)}),Db=a({},Ne,{projection:no,transformation:vt(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,r){var l=r.lng-n.lng,h=r.lat-n.lat;return Math.sqrt(l*l+h*h)},infinite:!0});Ne.Earth=Fe,Ne.EPSG3395=Mb,Ne.EPSG3857=jt,Ne.EPSG900913=Vt,Ne.EPSG4326=Qc,Ne.Simple=Db;var Qt=ye.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[f(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[f(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var r=n.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var l=this.getEvents();r.on(l,this),this.once("remove",function(){r.off(l,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});Ae.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var r=f(n);return this._layers[r]?this:(this._layers[r]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var r=f(n);return this._layers[r]?(this._loaded&&n.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return f(n)in this._layers},eachLayer:function(n,r){for(var l in this._layers)n.call(r,this._layers[l]);return this},_addLayers:function(n){n=n?R(n)?n:[n]:[];for(var r=0,l=n.length;r<l;r++)this.addLayer(n[r])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[f(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var r=f(n);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,r=-1/0,l=this._getZoomSpan();for(var h in this._zoomBoundLayers){var m=this._zoomBoundLayers[h].options;n=m.minZoom===void 0?n:Math.min(n,m.minZoom),r=m.maxZoom===void 0?r:Math.max(r,m.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=n===1/0?void 0:n,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var wi=Qt.extend({initialize:function(n,r){T(this,r),this._layers={};var l,h;if(n)for(l=0,h=n.length;l<h;l++)this.addLayer(n[l])},addLayer:function(n){var r=this.getLayerId(n);return this._layers[r]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var r=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(n){var r=typeof n=="number"?n:this.getLayerId(n);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),l,h;for(l in this._layers)h=this._layers[l],h[n]&&h[n].apply(h,r);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,r){for(var l in this._layers)n.call(r,this._layers[l]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return f(n)}}),Rb=function(n,r){return new wi(n,r)},Tn=wi.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),wi.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),wi.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new He;for(var r in this._layers){var l=this._layers[r];n.extend(l.getBounds?l.getBounds():l.getLatLng())}return n}}),Ib=function(n,r){return new Tn(n,r)},Ti=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){T(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,r){var l=this._getIconUrl(n);if(!l){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(l,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(h,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(n,r){var l=this.options,h=l[r+"Size"];typeof h=="number"&&(h=[h,h]);var m=ne(h),v=ne(r==="shadow"&&l.shadowAnchor||l.iconAnchor||m&&m.divideBy(2,!0));n.className="leaflet-marker-"+r+" "+(l.className||""),v&&(n.style.marginLeft=-v.x+"px",n.style.marginTop=-v.y+"px"),m&&(n.style.width=m.x+"px",n.style.height=m.y+"px")},_createImg:function(n,r){return r=r||document.createElement("img"),r.src=n,r},_getIconUrl:function(n){return ae.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Ob(n){return new Ti(n)}var as=Ti.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof as.imagePath!="string"&&(as.imagePath=this._detectIconPath()),(this.options.imagePath||as.imagePath)+Ti.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var r=function(l,h,m){var v=h.exec(l);return v&&v[m]};return n=r(n,/^url\((['"])?(.+)\1\)$/,2),n&&r(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Me("div","leaflet-default-icon-path",document.body),r=Ji(n,"background-image")||Ji(n,"backgroundImage");if(document.body.removeChild(n),r=this._stripUrl(r),r)return r;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),Jc=cn.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new In(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var r=this._marker,l=r._map,h=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,v=Qn(r._icon),w=l.getPixelBounds(),C=l.getPixelOrigin(),M=We(w.min._subtract(C).add(m),w.max._subtract(C).subtract(m));if(!M.contains(v)){var V=ne((Math.max(M.max.x,v.x)-M.max.x)/(w.max.x-M.max.x)-(Math.min(M.min.x,v.x)-M.min.x)/(w.min.x-M.min.x),(Math.max(M.max.y,v.y)-M.max.y)/(w.max.y-M.max.y)-(Math.min(M.min.y,v.y)-M.min.y)/(w.min.y-M.min.y)).multiplyBy(h);l.panBy(V,{animate:!1}),this._draggable._newPos._add(V),this._draggable._startPos._add(V),ot(r._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=z(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,n)))},_onDrag:function(n){var r=this._marker,l=r._shadow,h=Qn(r._icon),m=r._map.layerPointToLatLng(h);l&&ot(l,h),r._latlng=m,n.latlng=m,n.oldLatLng=this._oldLatLng,r.fire("move",n).fire("drag",n)},_onDragEnd:function(n){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),fr=Qt.extend({options:{icon:new as,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,r){T(this,r),this._latlng=U(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var r=this._latlng;return this._latlng=U(n),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=n.icon.createIcon(this._icon),h=!1;l!==this._icon&&(this._icon&&this._removeIcon(),h=!0,n.title&&(l.title=n.title),l.tagName==="IMG"&&(l.alt=n.alt||"")),Se(l,r),n.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(l,"focus",this._panOnFocus,this);var m=n.icon.createShadow(this._shadow),v=!1;m!==this._shadow&&(this._removeShadow(),v=!0),m&&(Se(m,r),m.alt=""),this._shadow=m,n.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&v&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),Ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ke(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&ot(this._icon,n),this._shadow&&ot(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Jc)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Jc(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&Zt(this._icon,n),this._shadow&&Zt(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var r=this.options.icon.options,l=r.iconSize?ne(r.iconSize):ne(0,0),h=r.iconAnchor?ne(r.iconAnchor):ne(0,0);n.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:l.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Vb(n,r){return new fr(n,r)}var On=Qt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return T(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),mr=On.extend({options:{fill:!0,radius:10},initialize:function(n,r){T(this,r),this._latlng=U(n),this._radius=this.options.radius},setLatLng:function(n){var r=this._latlng;return this._latlng=U(n),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var r=n&&n.radius||this._radius;return On.prototype.setStyle.call(this,n),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,r=this._radiusY||n,l=this._clickTolerance(),h=[n+l,r+l];this._pxBounds=new Re(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bb(n,r){return new mr(n,r)}var so=mr.extend({initialize:function(n,r,l){if(typeof r=="number"&&(r=a({},l,{radius:r})),T(this,r),this._latlng=U(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new He(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:On.prototype.setStyle,_project:function(){var n=this._latlng.lng,r=this._latlng.lat,l=this._map,h=l.options.crs;if(h.distance===Fe.distance){var m=Math.PI/180,v=this._mRadius/Fe.R/m,w=l.project([r+v,n]),C=l.project([r-v,n]),M=w.add(C).divideBy(2),V=l.unproject(M).lat,Q=Math.acos((Math.cos(v*m)-Math.sin(r*m)*Math.sin(V*m))/(Math.cos(r*m)*Math.cos(V*m)))/m;(isNaN(Q)||Q===0)&&(Q=v/Math.cos(Math.PI/180*r)),this._point=M.subtract(l.getPixelOrigin()),this._radius=isNaN(Q)?0:M.x-l.project([V,n-Q]).x,this._radiusY=M.y-w.y}else{var de=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(de).x}this._updateBounds()}});function Fb(n,r,l){return new so(n,r,l)}var Sn=On.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,r){T(this,r),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var r=1/0,l=null,h=rs,m,v,w=0,C=this._parts.length;w<C;w++)for(var M=this._parts[w],V=1,Q=M.length;V<Q;V++){m=M[V-1],v=M[V];var de=h(n,m,v,!0);de<r&&(r=de,l=h(n,m,v))}return l&&(l.distance=Math.sqrt(r)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,r){return r=r||this._defaultShape(),n=U(n),r.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new He,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return Ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var r=[],l=Ut(n),h=0,m=n.length;h<m;h++)l?(r[h]=U(n[h]),this._bounds.extend(r[h])):r[h]=this._convertLatLngs(n[h]);return r},_project:function(){var n=new Re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),r=new Y(n,n);this._rawPxBounds&&(this._pxBounds=new Re([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(n,r,l){var h=n[0]instanceof ke,m=n.length,v,w;if(h){for(w=[],v=0;v<m;v++)w[v]=this._map.latLngToLayerPoint(n[v]),l.extend(w[v]);r.push(w)}else for(v=0;v<m;v++)this._projectLatlngs(n[v],r,l)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,l,h,m,v,w,C,M;for(l=0,m=0,v=this._rings.length;l<v;l++)for(M=this._rings[l],h=0,w=M.length;h<w-1;h++)C=Gc(M[h],M[h+1],n,h,!0),C&&(r[m]=r[m]||[],r[m].push(C[0]),(C[1]!==M[h+1]||h===w-2)&&(r[m].push(C[1]),m++))}},_simplifyPoints:function(){for(var n=this._parts,r=this.options.smoothFactor,l=0,h=n.length;l<h;l++)n[l]=Hc(n[l],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,r){var l,h,m,v,w,C,M=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(l=0,v=this._parts.length;l<v;l++)for(C=this._parts[l],h=0,w=C.length,m=w-1;h<w;m=h++)if(!(!r&&h===0)&&qc(n,C[m],C[h])<=M)return!0;return!1}});function zb(n,r){return new Sn(n,r)}Sn._flat=Xc;var Si=Sn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var r=Sn.prototype._convertLatLngs.call(this,n),l=r.length;return l>=2&&r[0]instanceof ke&&r[0].equals(r[l-1])&&r.pop(),r},_setLatLngs:function(n){Sn.prototype._setLatLngs.call(this,n),Ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,r=this.options.weight,l=new Y(r,r);if(n=new Re(n.min.subtract(l),n.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,m=this._rings.length,v;h<m;h++)v=$c(this._rings[h],n,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var r=!1,l,h,m,v,w,C,M,V;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(v=0,M=this._parts.length;v<M;v++)for(l=this._parts[v],w=0,V=l.length,C=V-1;w<V;C=w++)h=l[w],m=l[C],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(r=!r);return r||Sn.prototype._containsPoint.call(this,n,!0)}});function Zb(n,r){return new Si(n,r)}var Pn=Tn.extend({initialize:function(n,r){T(this,r),this._layers={},n&&this.addData(n)},addData:function(n){var r=R(n)?n:n.features,l,h,m;if(r){for(l=0,h=r.length;l<h;l++)m=r[l],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var v=this.options;if(v.filter&&!v.filter(n))return this;var w=pr(n,v);return w?(w.feature=vr(n),w.defaultOptions=w.options,this.resetStyle(w),v.onEachFeature&&v.onEachFeature(n,w),this.addLayer(w)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=a({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(r){this._setLayerStyle(r,n)},this)},_setLayerStyle:function(n,r){n.setStyle&&(typeof r=="function"&&(r=r(n.feature)),n.setStyle(r))}});function pr(n,r){var l=n.type==="Feature"?n.geometry:n,h=l?l.coordinates:null,m=[],v=r&&r.pointToLayer,w=r&&r.coordsToLatLng||ro,C,M,V,Q;if(!h&&!l)return null;switch(l.type){case"Point":return C=w(h),eu(v,n,C,r);case"MultiPoint":for(V=0,Q=h.length;V<Q;V++)C=w(h[V]),m.push(eu(v,n,C,r));return new Tn(m);case"LineString":case"MultiLineString":return M=gr(h,l.type==="LineString"?0:1,w),new Sn(M,r);case"Polygon":case"MultiPolygon":return M=gr(h,l.type==="Polygon"?1:2,w),new Si(M,r);case"GeometryCollection":for(V=0,Q=l.geometries.length;V<Q;V++){var de=pr({geometry:l.geometries[V],type:"Feature",properties:n.properties},r);de&&m.push(de)}return new Tn(m);case"FeatureCollection":for(V=0,Q=l.features.length;V<Q;V++){var je=pr(l.features[V],r);je&&m.push(je)}return new Tn(m);default:throw new Error("Invalid GeoJSON object.")}}function eu(n,r,l,h){return n?n(r,l):new fr(l,h&&h.markersInheritOptions&&h)}function ro(n){return new ke(n[1],n[0],n[2])}function gr(n,r,l){for(var h=[],m=0,v=n.length,w;m<v;m++)w=r?gr(n[m],r-1,l):(l||ro)(n[m]),h.push(w);return h}function ao(n,r){return n=U(n),n.alt!==void 0?[x(n.lng,r),x(n.lat,r),x(n.alt,r)]:[x(n.lng,r),x(n.lat,r)]}function yr(n,r,l,h){for(var m=[],v=0,w=n.length;v<w;v++)m.push(r?yr(n[v],Ut(n[v])?0:r-1,l,h):ao(n[v],h));return!r&&l&&m.length>0&&m.push(m[0].slice()),m}function Pi(n,r){return n.feature?a({},n.feature,{geometry:r}):vr(r)}function vr(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var oo={toGeoJSON:function(n){return Pi(this,{type:"Point",coordinates:ao(this.getLatLng(),n)})}};fr.include(oo),so.include(oo),mr.include(oo),Sn.include({toGeoJSON:function(n){var r=!Ut(this._latlngs),l=yr(this._latlngs,r?1:0,!1,n);return Pi(this,{type:(r?"Multi":"")+"LineString",coordinates:l})}}),Si.include({toGeoJSON:function(n){var r=!Ut(this._latlngs),l=r&&!Ut(this._latlngs[0]),h=yr(this._latlngs,l?2:r?1:0,!0,n);return r||(h=[h]),Pi(this,{type:(l?"Multi":"")+"Polygon",coordinates:h})}}),wi.include({toMultiPoint:function(n){var r=[];return this.eachLayer(function(l){r.push(l.toGeoJSON(n).geometry.coordinates)}),Pi(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(n){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(n);var l=r==="GeometryCollection",h=[];return this.eachLayer(function(m){if(m.toGeoJSON){var v=m.toGeoJSON(n);if(l)h.push(v.geometry);else{var w=vr(v);w.type==="FeatureCollection"?h.push.apply(h,w.features):h.push(w)}}}),l?Pi(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function tu(n,r){return new Pn(n,r)}var Ub=tu,xr=Qt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,r,l){this._url=n,this._bounds=Ve(r),T(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&_i(this._image),this},bringToBack:function(){return this._map&&bi(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Ve(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",r=this._image=n?this._url:Me("img");if(Se(r,"leaflet-image-layer"),this._zoomAnimated&&Se(r,"leaflet-zoom-animated"),this.options.className&&Se(r,this.options.className),r.onselectstart=y,r.onmousemove=y,r.onload=u(this.fire,this,"load"),r.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(n){var r=this._map.getZoomScale(n.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Yn(this._image,l,r)},_reset:function(){var n=this._image,r=new Re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=r.getSize();ot(n,r.min),n.style.width=l.x+"px",n.style.height=l.y+"px"},_updateOpacity:function(){Zt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),$b=function(n,r,l){return new xr(n,r,l)},nu=xr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",r=this._image=n?this._url:Me("video");if(Se(r,"leaflet-image-layer"),this._zoomAnimated&&Se(r,"leaflet-zoom-animated"),this.options.className&&Se(r,this.options.className),r.onselectstart=y,r.onmousemove=y,r.onloadeddata=u(this.fire,this,"load"),n){for(var l=r.getElementsByTagName("source"),h=[],m=0;m<l.length;m++)h.push(l[m].src);this._url=l.length>0?h:[r.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var w=Me("source");w.src=this._url[v],r.appendChild(w)}}});function Wb(n,r,l){return new nu(n,r,l)}var iu=xr.extend({_initImage:function(){var n=this._image=this._url;Se(n,"leaflet-image-layer"),this._zoomAnimated&&Se(n,"leaflet-zoom-animated"),this.options.className&&Se(n,this.options.className),n.onselectstart=y,n.onmousemove=y}});function Hb(n,r,l){return new iu(n,r,l)}var un=Qt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,r){n&&(n instanceof ke||R(n))?(this._latlng=U(n),T(this,r)):(T(this,n),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&Zt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&Zt(this._container,1),this.bringToFront(),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(Zt(this._container,0),this._removeTimeout=setTimeout(u(Ke,void 0,this._container),200)):Ke(this._container),this.options.interactive&&(nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=U(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_i(this._container),this},bringToBack:function(){return this._map&&bi(this._container),this},_prepareOpen:function(n){var r=this._source;if(!r._map)return!1;if(r instanceof Tn){r=null;var l=this._source._layers;for(var h in l)if(l[h]._map){r=l[h];break}if(!r)return!1;this._source=r}if(!n)if(r.getCenter)n=r.getCenter();else if(r.getLatLng)n=r.getLatLng();else if(r.getBounds)n=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")n.innerHTML=r;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),r=ne(this.options.offset),l=this._getAnchor();this._zoomAnimated?ot(this._container,n.add(l)):r=r.add(n).add(l);var h=this._containerBottom=-r.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=h+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Ae.include({_initOverlay:function(n,r,l,h){var m=r;return m instanceof n||(m=new n(h).setContent(r)),l&&m.setLatLng(l),m}}),Qt.include({_initOverlay:function(n,r,l,h){var m=l;return m instanceof n?(T(m,h),m._source=this):(m=r&&!h?r:new n(h,this),m.setContent(l)),m}});var _r=un.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,un.prototype.openOn.call(this,n)},onAdd:function(n){un.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof On||this._source.on("preclick",Jn))},onRemove:function(n){un.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof On||this._source.off("preclick",Jn))},getEvents:function(){var n=un.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",r=this._container=Me("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=Me("div",n+"-content-wrapper",r);if(this._contentNode=Me("div",n+"-content",l),is(r),Xa(this._contentNode),ve(r,"contextmenu",Jn),this._tipContainer=Me("div",n+"-tip-container",r),this._tip=Me("div",n+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=Me("a",n+"-close-button",r);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',ve(h,"click",function(m){pt(m),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,r=n.style;r.width="",r.whiteSpace="nowrap";var l=n.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),r.width=l+1+"px",r.whiteSpace="",r.height="";var h=n.offsetHeight,m=this.options.maxHeight,v="leaflet-popup-scrolled";m&&h>m?(r.height=m+"px",Se(n,v)):nt(n,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),l=this._getAnchor();ot(this._container,r.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,r=parseInt(Ji(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+r,h=this._containerWidth,m=new Y(this._containerLeft,-l-this._containerBottom);m._add(Qn(this._container));var v=n.layerPointToContainerPoint(m),w=ne(this.options.autoPanPadding),C=ne(this.options.autoPanPaddingTopLeft||w),M=ne(this.options.autoPanPaddingBottomRight||w),V=n.getSize(),Q=0,de=0;v.x+h+M.x>V.x&&(Q=v.x+h-V.x+M.x),v.x-Q-C.x<0&&(Q=v.x-C.x),v.y+l+M.y>V.y&&(de=v.y+l-V.y+M.y),v.y-de-C.y<0&&(de=v.y-C.y),(Q||de)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([Q,de]))}},_getAnchor:function(){return ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qb=function(n,r){return new _r(n,r)};Ae.mergeOptions({closePopupOnClick:!0}),Ae.include({openPopup:function(n,r,l){return this._initOverlay(_r,n,r,l).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),Qt.include({bindPopup:function(n,r){return this._popup=this._initOverlay(_r,this._popup,n,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof Tn||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){ei(n);var r=n.layer||n.target;if(this._popup._source===r&&!(r instanceof On)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=r,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var br=un.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){un.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){un.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=un.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",r=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Me("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var r,l,h=this._map,m=this._container,v=h.latLngToContainerPoint(h.getCenter()),w=h.layerPointToContainerPoint(n),C=this.options.direction,M=m.offsetWidth,V=m.offsetHeight,Q=ne(this.options.offset),de=this._getAnchor();C==="top"?(r=M/2,l=V):C==="bottom"?(r=M/2,l=0):C==="center"?(r=M/2,l=V/2):C==="right"?(r=0,l=V/2):C==="left"?(r=M,l=V/2):w.x<v.x?(C="right",r=0,l=V/2):(C="left",r=M+(Q.x+de.x)*2,l=V/2),n=n.subtract(ne(r,l,!0)).add(Q).add(de),nt(m,"leaflet-tooltip-right"),nt(m,"leaflet-tooltip-left"),nt(m,"leaflet-tooltip-top"),nt(m,"leaflet-tooltip-bottom"),Se(m,"leaflet-tooltip-"+C),ot(m,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&Zt(this._container,n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(r)},_getAnchor:function(){return ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Kb=function(n,r){return new br(n,r)};Ae.include({openTooltip:function(n,r,l){return this._initOverlay(br,n,r,l).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),Qt.include({bindTooltip:function(n,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(br,this._tooltip,n,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var r=n?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[r](l),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof Tn||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var r=typeof n.getElement=="function"&&n.getElement();r&&(ve(r,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),ve(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var r=typeof n.getElement=="function"&&n.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var r=this;this._map.once("moveend",function(){r._openOnceFlag=!1,r._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var r=n.latlng,l,h;this._tooltip.options.sticky&&n.originalEvent&&(l=this._map.mouseEventToContainerPoint(n.originalEvent),h=this._map.containerPointToLayerPoint(l),r=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(r)}});var su=Ti.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var r=n&&n.tagName==="DIV"?n:document.createElement("div"),l=this.options;if(l.html instanceof Element?(or(r),r.appendChild(l.html)):r.innerHTML=l.html!==!1?l.html:"",l.bgPos){var h=ne(l.bgPos);r.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function Gb(n){return new su(n)}Ti.Default=as;var os=Qt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){T(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Ke(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_i(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(bi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof Y?n:new Y(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r=this.getPane().children,l=-n(-1/0,1/0),h=0,m=r.length,v;h<m;h++)v=r[h].style.zIndex,r[h]!==this._container&&v&&(l=n(l,+v));isFinite(l)&&(this.options.zIndex=l+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){Zt(this._container,this.options.opacity);var n=+new Date,r=!1,l=!1;for(var h in this._tiles){var m=this._tiles[h];if(!(!m.current||!m.loaded)){var v=Math.min(1,(n-m.loaded)/200);Zt(m.el,v),v<1?r=!0:(m.active?l=!0:this._onOpaqueTile(m),m.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),r&&(H(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Me("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,r=this.options.maxZoom;if(n!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===n?(this._levels[l].el.style.zIndex=r-Math.abs(n-l),this._onUpdateLevel(l)):(Ke(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var h=this._levels[n],m=this._map;return h||(h=this._levels[n]={},h.el=Me("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=r,h.origin=m.project(m.unproject(m.getPixelOrigin()),n).round(),h.zoom=n,this._setZoomTransform(h,m.getCenter(),m.getZoom()),y(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var n,r,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)r=this._tiles[n],r.retain=r.current;for(n in this._tiles)if(r=this._tiles[n],r.current&&!r.active){var h=r.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var r in this._tiles)this._tiles[r].coords.z===n&&this._removeTile(r)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Ke(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,r,l,h){var m=Math.floor(n/2),v=Math.floor(r/2),w=l-1,C=new Y(+m,+v);C.z=+w;var M=this._tileCoordsToKey(C),V=this._tiles[M];return V&&V.active?(V.retain=!0,!0):(V&&V.loaded&&(V.retain=!0),w>h?this._retainParent(m,v,w,h):!1)},_retainChildren:function(n,r,l,h){for(var m=2*n;m<2*n+2;m++)for(var v=2*r;v<2*r+2;v++){var w=new Y(m,v);w.z=l+1;var C=this._tileCoordsToKey(w),M=this._tiles[C];if(M&&M.active){M.retain=!0;continue}else M&&M.loaded&&(M.retain=!0);l+1<h&&this._retainChildren(m,v,l+1,h)}},_resetView:function(n){var r=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var r=this.options;return r.minNativeZoom!==void 0&&n<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<n?r.maxNativeZoom:n},_setView:function(n,r,l,h){var m=Math.round(r);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var v=this.options.updateWhenZooming&&m!==this._tileZoom;(!h||v)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(n),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(n,r)},_setZoomTransforms:function(n,r){for(var l in this._levels)this._setZoomTransform(this._levels[l],n,r)},_setZoomTransform:function(n,r,l){var h=this._map.getZoomScale(l,n.zoom),m=n.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(r,l)).round();ae.any3d?Yn(n.el,m,h):ot(n.el,m)},_resetGrid:function(){var n=this._map,r=n.options.crs,l=this._tileSize=this.getTileSize(),h=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,r.wrapLng[0]],h).x/l.x),Math.ceil(n.project([0,r.wrapLng[1]],h).x/l.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([r.wrapLat[0],0],h).y/l.x),Math.ceil(n.project([r.wrapLat[1],0],h).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var r=this._map,l=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),h=r.getZoomScale(l,this._tileZoom),m=r.project(n,this._tileZoom).floor(),v=r.getSize().divideBy(h*2);return new Re(m.subtract(v),m.add(v))},_update:function(n){var r=this._map;if(r){var l=this._clampZoom(r.getZoom());if(n===void 0&&(n=r.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(n),m=this._pxBoundsToTileRange(h),v=m.getCenter(),w=[],C=this.options.keepBuffer,M=new Re(m.getBottomLeft().subtract([C,-C]),m.getTopRight().add([C,-C]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var V in this._tiles){var Q=this._tiles[V].coords;(Q.z!==this._tileZoom||!M.contains(new Y(Q.x,Q.y)))&&(this._tiles[V].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(n,l);return}for(var de=m.min.y;de<=m.max.y;de++)for(var je=m.min.x;je<=m.max.x;je++){var St=new Y(je,de);if(St.z=this._tileZoom,!!this._isValidTile(St)){var ht=this._tiles[this._tileCoordsToKey(St)];ht?ht.current=!0:w.push(St)}}if(w.sort(function(Ct,ji){return Ct.distanceTo(v)-ji.distanceTo(v)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $t=document.createDocumentFragment();for(je=0;je<w.length;je++)this._addTile(w[je],$t);this._level.el.appendChild($t)}}}},_isValidTile:function(n){var r=this._map.options.crs;if(!r.infinite){var l=this._globalTileRange;if(!r.wrapLng&&(n.x<l.min.x||n.x>l.max.x)||!r.wrapLat&&(n.y<l.min.y||n.y>l.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(n);return Ve(this.options.bounds).overlaps(h)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var r=this._map,l=this.getTileSize(),h=n.scaleBy(l),m=h.add(l),v=r.unproject(h,n.z),w=r.unproject(m,n.z);return[v,w]},_tileCoordsToBounds:function(n){var r=this._tileCoordsToNwSe(n),l=new He(r[0],r[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var r=n.split(":"),l=new Y(+r[0],+r[1]);return l.z=+r[2],l},_removeTile:function(n){var r=this._tiles[n];r&&(Ke(r.el),delete this._tiles[n],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){Se(n,"leaflet-tile");var r=this.getTileSize();n.style.width=r.x+"px",n.style.height=r.y+"px",n.onselectstart=y,n.onmousemove=y,ae.ielt9&&this.options.opacity<1&&Zt(n,this.options.opacity)},_addTile:function(n,r){var l=this._getTilePos(n),h=this._tileCoordsToKey(n),m=this.createTile(this._wrapCoords(n),u(this._tileReady,this,n));this._initTile(m),this.createTile.length<2&&z(u(this._tileReady,this,n,null,m)),ot(m,l),this._tiles[h]={el:m,coords:n,current:!0},r.appendChild(m),this.fire("tileloadstart",{tile:m,coords:n})},_tileReady:function(n,r,l){r&&this.fire("tileerror",{error:r,tile:l,coords:n});var h=this._tileCoordsToKey(n);l=this._tiles[h],l&&(l.loaded=+new Date,this._map._fadeAnimated?(Zt(l.el,0),H(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),r||(Se(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var r=new Y(this._wrapX?g(n.x,this._wrapX):n.x,this._wrapY?g(n.y,this._wrapY):n.y);return r.z=n.z,r},_pxBoundsToTileRange:function(n){var r=this.getTileSize();return new Re(n.min.unscaleBy(r).floor(),n.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function Xb(n){return new os(n)}var Ni=os.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,r){this._url=n,r=T(this,r),r.detectRetina&&ae.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,r){return this._url===n&&r===void 0&&(r=!0),this._url=n,r||this.redraw(),this},createTile:function(n,r){var l=document.createElement("img");return ve(l,"load",u(this._tileOnLoad,this,r,l)),ve(l,"error",u(this._tileOnError,this,r,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(n),l},getTileUrl:function(n){var r={r:ae.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-n.y;this.options.tms&&(r.y=l),r["-y"]=l}return j(this._url,a(r,this.options))},_tileOnLoad:function(n,r){ae.ielt9?setTimeout(u(n,this,null,r),0):n(null,r)},_tileOnError:function(n,r,l){var h=this.options.errorTileUrl;h&&r.getAttribute("src")!==h&&(r.src=h),n(l,r)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,r=this.options.maxZoom,l=this.options.zoomReverse,h=this.options.zoomOffset;return l&&(n=r-n),n+h},_getSubdomain:function(n){var r=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var n,r;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(r=this._tiles[n].el,r.onload=y,r.onerror=y,!r.complete)){r.src=O;var l=this._tiles[n].coords;Ke(r),delete this._tiles[n],this.fire("tileabort",{tile:r,coords:l})}},_removeTile:function(n){var r=this._tiles[n];if(r)return r.el.setAttribute("src",O),os.prototype._removeTile.call(this,n)},_tileReady:function(n,r,l){if(!(!this._map||l&&l.getAttribute("src")===O))return os.prototype._tileReady.call(this,n,r,l)}});function ru(n,r){return new Ni(n,r)}var au=Ni.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,r){this._url=n;var l=a({},this.defaultWmsParams);for(var h in r)h in this.options||(l[h]=r[h]);r=T(this,r);var m=r.detectRetina&&ae.retina?2:1,v=this.getTileSize();l.width=v.x*m,l.height=v.y*m,this.wmsParams=l},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,Ni.prototype.onAdd.call(this,n)},getTileUrl:function(n){var r=this._tileCoordsToNwSe(n),l=this._crs,h=We(l.project(r[0]),l.project(r[1])),m=h.min,v=h.max,w=(this._wmsVersion>=1.3&&this._crs===Qc?[m.y,m.x,v.y,v.x]:[m.x,m.y,v.x,v.y]).join(","),C=Ni.prototype.getTileUrl.call(this,n);return C+A(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(n,r){return a(this.wmsParams,n),r||this.redraw(),this}});function Yb(n,r){return new au(n,r)}Ni.WMS=au,ru.wms=Yb;var Nn=Qt.extend({options:{padding:.1},initialize:function(n){T(this,n),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,r){var l=this._map.getZoomScale(r,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,r),v=h.multiplyBy(-l).add(m).subtract(this._map._getNewPixelOrigin(n,r));ae.any3d?Yn(this._container,v,l):ot(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,r=this._map.getSize(),l=this._map.containerPointToLayerPoint(r.multiplyBy(-n)).round();this._bounds=new Re(l,l.add(r.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ou=Nn.extend({options:{tolerance:0},getEvents:function(){var n=Nn.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");ve(n,"mousemove",this._onMouseMove,this),ve(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ve(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,Ke(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var r in this._layers)n=this._layers[r],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nn.prototype._update.call(this);var n=this._bounds,r=this._container,l=n.getSize(),h=ae.retina?2:1;ot(r,n.min),r.width=h*l.x,r.height=h*l.y,r.style.width=l.x+"px",r.style.height=l.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){Nn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[f(n)]=n;var r=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var r=n._order,l=r.next,h=r.prev;l?l.prev=h:this._drawLast=h,h?h.next=l:this._drawFirst=l,delete n._order,delete this._layers[f(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var r=n.options.dashArray.split(/[, ]+/),l=[],h,m;for(m=0;m<r.length;m++){if(h=Number(r[m]),isNaN(h))return;l.push(h)}n.options._dashArray=l}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var r=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Re,this._redrawBounds.extend(n._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(n._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var r=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,r=this._redrawBounds;if(this._ctx.save(),r){var l=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)n=h.layer,(!r||n._pxBounds&&n._pxBounds.intersects(r))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,r){if(this._drawing){var l,h,m,v,w=n._parts,C=w.length,M=this._ctx;if(C){for(M.beginPath(),l=0;l<C;l++){for(h=0,m=w[l].length;h<m;h++)v=w[l][h],M[h?"lineTo":"moveTo"](v.x,v.y);r&&M.closePath()}this._fillStroke(M,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var r=n._point,l=this._ctx,h=Math.max(Math.round(n._radius),1),m=(Math.max(Math.round(n._radiusY),1)||h)/h;m!==1&&(l.save(),l.scale(1,m)),l.beginPath(),l.arc(r.x,r.y/m,h,0,Math.PI*2,!1),m!==1&&l.restore(),this._fillStroke(l,n)}},_fillStroke:function(n,r){var l=r.options;l.fill&&(n.globalAlpha=l.fillOpacity,n.fillStyle=l.fillColor||l.color,n.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(n.setLineDash&&n.setLineDash(r.options&&r.options._dashArray||[]),n.globalAlpha=l.opacity,n.lineWidth=l.weight,n.strokeStyle=l.color,n.lineCap=l.lineCap,n.lineJoin=l.lineJoin,n.stroke())},_onClick:function(n){for(var r=this._map.mouseEventToLayerPoint(n),l,h,m=this._drawFirst;m;m=m.next)l=m.layer,l.options.interactive&&l._containsPoint(r)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(l))&&(h=l);this._fireEvent(h?[h]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,r)}},_handleMouseOut:function(n){var r=this._hoveredLayer;r&&(nt(this._container,"leaflet-interactive"),this._fireEvent([r],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,r){if(!this._mouseHoverThrottled){for(var l,h,m=this._drawFirst;m;m=m.next)l=m.layer,l.options.interactive&&l._containsPoint(r)&&(h=l);h!==this._hoveredLayer&&(this._handleMouseOut(n),h&&(Se(this._container,"leaflet-interactive"),this._fireEvent([h],n,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,r,l){this._map._fireDOMEvent(r,l||r.type,n)},_bringToFront:function(n){var r=n._order;if(r){var l=r.next,h=r.prev;if(l)l.prev=h;else return;h?h.next=l:l&&(this._drawFirst=l),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(n)}},_bringToBack:function(n){var r=n._order;if(r){var l=r.next,h=r.prev;if(h)h.next=l;else return;l?l.prev=h:h&&(this._drawLast=h),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(n)}}});function lu(n){return ae.canvas?new ou(n):null}var ls=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Qb={_initContainer:function(){this._container=Me("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nn.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var r=n._container=ls("shape");Se(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",n._path=ls("path"),r.appendChild(n._path),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){var r=n._container;this._container.appendChild(r),n.options.interactive&&n.addInteractiveTarget(r)},_removePath:function(n){var r=n._container;Ke(r),n.removeInteractiveTarget(r),delete this._layers[f(n)]},_updateStyle:function(n){var r=n._stroke,l=n._fill,h=n.options,m=n._container;m.stroked=!!h.stroke,m.filled=!!h.fill,h.stroke?(r||(r=n._stroke=ls("stroke")),m.appendChild(r),r.weight=h.weight+"px",r.color=h.color,r.opacity=h.opacity,h.dashArray?r.dashStyle=R(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=h.lineCap.replace("butt","flat"),r.joinstyle=h.lineJoin):r&&(m.removeChild(r),n._stroke=null),h.fill?(l||(l=n._fill=ls("fill")),m.appendChild(l),l.color=h.fillColor||h.color,l.opacity=h.fillOpacity):l&&(m.removeChild(l),n._fill=null)},_updateCircle:function(n){var r=n._point.round(),l=Math.round(n._radius),h=Math.round(n._radiusY||l);this._setPath(n,n._empty()?"M0 0":"AL "+r.x+","+r.y+" "+l+","+h+" 0,"+65535*360)},_setPath:function(n,r){n._path.v=r},_bringToFront:function(n){_i(n._container)},_bringToBack:function(n){bi(n._container)}},wr=ae.vml?ls:Bt,cs=Nn.extend({_initContainer:function(){this._container=wr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ke(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nn.prototype._update.call(this);var n=this._bounds,r=n.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,l.setAttribute("width",r.x),l.setAttribute("height",r.y)),ot(l,n.min),l.setAttribute("viewBox",[n.min.x,n.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(n){var r=n._path=wr("path");n.options.className&&Se(r,n.options.className),n.options.interactive&&Se(r,"leaflet-interactive"),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Ke(n._path),n.removeInteractiveTarget(n._path),delete this._layers[f(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var r=n._path,l=n.options;r&&(l.stroke?(r.setAttribute("stroke",l.color),r.setAttribute("stroke-opacity",l.opacity),r.setAttribute("stroke-width",l.weight),r.setAttribute("stroke-linecap",l.lineCap),r.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?r.setAttribute("stroke-dasharray",l.dashArray):r.removeAttribute("stroke-dasharray"),l.dashOffset?r.setAttribute("stroke-dashoffset",l.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),l.fill?(r.setAttribute("fill",l.fillColor||l.color),r.setAttribute("fill-opacity",l.fillOpacity),r.setAttribute("fill-rule",l.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(n,r){this._setPath(n,bn(n._parts,r))},_updateCircle:function(n){var r=n._point,l=Math.max(Math.round(n._radius),1),h=Math.max(Math.round(n._radiusY),1)||l,m="a"+l+","+h+" 0 1,0 ",v=n._empty()?"M0 0":"M"+(r.x-l)+","+r.y+m+l*2+",0 "+m+-l*2+",0 ";this._setPath(n,v)},_setPath:function(n,r){n._path.setAttribute("d",r)},_bringToFront:function(n){_i(n._path)},_bringToBack:function(n){bi(n._path)}});ae.vml&&cs.include(Qb);function cu(n){return ae.svg||ae.vml?new cs(n):null}Ae.include({getRenderer:function(n){var r=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var r=this._paneRenderers[n];return r===void 0&&(r=this._createRenderer({pane:n}),this._paneRenderers[n]=r),r},_createRenderer:function(n){return this.options.preferCanvas&&lu(n)||cu(n)}});var uu=Si.extend({initialize:function(n,r){Si.prototype.initialize.call(this,this._boundsToLatLngs(n),r)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Ve(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Jb(n,r){return new uu(n,r)}cs.create=wr,cs.pointsToPath=bn,Pn.geometryToLayer=pr,Pn.coordsToLatLng=ro,Pn.coordsToLatLngs=gr,Pn.latLngToCoords=ao,Pn.latLngsToCoords=yr,Pn.getFeature=Pi,Pn.asFeature=vr,Ae.mergeOptions({boxZoom:!0});var du=cn.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),es(),Za(),this._startPoint=this._map.mouseEventToContainerPoint(n),ve(document,{contextmenu:ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Me("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var r=new Re(this._point,this._startPoint),l=r.getSize();ot(this._box,r.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Ke(this._box),nt(this._container,"leaflet-crosshair")),ts(),Ua(),Ue(document,{contextmenu:ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var r=new He(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ae.addInitHook("addHandler","boxZoom",du),Ae.mergeOptions({doubleClickZoom:!0});var hu=cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var r=this._map,l=r.getZoom(),h=r.options.zoomDelta,m=n.originalEvent.shiftKey?l-h:l+h;r.options.doubleClickZoom==="center"?r.setZoom(m):r.setZoomAround(n.containerPoint,m)}});Ae.addInitHook("addHandler","doubleClickZoom",hu),Ae.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var fu=cn.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new In(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){nt(this._map._container,"leaflet-grab"),nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=Ve(this._map.options.maxBounds);this._offsetLimit=We(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var r=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(r),this._prunePositions(r)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,r){return n-(n-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;n.x<r.min.x&&(n.x=this._viscousLimit(n.x,r.min.x)),n.y<r.min.y&&(n.y=this._viscousLimit(n.y,r.min.y)),n.x>r.max.x&&(n.x=this._viscousLimit(n.x,r.max.x)),n.y>r.max.y&&(n.y=this._viscousLimit(n.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,r=Math.round(n/2),l=this._initialWorldOffset,h=this._draggable._newPos.x,m=(h-r+l)%n+r-l,v=(h+r+l)%n-r-l,w=Math.abs(m+l)<Math.abs(v+l)?m:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(n){var r=this._map,l=r.options,h=!l.inertia||n.noInertia||this._times.length<2;if(r.fire("dragend",n),h)r.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,w=l.easeLinearity,C=m.multiplyBy(w/v),M=C.distanceTo([0,0]),V=Math.min(l.inertiaMaxSpeed,M),Q=C.multiplyBy(V/M),de=V/(l.inertiaDeceleration*w),je=Q.multiplyBy(-de/2).round();!je.x&&!je.y?r.fire("moveend"):(je=r._limitOffset(je,r.options.maxBounds),z(function(){r.panBy(je,{duration:de,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});Ae.addInitHook("addHandler","dragging",fu),Ae.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mu=cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),ve(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,r=document.documentElement,l=n.scrollTop||r.scrollTop,h=n.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(h,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var r=this._panKeys={},l=this.keyCodes,h,m;for(h=0,m=l.left.length;h<m;h++)r[l.left[h]]=[-1*n,0];for(h=0,m=l.right.length;h<m;h++)r[l.right[h]]=[n,0];for(h=0,m=l.down.length;h<m;h++)r[l.down[h]]=[0,n];for(h=0,m=l.up.length;h<m;h++)r[l.up[h]]=[0,-1*n]},_setZoomDelta:function(n){var r=this._zoomKeys={},l=this.keyCodes,h,m;for(h=0,m=l.zoomIn.length;h<m;h++)r[l.zoomIn[h]]=n;for(h=0,m=l.zoomOut.length;h<m;h++)r[l.zoomOut[h]]=-n},_addHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var r=n.keyCode,l=this._map,h;if(r in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(h=this._panKeys[r],n.shiftKey&&(h=ne(h).multiplyBy(3)),l.options.maxBounds&&(h=l._limitOffset(ne(h),l.options.maxBounds)),l.options.worldCopyJump){var m=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(h)));l.panTo(m)}else l.panBy(h)}else if(r in this._zoomKeys)l.setZoom(l.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;ei(n)}}});Ae.addInitHook("addHandler","keyboard",mu),Ae.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pu=cn.extend({addHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var r=Bc(n),l=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var h=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),h),ei(n)},_performZoom:function(){var n=this._map,r=n.getZoom(),l=this._map.options.zoomSnap||0;n._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,v=l?Math.ceil(m/l)*l:m,w=n._limitZoom(r+(this._delta>0?v:-v))-r;this._delta=0,this._startTime=null,w&&(n.options.scrollWheelZoom==="center"?n.setZoom(r+w):n.setZoomAround(this._lastMousePos,r+w))}});Ae.addInitHook("addHandler","scrollWheelZoom",pu);var ew=600;Ae.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var gu=cn.extend({addHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var r=n.touches[0];this._startPos=this._newPos=new Y(r.clientX,r.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(ve(document,"touchend",pt),ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),ew),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Ue(document,"touchend",pt),Ue(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(n){var r=n.touches[0];this._newPos=new Y(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,r){var l=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});l._simulated=!0,r.target.dispatchEvent(l)}});Ae.addInitHook("addHandler","tapHold",gu),Ae.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var yu=cn.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){nt(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var r=this._map;if(!(!n.touches||n.touches.length!==2||r._animatingZoom||this._zooming)){var l=r.mouseEventToContainerPoint(n.touches[0]),h=r.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(l.add(h)._divideBy(2))),this._startDist=l.distanceTo(h),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),pt(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var r=this._map,l=r.mouseEventToContainerPoint(n.touches[0]),h=r.mouseEventToContainerPoint(n.touches[1]),m=l.distanceTo(h)/this._startDist;if(this._zoom=r.getScaleZoom(m,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&m<1||this._zoom>r.getMaxZoom()&&m>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var v=l._add(h)._divideBy(2)._subtract(this._centerPoint);if(m===1&&v.x===0&&v.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var w=u(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(w,this,!0),pt(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ae.addInitHook("addHandler","touchZoom",yu),Ae.BoxZoom=du,Ae.DoubleClickZoom=hu,Ae.Drag=fu,Ae.Keyboard=mu,Ae.ScrollWheelZoom=pu,Ae.TapHold=gu,Ae.TouchZoom=yu,i.Bounds=Re,i.Browser=ae,i.CRS=Ne,i.Canvas=ou,i.Circle=so,i.CircleMarker=mr,i.Class=Z,i.Control=Yt,i.DivIcon=su,i.DivOverlay=un,i.DomEvent=vb,i.DomUtil=gb,i.Draggable=In,i.Evented=ye,i.FeatureGroup=Tn,i.GeoJSON=Pn,i.GridLayer=os,i.Handler=cn,i.Icon=Ti,i.ImageOverlay=xr,i.LatLng=ke,i.LatLngBounds=He,i.Layer=Qt,i.LayerGroup=wi,i.LineUtil=Lb,i.Map=Ae,i.Marker=fr,i.Mixin=Pb,i.Path=On,i.Point=Y,i.PolyUtil=Nb,i.Polygon=Si,i.Polyline=Sn,i.Popup=_r,i.PosAnimation=Fc,i.Projection=Eb,i.Rectangle=uu,i.Renderer=Nn,i.SVG=cs,i.SVGOverlay=iu,i.TileLayer=Ni,i.Tooltip=br,i.Transformation=tt,i.Util=re,i.VideoOverlay=nu,i.bind=u,i.bounds=We,i.canvas=lu,i.circle=Fb,i.circleMarker=Bb,i.control=ss,i.divIcon=Gb,i.extend=a,i.featureGroup=Ib,i.geoJSON=tu,i.geoJson=Ub,i.gridLayer=Xb,i.icon=Ob,i.imageOverlay=$b,i.latLng=U,i.latLngBounds=Ve,i.layerGroup=Rb,i.map=xb,i.marker=Vb,i.point=ne,i.polygon=Zb,i.polyline=zb,i.popup=qb,i.rectangle=Jb,i.setOptions=T,i.stamp=f,i.svg=cu,i.svgOverlay=Hb,i.tileLayer=ru,i.tooltip=Kb,i.transformation=vt,i.version=s,i.videoOverlay=Wb;var tw=window.L;i.noConflict=function(){return window.L=tw,this},window.L=i})}(gs,gs.exports)),gs.exports}var Da=DL();function _c(t,e,i){return Object.freeze({instance:t,context:e,container:i})}function bc(t,e){return e==null?function(s,a){const o=_.useRef();return o.current||(o.current=t(s,a)),o}:function(s,a){const o=_.useRef();o.current||(o.current=t(s,a));const u=_.useRef(s),{instance:d}=o.current;return _.useEffect(function(){u.current!==s&&(e(d,s,u.current),u.current=s)},[d,s,a]),o}}function P0(t,e){_.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function RL(t){return function(i){const s=vc(),a=t(Ma(i,s),s);return w0(s.map,i.attribution),xc(a.current,i.eventHandlers),P0(a.current,s),a}}function IL(t,e){const i=_.useRef();_.useEffect(function(){if(e.pathOptions!==i.current){const a=e.pathOptions??{};t.instance.setStyle(a),i.current=a}},[t,e])}function OL(t){return function(i){const s=vc(),a=t(Ma(i,s),s);return xc(a.current,i.eventHandlers),P0(a.current,s),IL(a.current,i),a}}function VL(t,e){const i=bc(t),s=EL(i,e);return AL(s)}function BL(t,e){const i=bc(t,e),s=OL(i);return kL(s)}function FL(t,e){const i=bc(t,e),s=RL(i);return LL(s)}function zL(t,e,i){const{opacity:s,zIndex:a}=e;s!=null&&s!==i.opacity&&t.setOpacity(s),a!=null&&a!==i.zIndex&&t.setZIndex(a)}const N0=BL(function({center:e,children:i,...s},a){const o=new Da.CircleMarker(e,s);return _c(o,CL(a,{overlayContainer:o}))},PL);function ul(){return ul=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},ul.apply(this,arguments)}function ZL({bounds:t,boundsOptions:e,center:i,children:s,className:a,id:o,placeholder:u,style:d,whenReady:f,zoom:p,...g},y){const[x]=_.useState({className:a,id:o,style:d}),[b,P]=_.useState(null);_.useImperativeHandle(y,()=>(b==null?void 0:b.map)??null,[b]);const T=_.useCallback(D=>{if(D!==null&&b===null){const j=new Da.Map(D,g);i!=null&&p!=null?j.setView(i,p):t!=null&&j.fitBounds(t,e),f!=null&&j.whenReady(f),P(jL(j))}},[]);_.useEffect(()=>()=>{b==null||b.map.remove()},[b]);const A=b?xt.createElement(S0,{value:b},s):u??null;return xt.createElement("div",ul({},x,{ref:T}),A)}const j0=_.forwardRef(ZL),C0=FL(function({url:e,...i},s){const a=new Da.TileLayer(e,Ma(i,s));return _c(a,s)},function(e,i,s){zL(e,i,s);const{url:a}=i;a!=null&&a!==s.url&&e.setUrl(a)}),k0=VL(function(e,i){const s=new Da.Tooltip(e,i.overlayContainer);return _c(s,i)},function(e,i,{position:s},a){_.useEffect(function(){const u=i.overlayContainer;if(u==null)return;const{instance:d}=e,f=g=>{g.tooltip===d&&(s!=null&&d.setLatLng(s),d.update(),a(!0))},p=g=>{g.tooltip===d&&a(!1)};return u.on({tooltipopen:f,tooltipclose:p}),u.bindTooltip(d),function(){u.off({tooltipopen:f,tooltipclose:p}),u._map!=null&&u.unbindTooltip()}},[e,i,a,s])}),A0=_.forwardRef(({className:t,...e},i)=>c.jsx("div",{className:"relative w-full overflow-auto",children:c.jsx("table",{ref:i,className:_e("w-full caption-bottom text-sm",t),...e})}));A0.displayName="Table";const L0=_.forwardRef(({className:t,...e},i)=>c.jsx("thead",{ref:i,className:_e("[&_tr]:border-b",t),...e}));L0.displayName="TableHeader";const E0=_.forwardRef(({className:t,...e},i)=>c.jsx("tbody",{ref:i,className:_e("[&_tr:last-child]:border-0",t),...e}));E0.displayName="TableBody";const UL=_.forwardRef(({className:t,...e},i)=>c.jsx("tfoot",{ref:i,className:_e("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));UL.displayName="TableFooter";const dl=_.forwardRef(({className:t,...e},i)=>c.jsx("tr",{ref:i,className:_e("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));dl.displayName="TableRow";const zr=_.forwardRef(({className:t,...e},i)=>c.jsx("th",{ref:i,className:_e("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));zr.displayName="TableHead";const Zr=_.forwardRef(({className:t,...e},i)=>c.jsx("td",{ref:i,className:_e("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Zr.displayName="TableCell";const $L=_.forwardRef(({className:t,...e},i)=>c.jsx("caption",{ref:i,className:_e("mt-4 text-sm text-muted-foreground",t),...e}));$L.displayName="TableCaption";const jh={login_success:"green",login_failure:"red",transaction_allowed:"blue",transaction_blocked:"orange"};function WL(){const[t,e]=_.useState([]),[i,s]=_.useState({login_success:!0,login_failure:!0,transaction_allowed:!0,transaction_blocked:!0});_.useEffect(()=>{fetch("/admin/user/heatmap").then(f=>f.json()).then(f=>e(Array.isArray(f)?f:[]))},[]);function a(f){return f&&typeof f=="object"&&typeof f.type=="string"&&typeof f.location=="string"}const o=t.filter(a).filter(f=>i[f.type]),u=o.map(f=>f.location.split(",").map(Number)).filter(f=>Array.isArray(f)&&f.length===2&&!isNaN(f[0])&&!isNaN(f[1])),d=u.length?u.reduce((f,p)=>[[Math.min(f[0][0],p[0]),Math.min(f[0][1],p[1])],[Math.max(f[1][0],p[0]),Math.max(f[1][1],p[1])]],[u[0],u[0]]):[[20.5937,78.9629],[20.5937,78.9629]];return c.jsxs("div",{children:[c.jsx("div",{style:{marginBottom:8},children:Object.entries(jh).map(([f,p])=>c.jsxs("label",{style:{marginRight:16},children:[c.jsx("input",{type:"checkbox",checked:i[f],onChange:()=>s(g=>({...g,[f]:!g[f]}))}),c.jsx("span",{style:{color:p,fontWeight:"bold",marginLeft:4},children:f.replace("_"," ")})]},f))}),c.jsxs(j0,{style:{height:400,width:"100%"},bounds:d,scrollWheelZoom:!0,zoom:5,children:[c.jsx(C0,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),o.map((f,p)=>{const[g,y]=f.location.split(",").map(Number);return isNaN(g)||isNaN(y)?null:c.jsx(N0,{center:[g,y],radius:8,color:jh[f.type]||"gray",fillOpacity:.7,children:c.jsx(k0,{children:c.jsxs("div",{children:[c.jsxs("div",{children:["Type: ",f.type.replace("_"," ")]}),c.jsxs("div",{children:["Status: ",f.status||"-"]}),c.jsx("div",{children:f.timestamp?new Date(f.timestamp).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}):"-"})]})})},p)})]})]})}function HL(){const[t,e]=_.useState([]),[i,s]=_.useState(!0),[a,o]=_.useState(null),[u,d]=_.useState(null),[f,p]=_.useState(!1),[g,y]=_.useState(!1);_.useEffect(()=>{async function b(){s(!0),o(null);try{const P=await fetch("/api/auth/webauthn/devices",{credentials:"include"});if(!P.ok)throw new Error("Failed to fetch devices");const T=await P.json();e(T.devices||[])}catch(P){o(P.message||"Failed to fetch devices")}s(!1)}b()},[]);async function x(b){d(b),p(!0);try{if(!(await fetch("/api/auth/webauthn/device/remove",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({credential_id:b})})).ok)throw new Error("Failed to remove device");e(t.filter(T=>T.credential_id!==b)),y(!1)}catch{}p(!1),d(null)}return c.jsxs("div",{className:"mt-8",children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Device Management"}),c.jsx("div",{className:"bg-white rounded shadow p-4",children:i?c.jsx("div",{className:"text-center py-8",children:"Loading devices..."}):a?c.jsx("div",{className:"text-red-600",children:a}):t.length===0?c.jsx("div",{className:"text-gray-500",children:"No registered devices found."}):c.jsxs(A0,{children:[c.jsx(L0,{children:c.jsxs(dl,{children:[c.jsx(zr,{children:"Device"}),c.jsx(zr,{children:"Registered At"}),c.jsx(zr,{children:"Actions"})]})}),c.jsx(E0,{children:t.map(b=>c.jsxs(dl,{children:[c.jsx(Zr,{children:b.device||b.aaguid||"Unknown"}),c.jsx(Zr,{children:b.created_at?new Date(b.created_at).toLocaleString():"-"}),c.jsx(Zr,{children:c.jsx(he,{variant:"destructive",size:"sm",onClick:()=>{d(b.credential_id),y(!0)},children:"Remove"})})]},b.credential_id))})]})}),c.jsx(yc,{open:g,onOpenChange:y,children:c.jsxs(Aa,{children:[c.jsx(La,{children:"Remove Device"}),c.jsx(Ea,{children:"Are you sure you want to remove this device? You will not be able to use it for biometric login until you re-register it."}),c.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[c.jsx(he,{variant:"secondary",onClick:()=>y(!1),disabled:f,children:"Cancel"}),c.jsx(he,{variant:"destructive",onClick:()=>x(u),disabled:f,children:f?"Removing...":"Remove"})]})]})})]})}function qL(){var b;const{user:t}=vi(),[e,i]=_.useState(!1),[s,a]=_.useState(!1),{data:o={transactions:[]}}=ys({queryKey:["/api/transactions",{userId:t==null?void 0:t.id}],enabled:!!(t!=null&&t.id)}),d=o.transactions.slice(0,3),f=P=>P<=30?"Low Risk":P<=60?"Medium Risk":"High Risk",p=P=>P<=30?"bg-green-400":P<=60?"bg-yellow-400":"bg-red-400",g=(t==null?void 0:t.country)||"IN",y=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});t==null||t.isVerified;const x=t==null?void 0:t.lastLogin;return c.jsxs("section",{className:"py-8 min-h-screen bg-gray-50",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx("div",{className:"flex justify-end mb-4",children:c.jsx(he,{onClick:()=>a(P=>!P),variant:"outline",children:s?"Back to Dashboard":"View My Heatmap"})}),s?c.jsx(WL,{}):c.jsxs(c.Fragment,{children:[c.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[c.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(b=t==null?void 0:t.name)==null?void 0:b.split(" ")[0],"!"]}),c.jsx("p",{className:"text-gray-600",children:"Here's your account overview and recent activity."})]}),c.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[c.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"grid md:grid-cols-2 gap-6",children:[c.jsx(De,{className:"bg-gradient-to-br from-primary to-blue-700 text-white",children:c.jsxs(Ie,{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-blue-100 text-sm",children:"Checking Account"}),c.jsx("p",{className:"text-2xl font-bold",children:ki(12847.92,g)})]}),c.jsx(Uw,{className:"h-6 w-6 text-blue-200"})]}),c.jsxs("div",{className:"flex items-center text-sm text-blue-100",children:[c.jsx(Oo,{className:"mr-1 h-4 w-4"}),c.jsx("span",{children:"+2.5% this month"})]})]})}),c.jsx(De,{className:"banking-card",children:c.jsxs(Ie,{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600 text-sm",children:"Savings Account"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ki(45392.14,g)})]}),c.jsx($w,{className:"h-6 w-6 text-green-500"})]}),c.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[c.jsx(Oo,{className:"mr-1 h-4 w-4"}),c.jsx("span",{children:"+$850 interest"})]})]})})]}),c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(et,{className:"text-lg font-semibold",children:"Recent Transactions"}),c.jsx(bt,{href:"/transactions",children:c.jsxs(he,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80",children:["View All",c.jsx(Ww,{className:"ml-2 h-4 w-4"})]})})]})}),c.jsx(Ie,{children:d.length>0?c.jsx("div",{className:"space-y-4",children:d.map(P=>c.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${P.type==="deposit"?"bg-green-100":"bg-red-100"}`,children:P.type==="deposit"?c.jsx(Zg,{className:"h-5 w-5 text-green-600"}):c.jsx(Ug,{className:"h-5 w-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:P.description}),c.jsx("p",{className:"text-sm text-gray-600",children:y(P.createdAt)})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:`font-semibold ${P.type==="deposit"?"text-green-600":"text-red-600"}`,children:[P.type==="deposit"?"+":"-",ki(P.amount,g)]}),c.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[c.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${p(P.riskScore)}`}),f(P.riskScore)]})]})]},P.id))}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No transactions yet"})})})]})}),c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsx(et,{className:"text-lg font-semibold",children:"Quick Actions"})}),c.jsx(Ie,{children:c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs(he,{variant:"outline",className:"p-4 h-auto flex-col space-y-2 hover:border-primary hover:bg-primary/5",onClick:()=>i(!0),children:[c.jsx($g,{className:"h-6 w-6 text-primary"}),c.jsx("span",{className:"text-sm font-medium",children:"Transfer"})]}),c.jsx(bt,{href:"/transactions",children:c.jsxs(he,{variant:"outline",className:"p-4 h-auto flex-col space-y-2 hover:border-primary hover:bg-primary/5 w-full",children:[c.jsx(Hw,{className:"h-6 w-6 text-primary"}),c.jsx("span",{className:"text-sm font-medium",children:"History"})]})}),c.jsxs(he,{variant:"outline",className:"p-4 h-auto flex-col space-y-2 hover:border-primary hover:bg-primary/5",children:[c.jsx(Wg,{className:"h-6 w-6 text-primary"}),c.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),c.jsxs(he,{variant:"outline",className:"p-4 h-auto flex-col space-y-2 hover:border-primary hover:bg-primary/5",children:[c.jsx(qw,{className:"h-6 w-6 text-primary"}),c.jsx("span",{className:"text-sm font-medium",children:"Support"})]})]})})]})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsxs(et,{className:"text-lg font-semibold flex items-center",children:[c.jsx(js,{className:"mr-2 h-5 w-5 text-primary"}),"Security Status"]})}),c.jsx(Ie,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Risk Level"}),c.jsxs(qs,{variant:"outline",className:"text-green-600 border-green-200 bg-green-50",children:[c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),(t==null?void 0:t.riskLevel)||"Low"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Device Trust"}),c.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[c.jsx(zn,{className:"mr-1 h-4 w-4"}),"Verified"]})]}),c.jsx("div",{className:"pt-3 border-t border-gray-100",children:c.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[c.jsxs("p",{children:["Last Login: ",x?new Date(x).toLocaleString():"Just now"]}),c.jsx("p",{children:"Location: New York, NY"})]})})]})})]})}),c.jsx(Ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsx(et,{className:"text-lg font-semibold",children:"Account Summary"})}),c.jsx(Ie,{children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Total Balance"}),c.jsx("span",{className:"font-medium text-gray-900",children:ki(58240.06,g)})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Available Credit"}),c.jsx("span",{className:"font-medium text-gray-900",children:ki(15e3,g)})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Monthly Spending"}),c.jsx("span",{className:"font-medium text-gray-900",children:ki(2847.32,g)})]})]})})]})}),c.jsx(Ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsx(et,{className:"text-lg font-semibold",children:"Recent Alerts"})}),c.jsx(Ie,{children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(zn,{className:"text-green-500 text-sm mt-0.5 h-4 w-4"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-green-800",children:"Transaction Approved"}),c.jsx("p",{className:"text-xs text-green-600",children:"Recent purchase verified"})]})]})}),c.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(js,{className:"text-blue-500 text-sm mt-0.5 h-4 w-4"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-blue-800",children:"New Device Login"}),c.jsx("p",{className:"text-xs text-blue-600",children:"Verified from your location"})]})]})})]})})]})}),c.jsx(HL,{})]})]})]})]}),c.jsx(b0,{isOpen:e,onClose:()=>i(!1)})]})}function KL(){const{user:t}=vi(),[e,i]=_.useState(!1),[s,a]=_.useState(""),[o,u]=_.useState("all"),[d,f]=_.useState("all"),[p,g]=_.useState("all"),{data:y,isLoading:x}=ys({queryKey:["/api/transactions",{userId:t==null?void 0:t.id}],enabled:!!(t!=null&&t.id)}),P=((y==null?void 0:y.transactions)||[]).filter(j=>{var X;const R=j.description.toLowerCase().includes(s.toLowerCase())||((X=j.recipient)==null?void 0:X.toLowerCase().includes(s.toLowerCase())),$=d==="all"||j.type===d,O=p==="all"||p==="low"&&j.riskScore<=30||p==="medium"&&j.riskScore>30&&j.riskScore<=60||p==="high"&&j.riskScore>60;return R&&$&&O}),T=j=>{switch(j){case"completed":return"default";case"pending":return"secondary";case"blocked":return"destructive";default:return"default"}},A=j=>(j/100).toLocaleString("en-US",{style:"currency",currency:"USD"}),D=j=>{const R=new Date(j);return{date:R.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),time:R.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}};return c.jsxs("section",{className:"py-8 min-h-screen bg-gray-50",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transaction History"}),c.jsx("p",{className:"text-gray-600",children:"View and manage your transaction history"})]}),c.jsxs(he,{onClick:()=>i(!0),className:"banking-button-primary",children:[c.jsx($g,{className:"mr-2 h-4 w-4"}),"New Transfer"]})]}),c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:c.jsx(De,{className:"banking-card mb-8",children:c.jsx(Ie,{className:"p-6",children:c.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),c.jsxs("div",{className:"relative",children:[c.jsx(Hg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),c.jsx(Mn,{value:s,onChange:j=>a(j.target.value),placeholder:"Search transactions...",className:"pl-10"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),c.jsxs(Or,{value:o,onValueChange:u,children:[c.jsx(Ts,{children:c.jsx(Vr,{})}),c.jsxs(Ss,{children:[c.jsx(kt,{value:"all",children:"All time"}),c.jsx(kt,{value:"30",children:"Last 30 days"}),c.jsx(kt,{value:"90",children:"Last 3 months"}),c.jsx(kt,{value:"365",children:"Last year"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),c.jsxs(Or,{value:d,onValueChange:f,children:[c.jsx(Ts,{children:c.jsx(Vr,{})}),c.jsxs(Ss,{children:[c.jsx(kt,{value:"all",children:"All types"}),c.jsx(kt,{value:"deposit",children:"Deposits"}),c.jsx(kt,{value:"transfer",children:"Transfers"}),c.jsx(kt,{value:"withdrawal",children:"Withdrawals"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Level"}),c.jsxs(Or,{value:p,onValueChange:g,children:[c.jsx(Ts,{children:c.jsx(Vr,{})}),c.jsxs(Ss,{children:[c.jsx(kt,{value:"all",children:"All levels"}),c.jsx(kt,{value:"low",children:"Low risk"}),c.jsx(kt,{value:"medium",children:"Medium risk"}),c.jsx(kt,{value:"high",children:"High risk"})]})]})]})]})})})}),c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(et,{className:"text-lg font-semibold",children:"All Transactions"}),c.jsxs(he,{variant:"outline",size:"sm",children:[c.jsx(qg,{className:"mr-2 h-4 w-4"}),"Export"]})]})}),c.jsx(Ie,{className:"p-0",children:x?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading transactions..."}):P.length===0?c.jsx("div",{className:"p-8 text-center text-gray-500",children:s?"No transactions match your search.":"No transactions found."}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk Score"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(j=>{const R=D(j.createdAt);return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${j.type==="deposit"?"bg-green-100":"bg-red-100"}`,children:j.type==="deposit"?c.jsx(Zg,{className:"h-5 w-5 text-green-600"}):c.jsx(Ug,{className:"h-5 w-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.description}),j.recipient&&c.jsxs("div",{className:"text-sm text-gray-500",children:["To: ",j.recipient]})]})]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[R.date,c.jsx("br",{}),c.jsx("span",{className:"text-gray-500",children:R.time})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsxs("span",{className:j.type==="deposit"?"text-green-600":"text-red-600",children:[j.type==="deposit"?"+":"-",A(j.amount)]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:c.jsx("div",{className:`h-2 rounded-full ${j.riskScore<=30?"bg-green-500":j.riskScore<=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${j.riskScore}%`}})}),c.jsxs("span",{className:"text-sm text-gray-600",children:[j.riskScore,"%"]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(qs,{variant:T(j.status),children:j.status.charAt(0).toUpperCase()+j.status.slice(1)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.jsxs(he,{variant:"ghost",size:"sm",children:[c.jsx(Kw,{className:"h-4 w-4 mr-1"}),"Details"]})})]},j.id)})})]})})})]})})]}),c.jsx(b0,{isOpen:e,onClose:()=>i(!1)})]})}var M0=["PageUp","PageDown"],D0=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R0={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yi="Slider",[hl,GL,XL]=Ew(Yi),[I0,E1]=fa(Yi,[XL]),[YL,Ra]=I0(Yi),O0=_.forwardRef((t,e)=>{const{name:i,min:s=0,max:a=100,step:o=1,orientation:u="horizontal",disabled:d=!1,minStepsBetweenThumbs:f=0,defaultValue:p=[s],value:g,onValueChange:y=()=>{},onValueCommit:x=()=>{},inverted:b=!1,form:P,...T}=t,A=_.useRef(new Set),D=_.useRef(0),R=u==="horizontal"?QL:JL,[$=[],O]=Ng({prop:g,defaultProp:p,onChange:z=>{var re;(re=[...A.current][D.current])==null||re.focus(),y(z)}}),X=_.useRef($);function oe(z){const H=s1($,z);ge(z,H)}function se(z){ge(z,D.current)}function pe(){const z=X.current[D.current];$[D.current]!==z&&x($)}function ge(z,H,{commit:re}={commit:!1}){const Z=l1(o),Oe=c1(Math.round((z-s)/o)*o+s,Z),Te=Mg(Oe,[s,a]);O((ye=[])=>{const Y=n1(ye,Te,H);if(o1(Y,f*o)){D.current=Y.indexOf(Te);const at=String(Y)!==String(ye);return at&&re&&x(Y),at?Y:ye}else return ye})}return c.jsx(YL,{scope:t.__scopeSlider,name:i,disabled:d,min:s,max:a,valueIndexToChangeRef:D,thumbs:A.current,values:$,orientation:u,form:P,children:c.jsx(hl.Provider,{scope:t.__scopeSlider,children:c.jsx(hl.Slot,{scope:t.__scopeSlider,children:c.jsx(R,{"aria-disabled":d,"data-disabled":d?"":void 0,...T,ref:e,onPointerDown:Lt(T.onPointerDown,()=>{d||(X.current=$)}),min:s,max:a,inverted:b,onSlideStart:d?void 0:oe,onSlideMove:d?void 0:se,onSlideEnd:d?void 0:pe,onHomeKeyDown:()=>!d&&ge(s,0,{commit:!0}),onEndKeyDown:()=>!d&&ge(a,$.length-1,{commit:!0}),onStepKeyDown:({event:z,direction:H})=>{if(!d){const Oe=M0.includes(z.key)||z.shiftKey&&D0.includes(z.key)?10:1,Te=D.current,ye=$[Te],Y=o*Oe*H;ge(ye+Y,Te,{commit:!0})}}})})})})});O0.displayName=Yi;var[V0,B0]=I0(Yi,{startEdge:"left",endEdge:"right",size:"width",direction:1}),QL=_.forwardRef((t,e)=>{const{min:i,max:s,dir:a,inverted:o,onSlideStart:u,onSlideMove:d,onSlideEnd:f,onStepKeyDown:p,...g}=t,[y,x]=_.useState(null),b=_n(e,R=>x(R)),P=_.useRef(void 0),T=Mw(a),A=T==="ltr",D=A&&!o||!A&&o;function j(R){const $=P.current||y.getBoundingClientRect(),O=[0,$.width],oe=wc(O,D?[i,s]:[s,i]);return P.current=$,oe(R-$.left)}return c.jsx(V0,{scope:t.__scopeSlider,startEdge:D?"left":"right",endEdge:D?"right":"left",direction:D?1:-1,size:"width",children:c.jsx(F0,{dir:T,"data-orientation":"horizontal",...g,ref:b,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:R=>{const $=j(R.clientX);u==null||u($)},onSlideMove:R=>{const $=j(R.clientX);d==null||d($)},onSlideEnd:()=>{P.current=void 0,f==null||f()},onStepKeyDown:R=>{const O=R0[D?"from-left":"from-right"].includes(R.key);p==null||p({event:R,direction:O?-1:1})}})})}),JL=_.forwardRef((t,e)=>{const{min:i,max:s,inverted:a,onSlideStart:o,onSlideMove:u,onSlideEnd:d,onStepKeyDown:f,...p}=t,g=_.useRef(null),y=_n(e,g),x=_.useRef(void 0),b=!a;function P(T){const A=x.current||g.current.getBoundingClientRect(),D=[0,A.height],R=wc(D,b?[s,i]:[i,s]);return x.current=A,R(T-A.top)}return c.jsx(V0,{scope:t.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:c.jsx(F0,{"data-orientation":"vertical",...p,ref:y,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:T=>{const A=P(T.clientY);o==null||o(A)},onSlideMove:T=>{const A=P(T.clientY);u==null||u(A)},onSlideEnd:()=>{x.current=void 0,d==null||d()},onStepKeyDown:T=>{const D=R0[b?"from-bottom":"from-top"].includes(T.key);f==null||f({event:T,direction:D?-1:1})}})})}),F0=_.forwardRef((t,e)=>{const{__scopeSlider:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:u,onEndKeyDown:d,onStepKeyDown:f,...p}=t,g=Ra(Yi,i);return c.jsx(Kt.span,{...p,ref:e,onKeyDown:Lt(t.onKeyDown,y=>{y.key==="Home"?(u(y),y.preventDefault()):y.key==="End"?(d(y),y.preventDefault()):M0.concat(D0).includes(y.key)&&(f(y),y.preventDefault())}),onPointerDown:Lt(t.onPointerDown,y=>{const x=y.target;x.setPointerCapture(y.pointerId),y.preventDefault(),g.thumbs.has(x)?x.focus():s(y)}),onPointerMove:Lt(t.onPointerMove,y=>{y.target.hasPointerCapture(y.pointerId)&&a(y)}),onPointerUp:Lt(t.onPointerUp,y=>{const x=y.target;x.hasPointerCapture(y.pointerId)&&(x.releasePointerCapture(y.pointerId),o(y))})})}),z0="SliderTrack",Z0=_.forwardRef((t,e)=>{const{__scopeSlider:i,...s}=t,a=Ra(z0,i);return c.jsx(Kt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:e})});Z0.displayName=z0;var fl="SliderRange",U0=_.forwardRef((t,e)=>{const{__scopeSlider:i,...s}=t,a=Ra(fl,i),o=B0(fl,i),u=_.useRef(null),d=_n(e,u),f=a.values.length,p=a.values.map(x=>H0(x,a.min,a.max)),g=f>1?Math.min(...p):0,y=100-Math.max(...p);return c.jsx(Kt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:d,style:{...t.style,[o.startEdge]:g+"%",[o.endEdge]:y+"%"}})});U0.displayName=fl;var ml="SliderThumb",$0=_.forwardRef((t,e)=>{const i=GL(t.__scopeSlider),[s,a]=_.useState(null),o=_n(e,d=>a(d)),u=_.useMemo(()=>s?i().findIndex(d=>d.ref.current===s):-1,[i,s]);return c.jsx(e1,{...t,ref:o,index:u})}),e1=_.forwardRef((t,e)=>{const{__scopeSlider:i,index:s,name:a,...o}=t,u=Ra(ml,i),d=B0(ml,i),[f,p]=_.useState(null),g=_n(e,j=>p(j)),y=f?u.form||!!f.closest("form"):!0,x=Cg(f),b=u.values[s],P=b===void 0?0:H0(b,u.min,u.max),T=i1(s,u.values.length),A=x==null?void 0:x[d.size],D=A?r1(A,P,d.direction):0;return _.useEffect(()=>{if(f)return u.thumbs.add(f),()=>{u.thumbs.delete(f)}},[f,u.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${P}% + ${D}px)`},children:[c.jsx(hl.ItemSlot,{scope:t.__scopeSlider,children:c.jsx(Kt.span,{role:"slider","aria-label":t["aria-label"]||T,"aria-valuemin":u.min,"aria-valuenow":b,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...o,ref:g,style:b===void 0?{display:"none"}:t.style,onFocus:Lt(t.onFocus,()=>{u.valueIndexToChangeRef.current=s})})}),y&&c.jsx(W0,{name:a??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:b},s)]})});$0.displayName=ml;var t1="RadioBubbleInput",W0=_.forwardRef(({__scopeSlider:t,value:e,...i},s)=>{const a=_.useRef(null),o=_n(a,s),u=jg(e);return _.useEffect(()=>{const d=a.current;if(!d)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==e&&g){const y=new Event("input",{bubbles:!0});g.call(d,e),d.dispatchEvent(y)}},[u,e]),c.jsx(Kt.input,{style:{display:"none"},...i,ref:o,defaultValue:e})});W0.displayName=t1;function n1(t=[],e,i){const s=[...t];return s[i]=e,s.sort((a,o)=>a-o)}function H0(t,e,i){const o=100/(i-e)*(t-e);return Mg(o,[0,100])}function i1(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function s1(t,e){if(t.length===1)return 0;const i=t.map(a=>Math.abs(a-e)),s=Math.min(...i);return i.indexOf(s)}function r1(t,e,i){const s=t/2,o=wc([0,50],[0,s]);return(s-o(e)*i)*i}function a1(t){return t.slice(0,-1).map((e,i)=>t[i+1]-e)}function o1(t,e){if(e>0){const i=a1(t);return Math.min(...i)>=e}return!0}function wc(t,e){return i=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(i-t[0])}}function l1(t){return(String(t).split(".")[1]||"").length}function c1(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}var q0=O0,u1=Z0,d1=U0,h1=$0;const pl=_.forwardRef(({className:t,...e},i)=>c.jsxs(q0,{ref:i,className:_e("relative flex w-full touch-none select-none items-center",t),...e,children:[c.jsx(u1,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:c.jsx(d1,{className:"absolute h-full bg-primary"})}),c.jsx(h1,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));pl.displayName=q0.displayName;function f1({open:t,onClose:e}){const[i,s]=_.useState([]);_.useEffect(()=>{t&&fetch("/admin/risk-heatmap").then(d=>d.json()).then(s)},[t]);const a=d=>d<.5?"green":d<1.5?"yellow":"red",o=i.map(d=>d.location.split(",").map(Number)).filter(([d,f])=>!isNaN(d)&&!isNaN(f)&&d&&f);let u;if(o.length>=1){const d=o.map(([b])=>b),f=o.map(([,b])=>b),p=Math.min(...d),g=Math.max(...d),y=Math.min(...f),x=Math.max(...f);u=[[p,y],[g,x]]}return t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-3xl relative",children:[c.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-black",children:"✕"}),c.jsx("h2",{className:"text-xl font-bold mb-2",children:"Risk Heatmap (All Users)"}),c.jsxs("div",{className:"mb-2 flex gap-4",children:[c.jsxs("span",{children:[c.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-green-500 mr-1"}),"Low"]}),c.jsxs("span",{children:[c.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-yellow-500 mr-1"}),"Medium"]}),c.jsxs("span",{children:[c.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-red-500 mr-1"}),"High"]})]}),c.jsxs(j0,{style:{height:400,width:"100%"},bounds:u,scrollWheelZoom:!0,zoom:5,children:[c.jsx(C0,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),i.map((d,f)=>{const[p,g]=d.location.split(",").map(Number);return isNaN(p)||isNaN(g)?null:c.jsx(N0,{center:[p,g],radius:10+Math.log(d.count+1)*3,color:a(d.avg_risk),fillOpacity:.7,children:c.jsx(k0,{children:c.jsxs("div",{children:[c.jsxs("div",{children:["Avg Risk: ",d.avg_risk.toFixed(2)]}),c.jsxs("div",{children:["Count: ",d.count]})]})})},f)})]})]})}):null}const m1=[{name:"Fraud Detection AI",icon:Ig},{name:"Risk Scoring Engine",icon:js},{name:"Database",icon:Xw},{name:"API Gateway",icon:Yw},{name:"Login",icon:zn}];function p1(){const[t,e]=_.useState(""),[i,s]=_.useState([75]),[a,o]=_.useState([90]),[u,d]=_.useState("red"),{toast:f}=gi(),p=Dg(),[g,y]=_.useState(!1),[x,b]=_.useState(["red","red","red","red","red"]),[P,T]=_.useState(!1);_.useEffect(()=>{async function z(){b(Z=>["loading",...Z.slice(1)]),await new Promise(Z=>setTimeout(Z,700)),b(Z=>["green",...Z.slice(1)]),b(Z=>[Z[0],"loading",...Z.slice(2)]),await new Promise(Z=>setTimeout(Z,700)),b(Z=>[Z[0],"green",...Z.slice(2)]),b(Z=>[Z[0],Z[1],"loading",...Z.slice(3)]);let H=!1;try{H=(await fetch("/api/ping-db")).ok}catch{}b(Z=>[Z[0],Z[1],H?"green":"red",...Z.slice(3)]),b(Z=>[Z[0],Z[1],Z[2],"loading",Z[4]]);let re=!1;try{re=(await fetch("/api/ping-api")).ok}catch{}b(Z=>[Z[0],Z[1],Z[2],re?"green":"red",Z[4]]),b(Z=>[Z[0],Z[1],Z[2],Z[3],"loading"]),await new Promise(Z=>setTimeout(Z,700)),b(Z=>[Z[0],Z[1],Z[2],Z[3],"green"])}return z(),()=>{}},[]),_.useEffect(()=>{fetch("/api/admin/risk-rules").then(z=>z.json()).then(z=>{const H=z.rules||[],re=H.find(Oe=>Oe.rule==="high_threshold"),Z=H.find(Oe=>Oe.rule==="medium_threshold");re&&o([Number(re.value)]),Z&&s([Number(Z.value)])}),setTimeout(()=>d("loading"),500),setTimeout(()=>d("green"),2e3)},[]);const A=async()=>{try{await fetch("/api/admin/adjust-risk",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rule:"high_threshold",value:a[0]})}),await fetch("/api/admin/adjust-risk",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rule:"medium_threshold",value:i[0]})}),f({title:"Settings saved successfully"})}catch{f({title:"Failed to save settings",variant:"destructive"})}},{data:D={users:[]}}=ys({queryKey:["/api/users"]}),{data:j={transactions:[]}}=ys({queryKey:["/api/transactions"]}),{data:R={alerts:[]}}=ys({queryKey:["/api/fraud-alerts"]}),$=D.users,O=j.transactions,X=R.alerts,oe=di({mutationFn:async({userId:z,updates:H})=>await(await sn("PUT",`/api/users/${z}`,H)).json(),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/users"]}),f({title:"User updated successfully"})},onError:()=>{f({title:"Failed to update user",variant:"destructive"})}});di({mutationFn:async({transactionId:z,status:H})=>await(await sn("PUT",`/api/transactions/${z}`,{status:H})).json(),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/transactions"]}),f({title:"Transaction updated successfully"})},onError:()=>{f({title:"Failed to update transaction",variant:"destructive"})}});const se=$.filter(z=>z.name.toLowerCase().includes(t.toLowerCase())||z.email.toLowerCase().includes(t.toLowerCase())),pe={totalUsers:$.length,totalTransactions:O.length,fraudAlerts:X.filter(z=>!z.isResolved).length,pendingReviews:O.filter(z=>z.status==="pending").length},ge=z=>{switch(z){case"low":return{variant:"default",label:"Low"};case"medium":return{variant:"secondary",label:"Medium"};case"high":return{variant:"destructive",label:"High"};default:return{variant:"default",label:"Low"}}};return P?c.jsx("section",{className:"py-8 min-h-screen bg-gray-50",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx("div",{className:"flex justify-end mb-4",children:c.jsx(he,{onClick:()=>y(!0),variant:"outline",children:"View Risk Heatmap"})}),c.jsx(f1,{open:g,onClose:()=>y(!1)}),c.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Monitor users, transactions, and fraud detection"})]}),c.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"grid md:grid-cols-4 gap-6 mb-8",children:[c.jsx(De,{className:"banking-card",children:c.jsxs(Ie,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(Io,{className:"h-5 w-5 text-blue-600"})}),c.jsx("span",{className:"text-sm text-gray-500",children:"Total Users"})]}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:pe.totalUsers}),c.jsx("p",{className:"text-sm text-green-600",children:"+12% this month"})]})}),c.jsx(De,{className:"banking-card",children:c.jsxs(Ie,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx(Gw,{className:"h-5 w-5 text-green-600"})}),c.jsx("span",{className:"text-sm text-gray-500",children:"Transactions"})]}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:pe.totalTransactions}),c.jsx("p",{className:"text-sm text-green-600",children:"+8% this week"})]})}),c.jsx(De,{className:"banking-card",children:c.jsxs(Ie,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(Lr,{className:"h-5 w-5 text-red-600"})}),c.jsx("span",{className:"text-sm text-gray-500",children:"Fraud Alerts"})]}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:pe.fraudAlerts}),c.jsx("p",{className:"text-sm text-red-600",children:"Requires attention"})]})}),c.jsx(De,{className:"banking-card",children:c.jsxs(Ie,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:c.jsx(zg,{className:"h-5 w-5 text-yellow-600"})}),c.jsx("span",{className:"text-sm text-gray-500",children:"Pending Reviews"})]}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:pe.pendingReviews}),c.jsx("p",{className:"text-sm text-yellow-600",children:"Queue management"})]})})]}),c.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(et,{className:"text-lg font-semibold",children:"User Management"}),c.jsx("div",{className:"flex space-x-2",children:c.jsxs("div",{className:"relative",children:[c.jsx(Hg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),c.jsx(Mn,{value:t,onChange:z=>e(z.target.value),placeholder:"Search users...",className:"pl-10 w-64"})]})})]})}),c.jsx(Ie,{children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("th",{className:"text-left py-3 text-sm font-medium text-gray-600",children:"User"}),c.jsx("th",{className:"text-left py-3 text-sm font-medium text-gray-600",children:"Risk Score"}),c.jsx("th",{className:"text-left py-3 text-sm font-medium text-gray-600",children:"Last Login"}),c.jsx("th",{className:"text-left py-3 text-sm font-medium text-gray-600",children:"Status"}),c.jsx("th",{className:"text-left py-3 text-sm font-medium text-gray-600",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:se.map(z=>{const H=ge(z.riskLevel||"low");return c.jsxs("tr",{children:[c.jsx("td",{className:"py-3",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx(Io,{className:"h-4 w-4 text-primary"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:z.name}),c.jsx("p",{className:"text-xs text-gray-500",children:z.email})]})]})}),c.jsx("td",{className:"py-3",children:c.jsx(qs,{variant:H.variant,children:H.label})}),c.jsx("td",{className:"py-3 text-sm text-gray-600",children:z.lastLogin?new Date(z.lastLogin).toLocaleDateString():"Never"}),c.jsx("td",{className:"py-3",children:c.jsx(qs,{variant:z.isVerified?"default":"secondary",children:z.isVerified?"Active":"Pending"})}),c.jsx("td",{className:"py-3",children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(he,{variant:"ghost",size:"sm",onClick:()=>{const re=z.riskLevel==="low"?"medium":z.riskLevel==="medium"?"high":"low";oe.mutate({userId:z.id.toString(),updates:{riskLevel:re}})},children:"Edit"}),c.jsx(he,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:"Ban"})]})})]},z.id)})})]})})})]})}),c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsx(et,{className:"text-lg font-semibold",children:"System Controls"})}),c.jsxs(Ie,{children:[c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Risk Threshold: ",i[0],"%"]}),c.jsx(pl,{value:i,onValueChange:s,max:100,step:1,className:"w-full"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transactions above this threshold require manual review"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Auto-Block Threshold: ",a[0],"%"]}),c.jsx(pl,{value:a,onValueChange:o,max:100,step:1,className:"w-full"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transactions above this threshold are automatically blocked"})]})]}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsx(he,{className:"banking-button-primary",onClick:A,children:"Save Settings"}),c.jsx(he,{variant:"outline",className:"banking-button-secondary",onClick:()=>{s([75]),o([90]),f({title:"Settings reset to default"})},children:"Reset to Default"})]})]})]})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsxs(et,{className:"text-lg font-semibold flex items-center",children:[c.jsx(Lr,{className:"mr-2 h-5 w-5 text-red-500"}),"Recent Fraud Alerts"]})}),c.jsx(Ie,{children:c.jsx("div",{className:"space-y-3",children:X.length>0?X.slice(0,3).map(z=>c.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(Lr,{className:"text-red-500 text-sm mt-0.5 h-4 w-4"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-red-800",children:z.alertType}),c.jsx("p",{className:"text-xs text-red-600",children:z.description}),c.jsxs("p",{className:"text-xs text-red-500",children:["Severity: ",z.severity]})]})]}),c.jsx(he,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",children:"Review"})]})},z.id)):c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No active fraud alerts"})})})]})}),c.jsx(Ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsx(et,{className:"text-lg font-semibold",children:"System Status"})}),c.jsx(Ie,{children:c.jsx("div",{className:"space-y-3",children:m1.map((z,H)=>c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(z.icon,{className:"h-4 w-4 text-gray-600"}),c.jsx("span",{className:"text-sm text-gray-600",children:z.name})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[x[H]==="loading"?c.jsx("span",{className:"w-4 h-4 inline-block border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}):c.jsx("div",{className:`w-2 h-2 rounded-full ${x[H]==="green"?"bg-green-400":"bg-red-400"}`}),c.jsx("span",{className:`text-sm ${x[H]==="green"?"text-green-600":x[H]==="loading"?"text-blue-600":"text-red-600"}`,children:x[H]==="loading"?"Checking...":x[H]==="green"?"Online":"Offline"})]})]},z.name))})})]})}),c.jsx(Ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:c.jsxs(De,{className:"banking-card",children:[c.jsx(Je,{children:c.jsx(et,{className:"text-lg font-semibold",children:"Quick Actions"})}),c.jsx(Ie,{children:c.jsx("div",{className:"space-y-2",children:[{icon:qg,label:"Export Fraud Report"},{icon:Wg,label:"System Settings"},{icon:Qw,label:"Manage Admins"}].map(z=>c.jsxs(he,{variant:"ghost",className:"w-full justify-start p-3 hover:bg-primary/5",children:[c.jsx(z.icon,{className:"h-4 w-4 text-primary mr-2"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:z.label})]},z.label))})})]})})]})]})]})}):c.jsx("section",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full flex flex-col items-center",children:[c.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Admin Portal"}),c.jsx("p",{className:"mb-6 text-gray-600 text-center",children:"Welcome to the SecureBank Admin Portal. Please login to access the dashboard."}),c.jsx(he,{className:"w-full",onClick:()=>T(!0),children:"Login"})]})})}function g1(){var Re,We,He,Ve,ke;const[,t]=Kn(),{toast:e}=gi(),{login:i}=vi(),[s,a]=_.useState(""),[o,u]=_.useState(""),[d,f]=_.useState(),[p,g]=_.useState(null),[y,x]=_.useState(!1),[b,P]=_.useState({ip:"",geo:{latitude:null,longitude:null,accuracy:null,fallback:!0},device:{}}),[T,A]=_.useState(!1),[D,j]=_.useState(null),[R,$]=_.useState([]),[O,X]=_.useState(!1),[oe,se]=_.useState(!1),[pe,ge]=_.useState([]),[z,H]=_.useState(null),[re,Z]=_.useState(null),[Oe,Te]=_.useState(!1);_.useEffect(()=>{const Ne=/Mobi|Android/i.test(navigator.userAgent)?["typing","touch"]:["typing","mouse"];f(Ne[Math.floor(Math.random()*Ne.length)])},[]),_.useEffect(()=>{async function U(){let Ne="";try{Ne=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}let Fe={latitude:null,longitude:null,accuracy:null,fallback:!0};navigator.geolocation&&await new Promise(qe=>{navigator.geolocation.getCurrentPosition(tt=>{Fe={latitude:tt.coords.latitude,longitude:tt.coords.longitude,accuracy:tt.coords.accuracy,fallback:!1},qe(null)},()=>qe(null),{enableHighAccuracy:!0,timeout:5e3})});const Be={browser:navigator.userAgent,os:navigator.platform,screen:`${window.screen.width}x${window.screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language};P(qe=>({...qe,ip:Ne,geo:Fe,device:Be}))}U()},[]);const ye=di({mutationFn:async()=>await(await sn("POST","/api/auth/login",{identifier:s,behavioral_challenge:{type:d,data:p},metrics:b})).json(),onSuccess:U=>{U.risk==="low"?(i(U.user),e({title:"Welcome back!",description:"You have successfully signed in."}),t("/dashboard")):U.risk==="medium"?(j(U.risk),$(U.reasons||[]),ge(U.stepup_verification||["webauthn","behavioral","trusted_device","magic_link"]),Te(U.trusted_device_eligible||!1),X(!0)):(j(U.risk),$(U.reasons||[]),X(!0))},onError:U=>{var Ne,Fe,Be,qe;j(((Ne=U==null?void 0:U.detail)==null?void 0:Ne.risk)||"high"),$(((Fe=U==null?void 0:U.detail)==null?void 0:Fe.reasons)||[((Be=U==null?void 0:U.detail)==null?void 0:Be.message)||"Unknown error"]),X(!0),e({title:"Login Failed",description:((qe=U==null?void 0:U.detail)==null?void 0:qe.message)||(U==null?void 0:U.message)||"Invalid credentials",variant:"destructive"})}}),Y=U=>{if(U.preventDefault(),u(""),!s){u("Please enter your email, username, or phone number.");return}if(!y){e({title:"Complete the behavioral challenge first."});return}ye.mutate()};function at({type:U,onComplete:Ne}){const Fe="The quick brown fox jumps over the lazy dog.",[Be,qe]=_.useState(""),[tt,vt]=_.useState(null),[jt,Vt]=_.useState([]),[Bt,bn]=_.useState(0),[Et,Ft]=_.useState(!1),[zt,S]=_.useState([]),[k,I]=_.useState(0),[K,q]=_.useState(null),[E,B]=_.useState([]),[te,me]=_.useState(null);return _.useEffect(()=>{if(U==="typing"&&Be===Fe){Ft(!0);const le=(Date.now()-(tt||Date.now()))/1e3,we=Fe.split(" ").length/le*60,ze=Be.length===Fe.length?[...Be].filter((wn,Gt)=>wn!==Fe[Gt]).length/Fe.length:1;Ne({wpm:we,errorRate:ze,keystrokeTimings:jt,backspaces:Bt,duration:le})}},[Be]),_.useEffect(()=>{if(U==="mouse"&&zt.length>50&&k>2){Ft(!0);const le=(Date.now()-(K||Date.now()))/1e3;Ne({path:zt,clicks:k,duration:le})}},[zt,k]),_.useEffect(()=>{if(U==="touch"&&E.length>30){Ft(!0);const le=(Date.now()-(te||Date.now()))/1e3;Ne({path:E,duration:le})}},[E]),U==="typing"?c.jsxs("div",{className:"mb-2",children:[c.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Type the sentence below as quickly and accurately as you can:"}),c.jsx("div",{className:"p-2 bg-gray-100 rounded mb-2 text-xs",children:Fe}),c.jsx("input",{className:"w-full border rounded p-2 text-sm",value:Be,onChange:le=>{tt||vt(Date.now()),qe(le.target.value),Vt(we=>[...we,Date.now()-(tt||Date.now())])},onKeyDown:le=>{le.key==="Backspace"&&bn(we=>we+1)},disabled:Et}),Et&&c.jsx("div",{className:"text-green-600 text-xs mt-1",children:"Challenge complete!"})]}):U==="mouse"?c.jsxs("div",{className:"mb-2",children:[c.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Move your mouse in this area and click at least 3 times:"}),c.jsx("div",{className:"w-full h-24 border-2 border-dashed rounded bg-gray-50 relative",onMouseMove:le=>{K||q(Date.now()),S(we=>[...we,{x:le.nativeEvent.offsetX,y:le.nativeEvent.offsetY,t:Date.now()-(K||Date.now())}])},onClick:()=>I(le=>le+1),children:c.jsxs("div",{className:"absolute bottom-1 right-2 text-xs text-gray-400",children:["Moves: ",zt.length,", Clicks: ",k]})}),Et&&c.jsx("div",{className:"text-green-600 text-xs mt-1",children:"Challenge complete!"})]}):U==="touch"?c.jsxs("div",{className:"mb-2",children:[c.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Swipe or tap in this area:"}),c.jsx("div",{className:"w-full h-24 border-2 border-dashed rounded bg-gray-50 relative",onTouchStart:le=>{te||me(Date.now());const we=Date.now()-(te||Date.now());B(ze=>[...ze,{x:le.touches[0].clientX,y:le.touches[0].clientY,t:we}])},onTouchMove:le=>{const we=Date.now()-(te||Date.now());B(ze=>[...ze,{x:le.touches[0].clientX,y:le.touches[0].clientY,t:we}])},children:c.jsxs("div",{className:"absolute bottom-1 right-2 text-xs text-gray-400",children:["Touches: ",E.length]})}),Et&&c.jsx("div",{className:"text-green-600 text-xs mt-1",children:"Challenge complete!"})]}):null}function ne(U){return btoa(String.fromCharCode(...new Uint8Array(U))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}return c.jsxs("section",{className:"py-20 min-h-screen bg-gray-50 flex items-center justify-center",children:[c.jsx("div",{className:"max-w-md mx-auto px-4 w-full",children:c.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:c.jsxs(De,{className:"banking-card",children:[c.jsxs(Je,{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx(bt,{href:"/",children:c.jsxs(he,{variant:"ghost",size:"sm",children:[c.jsx(Bg,{className:"h-4 w-4 mr-2"}),"Back"]})}),c.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx(Fg,{className:"h-6 w-6 text-primary"})})]}),c.jsx(et,{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),c.jsx("p",{className:"text-gray-600",children:"Sign in to your secure banking account"})]}),c.jsxs(Ie,{children:[c.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx(hn,{htmlFor:"identifier",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email, Username, or Phone"}),c.jsx(Mn,{id:"identifier",value:s,onChange:U=>a(U.target.value),placeholder:"Enter your email, username, or phone",className:"w-full"}),o&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:o})]}),c.jsx(at,{type:d,onComplete:U=>{g(U),x(!0)}}),c.jsx(he,{type:"submit",className:"w-full banking-button-primary",disabled:ye.isPending,children:ye.isPending?"Signing you in...":"Sign In"})]}),c.jsxs("div",{className:"mt-6",children:[c.jsx("button",{className:"text-xs text-primary underline mb-2",onClick:()=>A(U=>!U),type:"button",children:T?"Hide":"See why this is collected"}),T&&c.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg text-xs",children:[c.jsx("div",{className:"mb-2 font-medium",children:"Collected Metrics (partially blurred):"}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("span",{children:["IP: ",c.jsx("span",{className:"blur-sm",children:(Re=b.ip)==null?void 0:Re.slice(0,6)}),"•••"]}),c.jsxs("span",{children:["Device: ",c.jsx("span",{className:"blur-sm",children:(He=(We=b.device)==null?void 0:We.browser)==null?void 0:He.slice(0,10)}),"•••"]}),c.jsxs("span",{children:["Geo: ",c.jsx("span",{className:"blur-sm",children:(Ve=b.geo)==null?void 0:Ve.latitude}),", ",c.jsx("span",{className:"blur-sm",children:(ke=b.geo)==null?void 0:ke.longitude})]})]}),c.jsx("div",{className:"mt-2 text-gray-500",children:"We collect minimal info to verify it's really you and keep your account safe. Data is encrypted and never shared."})]})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",c.jsx(bt,{href:"/register",className:"text-primary hover:text-primary/80 font-medium",children:"Sign up"})]})})]})]})})}),c.jsx(yc,{open:O,onOpenChange:X,children:c.jsxs(Aa,{children:[c.jsx(La,{children:D==="high"?"High Risk Login Blocked":D==="medium"?"Additional Verification Required":"Login Risk"}),c.jsxs(Ea,{children:[c.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-700",children:R.map((U,Ne)=>c.jsx("li",{children:U},Ne))}),D==="medium"&&c.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[re&&c.jsx("div",{className:"text-red-600 text-xs",children:re}),pe.includes("webauthn")&&window.PublicKeyCredential&&c.jsx(he,{disabled:!!z,onClick:async()=>{H("webauthn"),Z(null);try{const U=await sn("POST","/api/auth/webauthn/auth/begin",{identifier:s}),{publicKey:Ne,challenge_id:Fe}=await U.json?await U.json():U;Ne.challenge=Uint8Array.from(atob(Ne.challenge),jt=>jt.charCodeAt(0)),Ne.allowCredentials&&(Ne.allowCredentials=Ne.allowCredentials.map(jt=>({...jt,id:Uint8Array.from(atob(jt.id),Vt=>Vt.charCodeAt(0))})));const Be=await navigator.credentials.get({publicKey:Ne});if(!Be)throw new Error("WebAuthn failed or was cancelled.");const qe={id:Be.id,type:Be.type,rawId:ne(Be.rawId),response:{authenticatorData:ne(Be.response.authenticatorData),clientDataJSON:ne(Be.response.clientDataJSON),signature:ne(Be.response.signature),userHandle:Be.response.userHandle?ne(Be.response.userHandle):null}},tt=await sn("POST","/api/auth/webauthn/auth/complete",{identifier:s,credential:qe,challenge_id:Fe}),vt=await tt.json?await tt.json():tt;if(vt.token){i(vt.user||{email:s}),t("/dashboard");return}throw new Error(vt.message||"WebAuthn authentication failed.")}catch(U){Z(U.message||"WebAuthn failed")}H(null)},children:"Use Biometrics (WebAuthn)"}),pe.includes("behavioral")&&c.jsx(he,{disabled:!!z,onClick:async()=>{H("behavioral"),Z(null);try{throw X(!1),x(!1),setTimeout(()=>X(!0),500),new Error("Behavioral step-up not implemented in demo")}catch(U){Z(U.message||"Behavioral verification failed")}H(null)},children:"Retry Behavioral Challenge"}),pe.includes("trusted_device")&&Oe&&c.jsx(he,{disabled:!!z,onClick:async()=>{H("trusted_device"),Z(null);try{throw new Error("Trusted device step-up not implemented in demo")}catch(U){Z(U.message||"Trusted device verification failed")}H(null)},children:"Confirm Trusted Device"}),pe.includes("magic_link")&&c.jsx(he,{disabled:!!z,onClick:async()=>{H("magic_link"),Z(null);try{throw new Error("Magic link step-up not implemented in demo")}catch(U){Z(U.message||"Magic link failed")}H(null)},children:"Send me a magic link"})]}),D==="high"&&c.jsx("div",{className:"mt-4 text-red-700",children:"Your login was blocked for security reasons."})]}),c.jsx("div",{className:"flex gap-2 justify-end",children:c.jsx("button",{className:"btn btn-secondary",onClick:()=>X(!1),children:"Close"})})]})})]})}function y1(){const{user:t,logout:e}=vi(),[i]=Kn(),[s,a]=_.useState(!1),o=f=>i===f,u=t?[{href:"/dashboard",label:"Dashboard",active:o("/dashboard")},{href:"/transactions",label:"Transactions",active:o("/transactions")},...t.isAdmin?[{href:"/admin",label:"Admin",active:o("/admin")}]:[]]:[],d=()=>{e(),a(!1)};return c.jsxs("nav",{className:"bg-white shadow-sm border-b border-gray-200 fixed w-full top-0 z-50",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsx(bt,{href:"/",children:c.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx(js,{className:"h-6 w-6 text-primary"}),c.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SecureBank"})]})}),c.jsx("div",{className:"hidden md:flex items-center space-x-8",children:u.map(f=>c.jsx(bt,{href:f.href,children:c.jsx("button",{className:`text-sm font-medium transition-colors ${f.active?"text-primary border-b-2 border-primary pb-1":"text-gray-700 hover:text-primary"}`,children:f.label})},f.href))}),c.jsx("div",{className:"hidden md:flex items-center space-x-4",children:t?c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx(Su,{className:"h-4 w-4 text-primary"})}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:t.name}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${t.riskLevel==="low"?"bg-green-400":t.riskLevel==="medium"?"bg-yellow-400":"bg-red-400"}`}),c.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:[t.riskLevel," Risk"]})]})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300"}),c.jsxs(he,{variant:"ghost",size:"sm",onClick:d,className:"text-gray-500 hover:text-gray-700",children:[c.jsx(Pu,{className:"h-4 w-4 mr-1"}),"Logout"]})]})}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(bt,{href:"/login",children:c.jsx(he,{variant:"ghost",size:"sm",children:"Login"})}),c.jsx(bt,{href:"/register",children:c.jsx(he,{size:"sm",className:"banking-button-primary",children:"Register"})})]})}),c.jsx("div",{className:"md:hidden",children:c.jsx(he,{variant:"ghost",size:"sm",onClick:()=>a(!s),children:s?c.jsx(ma,{className:"h-5 w-5"}):c.jsx(Jw,{className:"h-5 w-5"})})})]})}),c.jsx(_y,{children:s&&c.jsx(Ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-t border-gray-200",children:c.jsxs("div",{className:"px-4 py-4 space-y-4",children:[u.map(f=>c.jsx(bt,{href:f.href,children:c.jsx("button",{onClick:()=>a(!1),className:`block w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors ${f.active?"bg-primary/10 text-primary":"text-gray-700 hover:bg-gray-100"}`,children:f.label})},f.href)),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:t?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2",children:[c.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx(Su,{className:"h-4 w-4 text-primary"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${t.riskLevel==="low"?"bg-green-400":t.riskLevel==="medium"?"bg-yellow-400":"bg-red-400"}`}),c.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:[t.riskLevel," Risk"]})]})]})]}),c.jsxs(he,{variant:"ghost",size:"sm",onClick:d,className:"w-full justify-start text-gray-500 hover:text-gray-700",children:[c.jsx(Pu,{className:"h-4 w-4 mr-2"}),"Logout"]})]}):c.jsxs("div",{className:"space-y-2",children:[c.jsx(bt,{href:"/login",children:c.jsx(he,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>a(!1),children:"Login"})}),c.jsx(bt,{href:"/register",children:c.jsx(he,{size:"sm",className:"w-full banking-button-primary",onClick:()=>a(!1),children:"Register"})})]})})]})})})]})}function v1(){return c.jsxs(c.Fragment,{children:[c.jsx(y1,{}),c.jsx("main",{className:"pt-16 min-h-screen",children:c.jsxs(ST,{children:[c.jsx(jn,{path:"/",component:LC}),c.jsx(jn,{path:"/register",component:cL}),c.jsx(jn,{path:"/verify-email",component:uL}),c.jsx(jn,{path:"/onboarding",component:bL}),c.jsx(jn,{path:"/login",component:g1}),c.jsx(jn,{path:"/dashboard",component:Ph(qL)}),c.jsx(jn,{path:"/transactions",component:Ph(KL)}),c.jsx(jn,{path:"/admin",component:SL(p1)}),c.jsx(jn,{component:iS})]})})]})}function x1(){return c.jsx(Ow,{client:NT,children:c.jsx(JT,{children:c.jsxs(TL,{children:[c.jsx(RT,{}),c.jsx(v1,{})]})})})}tT.createRoot(document.getElementById("root")).render(c.jsx(x1,{}));
